(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[16],{

/***/ "./node_modules/jstree/dist/jstree.min.js":
/*!************************************************!*\
  !*** ./node_modules/jstree/dist/jstree.min.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jsTree - v3.3.7 - 2018-11-14 - (MIT) */

!function(e){"use strict"; true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (e),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(function(S,E){"use strict";if(!S.jstree){var s=0,a=!1,n=!1,o=!1,r=[],e=S("script:last").attr("src"),k=window.document;S.jstree={version:"3.3.7",defaults:{plugins:[]},plugins:{},path:e&&-1!==e.indexOf("/")?e.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},S.jstree.create=function(e,i){var r=new S.jstree.core(++s),t=i;return i=S.extend(!0,{},S.jstree.defaults,i),t&&t.plugins&&(i.plugins=t.plugins),S.each(i.plugins,function(e,t){"core"!==e&&(r=r.plugin(t,i[t]))}),S(e).data("jstree",r),r.init(e,i),r},S.jstree.destroy=function(){S(".jstree:jstree").jstree("destroy"),S(k).off(".jstree")},S.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},S.jstree.reference=function(t){var i=null,e=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!e||!e.length)try{e=S(t)}catch(e){}if(!e||!e.length)try{e=S("#"+t.replace(S.jstree.idregex,"\\$&"))}catch(e){}return e&&e.length&&(e=e.closest(".jstree")).length&&(e=e.data("jstree"))?i=e:S(".jstree").each(function(){var e=S(this).data("jstree");if(e&&e._model.data[t])return i=e,!1}),i},S.fn.jstree=function(i){var r="string"==typeof i,s=Array.prototype.slice.call(arguments,1),a=null;return!(!0===i&&!this.length)&&(this.each(function(){var e=S.jstree.reference(this),t=r&&e?e[i]:null;if(a=r&&t?t.apply(e,s):null,e||r||i!==E&&!S.isPlainObject(i)||S.jstree.create(this,i),(e&&!r||!0===i)&&(a=e||!1),null!==a&&a!==E)return!1}),null!==a&&a!==E?a:this)},S.expr.pseudos.jstree=S.expr.createPseudo(function(e){return function(e){return S(e).hasClass("jstree")&&S(e).data("jstree")!==E}}),S.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:S.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(e){e.type="click",S(e.currentTarget).trigger(e)},enter:function(e){e.type="click",S(e.currentTarget).trigger(e)},left:function(e){if(e.preventDefault(),this.is_open(e.currentTarget))this.close_node(e.currentTarget);else{var t=this.get_parent(e.currentTarget);t&&t.id!==S.jstree.root&&this.get_node(t,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(e){if(e.preventDefault(),this.is_closed(e.currentTarget))this.open_node(e.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(e.currentTarget)){var t=this.get_node(e.currentTarget,!0).children(".jstree-children")[0];t&&S(this._firstChild(t)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(e){e.preventDefault();var t=this._firstChild(this.get_container_ul()[0]);t&&S(t).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},S.jstree.core.prototype={plugin:function(e,t){var i=S.jstree.plugins[e];return i?(this._data[e]={},i.prototype=this,new i(t,this)):this},init:function(e,t){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[S.jstree.root]={id:S.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=S(e).addClass("jstree jstree-"+this._id),this.settings=t,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(S.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e=k.createElement("LI"),t,i;return e.setAttribute("role","treeitem"),(t=k.createElement("I")).className="jstree-icon jstree-ocl",t.setAttribute("role","presentation"),e.appendChild(t),(t=k.createElement("A")).className="jstree-anchor",t.setAttribute("href","#"),t.setAttribute("tabindex","-1"),(i=k.createElement("I")).className="jstree-icon jstree-themeicon",i.setAttribute("role","presentation"),t.appendChild(i),e.appendChild(t),t=i=null,e},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},i=[];e.ctrlKey&&i.push("ctrl"),e.altKey&&i.push("alt"),e.shiftKey&&i.push("shift"),i.push(t[e.which]||e.which),i=i.sort().join("-").toLowerCase();var r=this.settings.core.keyboard,s,a;for(s in r)if(r.hasOwnProperty(s)&&("-"!==(a=s)&&"+"!==a&&(a=(a=a.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS")).split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),a===i))return r[s];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var a="",n=null,t=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(k.selection&&k.selection.empty)k.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",S.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),t=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",S.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",S.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",S.proxy(function(e){e.preventDefault(),e.currentTarget!==k.activeElement&&S(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",S.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var i=t.call(this,e);if(!1===i||!0===i)return i}},this)).on("load_node.jstree",S.proxy(function(e,t){t.status&&(t.node.id!==S.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(S.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var e=[],t,i;for(t=0,i=this._data.core.selected.length;t<i;t++)e=e.concat(this._model.data[this._data.core.selected[t]].parents);for(t=0,i=(e=S.vakata.array_unique(e)).length;t<i;t++)this.open_node(e[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",S.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){a=""},500);var i=String.fromCharCode(e.which).toLowerCase(),t=this.element.find(".jstree-anchor").filter(":visible"),r=t.index(k.activeElement)||0,s=!1;if(1<(a+=i).length){if(t.slice(r).each(S.proxy(function(e,t){if(0===S(t).text().toLowerCase().indexOf(a))return S(t).focus(),!(s=!0)},this)),s)return;if(t.slice(0,r).each(S.proxy(function(e,t){if(0===S(t).text().toLowerCase().indexOf(a))return S(t).focus(),!(s=!0)},this)),s)return}if(new RegExp("^"+i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(a)){if(t.slice(r+1).each(S.proxy(function(e,t){if(S(t).text().toLowerCase().charAt(0)===i)return S(t).focus(),!(s=!0)},this)),s)return;if(t.slice(0,r+1).each(S.proxy(function(e,t){if(S(t).text().toLowerCase().charAt(0)===i)return S(t).focus(),!(s=!0)},this)),s)return}},this)).on("init.jstree",S.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",S.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",S.proxy(function(e){this._data.core.focused=null,S(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",S.proxy(function(e){var t=this.get_node(e.currentTarget);t&&t.id&&(this._data.core.focused=t.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),S(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",S.proxy(function(){if(500<+new Date-t&&!this._data.core.focused&&this.settings.core.restore_focus){t=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",S.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",S.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),S(k).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),(t.instance=this).element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(e){var t=this.settings.core.strings;return S.isFunction(t)?t.call(this,e):t&&t[e]?t[e]:e},_firstChild:function(e){e=e?e.firstChild:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_nextSibling:function(e){e=e?e.nextSibling:null;while(null!==e&&1!==e.nodeType)e=e.nextSibling;return e},_previousSibling:function(e){e=e?e.previousSibling:null;while(null!==e&&1!==e.nodeType)e=e.previousSibling;return e},get_node:function(e,t){var i;e&&e.id&&(e=e.id),e instanceof S&&e.length&&e[0].id&&(e=e[0].id);try{if(this._model.data[e])e=this._model.data[e];else if("string"==typeof e&&this._model.data[e.replace(/^#/,"")])e=this._model.data[e.replace(/^#/,"")];else if("string"==typeof e&&(i=S("#"+e.replace(S.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=this.element.find(e)).length&&this._model.data[i.closest(".jstree-node").attr("id")])e=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=this.element.find(e)).length||!i.hasClass("jstree"))return!1;e=this._model.data[S.jstree.root]}return t&&(e=e.id===S.jstree.root?this.element:S("#"+e.id.replace(S.jstree.idregex,"\\$&"),this.element)),e}catch(e){return!1}},get_path:function(e,t,i){if(!(e=e.parents?e:this.get_node(e))||e.id===S.jstree.root||!e.parents)return!1;var r,s,a=[];for(a.push(i?e.id:e.text),r=0,s=e.parents.length;r<s;r++)a.push(i?e.parents[r]:this.get_text(e.parents[r]));return a=a.reverse().slice(1),t?a.join(t):a},get_next_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this._firstChild(this.get_container_ul()[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);return!!i&&S(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return!!i&&S(i)}if(e.hasClass("jstree-open")){i=this._firstChild(e.children(".jstree-children")[0]);while(i&&0===i.offsetHeight)i=this._nextSibling(i);if(null!==i)return S(i)}i=e[0];do{i=this._nextSibling(i)}while(i&&0===i.offsetHeight);return null!==i?S(i):e.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(e,t){var i;if((e=this.get_node(e,!0))[0]===this.element[0]){i=this.get_container_ul()[0].lastChild;while(i&&0===i.offsetHeight)i=this._previousSibling(i);return!!i&&S(i)}if(!e||!e.length)return!1;if(t){i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);return!!i&&S(i)}i=e[0];do{i=this._previousSibling(i)}while(i&&0===i.offsetHeight);if(null===i)return!(!(i=e[0].parentNode.parentNode)||!i.className||-1===i.className.indexOf("jstree-node"))&&S(i);e=S(i);while(e.hasClass("jstree-open"))e=e.children(".jstree-children").first().children(".jstree-node:visible:last");return e},get_parent:function(e){return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&e.parent},get_children_dom:function(e){return(e=this.get_node(e,!0))[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||0<e.children.length)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(n,o){var e,t,i,r,s;if(S.isArray(n))return this._load_nodes(n.slice(),o),!0;if(!(n=this.get_node(n)))return o&&o.call(this,n,!1),!1;if(n.state.loaded){for(n.state.loaded=!1,i=0,r=n.parents.length;i<r;i++)this._model.data[n.parents[i]].children_d=S.vakata.array_filter(this._model.data[n.parents[i]].children_d,function(e){return-1===S.inArray(e,n.children_d)});for(e=0,t=n.children_d.length;e<t;e++)this._model.data[n.children_d[e]].state.selected&&(s=!0),delete this._model.data[n.children_d[e]];s&&(this._data.core.selected=S.vakata.array_filter(this._data.core.selected,function(e){return-1===S.inArray(e,n.children_d)})),n.children=[],n.children_d=[],s&&this.trigger("changed",{action:"load_node",node:n,selected:this._data.core.selected})}return n.state.failed=!1,n.state.loading=!0,this.get_node(n,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(n,S.proxy(function(e){(n=this._model.data[n.id]).state.loading=!1,n.state.loaded=e,n.state.failed=!n.state.loaded;var t=this.get_node(n,!0),i=0,r=0,s=this._model.data,a=!1;for(i=0,r=n.children.length;i<r;i++)if(s[n.children[i]]&&!s[n.children[i]].state.hidden){a=!0;break}n.state.loaded&&t&&t.length&&(t.removeClass("jstree-closed jstree-open jstree-leaf"),a?"#"!==n.id&&t.addClass(n.state.opened?"jstree-open":"jstree-closed"):t.addClass("jstree-leaf")),t.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:n,status:e}),o&&o.call(this,n,e)},this)),!0},_load_nodes:function(e,t,i,r){var s=!0,a=function(){this._load_nodes(e,t,!0)},n=this._model.data,o,d,c=[];for(o=0,d=e.length;o<d;o++)n[e[o]]&&(!n[e[o]].state.loaded&&!n[e[o]].state.failed||!i&&r)&&(this.is_loading(e[o])||this.load_node(e[o],a),s=!1);if(s){for(o=0,d=e.length;o<d;o++)n[e[o]]&&n[e[o]].state.loaded&&c.push(e[o]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(e,t){if(e||(e=S.jstree.root),!(e=this.get_node(e)))return!1;var i=[],r=this._model.data,s=r[e.id].children_d,a,n;for(e.state&&!e.state.loaded&&i.push(e.id),a=0,n=s.length;a<n;a++)r[s[a]]&&r[s[a]].state&&!r[s[a]].state.loaded&&i.push(s[a]);i.length?this._load_nodes(i,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(s,a){var e=this.settings.core.data,t,n=function e(){return 3!==this.nodeType&&8!==this.nodeType};return e?S.isFunction(e)?e.call(this,s,S.proxy(function(e){!1===e?a.call(this,!1):this["string"==typeof e?"_append_html_data":"_append_json_data"](s,"string"==typeof e?S(S.parseHTML(e)).filter(n):e,function(e){a.call(this,e)})},this)):"object"==typeof e?e.url?(e=S.extend(!0,{},e),S.isFunction(e.url)&&(e.url=e.url.call(this,s)),S.isFunction(e.data)&&(e.data=e.data.call(this,s)),S.ajax(e).done(S.proxy(function(e,t,i){var r=i.getResponseHeader("Content-Type");return r&&-1!==r.indexOf("json")||"object"==typeof e?this._append_json_data(s,e,function(e){a.call(this,e)}):r&&-1!==r.indexOf("html")||"string"==typeof e?this._append_html_data(s,S(S.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))},this)).fail(S.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:s.id,xhr:e})},a.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(t=S.isArray(e)?S.extend(!0,[],e):S.isPlainObject(e)?S.extend(!0,{},e):e,s.id===S.jstree.root?this._append_json_data(s,t,function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1))):"string"==typeof e?s.id===S.jstree.root?this._append_html_data(s,S(S.parseHTML(e)).filter(n),function(e){a.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:s.id})},this.settings.core.error.call(this,this._data.core.last_error),a.call(this,!1)):a.call(this,!1):s.id===S.jstree.root?this._append_html_data(s,this._data.core.original_container_html.clone(!0),function(e){a.call(this,e)}):a.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&-1===S.inArray(e.id,this._model.changed)&&this._model.changed.push(e.id)},_append_html_data:function(e,t,i){(e=this.get_node(e)).children=[],e.children_d=[];var r=t.is("ul")?t.children():t,s=e.id,a=[],n=[],o=this._model.data,d=o[s],c=this._data.core.selected.length,l,h,_;for(r.each(S.proxy(function(e,t){(l=this._parse_model_from_html(S(t),s,d.parents.concat()))&&(a.push(l),n.push(l),o[l].children_d.length&&(n=n.concat(o[l].children_d)))},this)),d.children=a,d.children_d=n,h=0,_=d.parents.length;h<_;h++)o[d.parents[h]].children_d=o[d.parents[h]].children_d.concat(n);this.trigger("model",{nodes:n,parent:s}),s!==S.jstree.root?(this._node_changed(s),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==c&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(e,t,d,i){if(null!==this.element){(e=this.get_node(e)).children=[],e.children_d=[],t.d&&"string"==typeof(t=t.d)&&(t=JSON.parse(t)),S.isArray(t)||(t=[t]);var r=null,s={df:this._model.default_state,dat:t,par:e.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},j=this,a=function(e,c){e.data&&(e=e.data);var t=e.dat,i=e.par,r=[],s=[],l=[],h=e.df,_=e.t_id,u=e.t_cnt,g=e.m,a=g[i],n=e.sel,o,d,f,p,m=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s,a,n,o,d={id:r,text:e.text||"",icon:e.icon===c||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==c&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id||(d.li_attr.id=r),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),s=0,a=(g[d.id]=d).children.length;s<a;s++)n=m(g[d.children[s]],d.id,i),o=g[n],d.children_d.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));return delete e.data,delete e.children,g[d.id].original=e,d.state.selected&&l.push(d.id),d.id},v=function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,o,d;do{r="j"+_+"_"+ ++u}while(g[r]);for(s in d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===c||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==c&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=r),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=v(e.children[s],d.id,i),o=g[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,(g[d.id]=d).state.selected&&l.push(d.id),d.id};if(t.length&&t[0].id!==c&&t[0].parent!==c){for(d=0,f=t.length;d<f;d++)t[d].children||(t[d].children=[]),t[d].state||(t[d].state={}),g[t[d].id.toString()]=t[d];for(d=0,f=t.length;d<f;d++)g[t[d].parent.toString()]?(g[t[d].parent.toString()].children.push(t[d].id.toString()),a.children_d.push(t[d].id.toString())):void 0!==j&&(j._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:t[d].id.toString(),parent:t[d].parent.toString()})},j.settings.core.error.call(j,j._data.core.last_error));for(d=0,f=a.children.length;d<f;d++)o=m(g[a.children[d]],i,a.parents.concat()),s.push(o),g[o].children_d.length&&(s=s.concat(g[o].children_d));for(d=0,f=a.parents.length;d<f;d++)g[a.parents[d]].children_d=g[a.parents[d]].children_d.concat(s);p={cnt:u,mod:g,sel:n,par:i,dpc:s,add:l}}else{for(d=0,f=t.length;d<f;d++)(o=v(t[d],i,a.parents.concat()))&&(r.push(o),s.push(o),g[o].children_d.length&&(s=s.concat(g[o].children_d)));for(a.children=r,a.children_d=s,d=0,f=a.parents.length;d<f;d++)g[a.parents[d]].children_d=g[a.parents[d]].children_d.concat(s);p={cnt:u,mod:g,sel:n,par:i,dpc:s,add:l}}if("undefined"!=typeof window&&void 0!==window.document)return p;postMessage(p)},n=function(e,t){if(null!==this.element){this._cnt=e.cnt;var i,r=this._model.data;for(i in r)r.hasOwnProperty(i)&&r[i].state&&r[i].state.loading&&e.mod[i]&&(e.mod[i].state.loading=!0);if(this._model.data=e.mod,t){var s,a=e.add,n=e.sel,o=this._data.core.selected.slice();if(r=this._model.data,n.length!==o.length||S.vakata.array_unique(n.concat(o)).length!==n.length){for(i=0,s=n.length;i<s;i++)-1===S.inArray(n[i],a)&&-1===S.inArray(n[i],o)&&(r[n[i]].state.selected=!1);for(i=0,s=o.length;i<s;i++)-1===S.inArray(o[i],n)&&(r[o[i]].state.selected=!0)}}e.add.length&&(this._data.core.selected=this._data.core.selected.concat(e.add)),this.trigger("model",{nodes:e.dpc,parent:e.par}),e.par!==S.jstree.root?(this._node_changed(e.par),this.redraw()):this.redraw(!0),e.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),d.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+a.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,(r=new window.Worker(this._wrk)).onmessage=S.proxy(function(e){n.call(this,e.data,!0);try{r.terminate(),r=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),s.par?r.postMessage(s):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([e,t,d,!0])}catch(e){n.call(this,a(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else n.call(this,a(s),!1)}},_parse_model_from_html:function(e,t,i){i=i?[].concat(i):[],t&&i.unshift(t);var r,s,a=this._model.data,n={id:!1,text:!1,icon:!0,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},o,d,c;for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(n.state[o]=this._model.default_state[o]);if(d=S.vakata.attributes(e,!0),S.each(d,function(e,t){if(!(t=S.trim(t)).length)return!0;n.li_attr[e]=t,"id"===e&&(n.id=t.toString())}),(d=e.children("a").first()).length&&(d=S.vakata.attributes(d,!0),S.each(d,function(e,t){(t=S.trim(t)).length&&(n.a_attr[e]=t)})),(d=e.children("a").first().length?e.children("a").first().clone():e.clone()).children("ins, i, ul").remove(),d=d.html(),d=S("<div />").html(d),n.text=this.settings.core.force_text?d.text():d.html(),d=e.data(),n.data=d?S.extend(!0,{},d):null,n.state.opened=e.hasClass("jstree-open"),n.state.selected=e.children("a").hasClass("jstree-clicked"),n.state.disabled=e.children("a").hasClass("jstree-disabled"),n.data&&n.data.jstree)for(o in n.data.jstree)n.data.jstree.hasOwnProperty(o)&&(n.state[o]=n.data.jstree[o]);(d=e.children("a").children(".jstree-themeicon")).length&&(n.icon=!d.hasClass("jstree-themeicon-hidden")&&d.attr("rel")),n.state.icon!==E&&(n.icon=n.state.icon),n.icon!==E&&null!==n.icon&&""!==n.icon||(n.icon=!0),d=e.children("ul").children("li");do{c="j"+this._id+"_"+ ++this._cnt}while(a[c]);return n.id=n.li_attr.id?n.li_attr.id.toString():c,d.length?(d.each(S.proxy(function(e,t){r=this._parse_model_from_html(S(t),n.id,i),s=this._model.data[r],n.children.push(r),s.children_d.length&&(n.children_d=n.children_d.concat(s.children_d))},this)),n.children_d=n.children_d.concat(n.children)):e.hasClass("jstree-closed")&&(n.state.loaded=!1),n.li_attr.class&&(n.li_attr.class=n.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),n.a_attr.class&&(n.a_attr.class=n.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),(a[n.id]=n).state.selected&&this._data.core.selected.push(n.id),n.id},_parse_model_from_flat_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=e.id.toString(),s=this._model.data,a=this._model.default_state,n,o,d,c,l={id:r,text:e.text||"",icon:e.icon===E||e.icon,parent:t,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(n in a)a.hasOwnProperty(n)&&(l.state[n]=a[n]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==E&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(n in e.data.jstree)e.data.jstree.hasOwnProperty(n)&&(l.state[n]=e.data.jstree[n]);if(e&&"object"==typeof e.state)for(n in e.state)e.state.hasOwnProperty(n)&&(l.state[n]=e.state[n]);if(e&&"object"==typeof e.li_attr)for(n in e.li_attr)e.li_attr.hasOwnProperty(n)&&(l.li_attr[n]=e.li_attr[n]);if(l.li_attr.id||(l.li_attr.id=r),e&&"object"==typeof e.a_attr)for(n in e.a_attr)e.a_attr.hasOwnProperty(n)&&(l.a_attr[n]=e.a_attr[n]);for(e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),n=0,o=(s[l.id]=l).children.length;n<o;n++)c=s[d=this._parse_model_from_flat_json(s[l.children[n]],l.id,i)],l.children_d.push(d),c.children_d.length&&(l.children_d=l.children_d.concat(c.children_d));return delete e.data,delete e.children,s[l.id].original=e,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(e,t,i){i=i?i.concat():[],t&&i.unshift(t);var r=!1,s,a,n,o,d=this._model.data,c=this._model.default_state,l;do{r="j"+this._id+"_"+ ++this._cnt}while(d[r]);for(s in l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===E||e.icon,parent:t,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},c)c.hasOwnProperty(s)&&(l.state[s]=c[s]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),l.icon!==E&&null!==l.icon&&""!==l.icon||(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(l.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(l.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(l.li_attr[s]=e.li_attr[s]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=r),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(l.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)o=d[n=this._parse_model_from_json(e.children[s],l.id,i)],l.children.push(n),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,(d[l.id]=l).state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e=this._model.force_full_redraw?this._model.data[S.jstree.root].children.concat([]):this._model.changed.concat([]),t=k.createElement("UL"),i,r,s,a=this._data.core.focused;for(r=0,s=e.length;r<s;r++)(i=this.redraw_node(e[r],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&t.appendChild(i);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","group"),this.element.empty().append(t)),null!==a&&this.settings.core.restore_focus&&((i=this.get_node(a,!0))&&i.length&&i.children(".jstree-anchor")[0]!==k.activeElement?i.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:e})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),i=!1,r=!1,s=!1,a=k;if(!t)return!1;if(t.id===S.jstree.root)return this.redraw(!0);if(!(e=this.get_node(e,!0))||!e.length)return!1;if(e.children(".jstree-children").remove(),e=e[0],t.children.length&&t.state.loaded){for((s=a.createElement("UL")).setAttribute("role","group"),s.className="jstree-children",i=0,r=t.children.length;i<r;i++)s.appendChild(this.redraw_node(t.children[i],!0,!0));e.appendChild(s)}},redraw_node:function(e,t,i,r){var s=this.get_node(e),a=!1,n=!1,o=!1,d=!1,c=!1,l=!1,h="",_=k,u=this._model.data,g=!1,f=!1,p=null,m=0,v=0,j=!1,y=!1;if(!s)return!1;if(s.id===S.jstree.root)return this.redraw(!0);if(t=t||0===s.children.length,e=k.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(s.id[0])?"\\3"+s.id[0]+" "+s.id.substr(1).replace(S.jstree.idregex,"\\$&"):s.id.replace(S.jstree.idregex,"\\$&"))):k.getElementById(s.id))e=S(e),i||((a=e.parent().parent()[0])===this.element[0]&&(a=null),n=e.index()),t||!s.children.length||e.children(".jstree-children").length||(t=!0),t||(o=e.children(".jstree-children")[0]),g=e.children(".jstree-anchor")[0]===k.activeElement,e.remove();else if(t=!0,!i){if(!(null===(a=s.parent!==S.jstree.root?S("#"+s.parent.replace(S.jstree.idregex,"\\$&"),this.element)[0]:null)||a&&u[s.parent].state.opened))return!1;n=S.inArray(s.id,null===a?u[S.jstree.root].children:u[s.parent].children)}for(d in e=this._data.core.node.cloneNode(!0),h="jstree-node ",s.li_attr)if(s.li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"!==d?e.setAttribute(d,s.li_attr[d]):h+=s.li_attr[d]}for(s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),e.setAttribute("aria-selected",!!s.state.selected),e.setAttribute("aria-level",s.parents.length),e.setAttribute("aria-labelledby",s.a_attr.id),s.state.disabled&&e.setAttribute("aria-disabled",!0),d=0,c=s.children.length;d<c;d++)if(!u[s.children[d]].state.hidden){j=!0;break}if(null!==s.parent&&u[s.parent]&&!s.state.hidden&&(d=S.inArray(s.id,u[s.parent].children),y=s.id,-1!==d))for(d++,c=u[s.parent].children.length;d<c;d++)if(u[u[s.parent].children[d]].state.hidden||(y=u[s.parent].children[d]),y!==s.id)break;for(c in s.state.hidden&&(h+=" jstree-hidden"),s.state.loading&&(h+=" jstree-loading"),s.state.loaded&&!j?h+=" jstree-leaf":(h+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",e.setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),y===s.id&&(h+=" jstree-last"),e.id=s.id,e.className=h,h=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":""),s.a_attr)if(s.a_attr.hasOwnProperty(c)){if("href"===c&&"#"===s.a_attr[c])continue;"class"!==c?e.childNodes[1].setAttribute(c,s.a_attr[c]):h+=" "+s.a_attr[c]}if(h.length&&(e.childNodes[1].className="jstree-anchor "+h),(s.icon&&!0!==s.icon||!1===s.icon)&&(!1===s.icon?e.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===s.icon.indexOf("/")&&-1===s.icon.indexOf(".")?e.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(e.childNodes[1].childNodes[0].style.backgroundImage='url("'+s.icon+'")',e.childNodes[1].childNodes[0].style.backgroundPosition="center center",e.childNodes[1].childNodes[0].style.backgroundSize="auto",e.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?e.childNodes[1].appendChild(_.createTextNode(s.text)):e.childNodes[1].innerHTML+=s.text,t&&s.children.length&&(s.state.opened||r)&&s.state.loaded){for((l=_.createElement("UL")).setAttribute("role","group"),l.className="jstree-children",d=0,c=s.children.length;d<c;d++)l.appendChild(this.redraw_node(s.children[d],t,!0));e.appendChild(l)}if(o&&e.appendChild(o),!i){for(a||(a=this.element[0]),d=0,c=a.childNodes.length;d<c;d++)if(a.childNodes[d]&&a.childNodes[d].className&&-1!==a.childNodes[d].className.indexOf("jstree-children")){p=a.childNodes[d];break}p||((p=_.createElement("UL")).setAttribute("role","group"),p.className="jstree-children",a.appendChild(p)),n<(a=p).childNodes.length?a.insertBefore(e,a.childNodes[n]):a.appendChild(e),g&&(m=this.element[0].scrollTop,v=this.element[0].scrollLeft,e.childNodes[1].focus(),this.element[0].scrollTop=m,this.element[0].scrollLeft=v)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(S.proxy(function(){this.open_node(s.id,!1,0)},this),0)),e},open_node:function(e,i,r){var t,s,a,n;if(S.isArray(e)){for(t=0,s=(e=e.slice()).length;t<s;t++)this.open_node(e[t],i,r);return!0}return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&(r=r===E?this.settings.core.animation:r,this.is_closed(e)?this.is_loaded(e)?(a=this.get_node(e,!0),n=this,a.length&&(r&&a.children(".jstree-children").length&&a.children(".jstree-children").stop(!0,!0),e.children.length&&!this._firstChild(a.children(".jstree-children")[0])&&this.draw_children(e),r?(this.trigger("before_open",{node:e}),a.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",n.element&&n.trigger("after_open",{node:e})})):(this.trigger("before_open",{node:e}),a[0].className=a[0].className.replace("jstree-closed","jstree-open"),a[0].setAttribute("aria-expanded",!0))),e.state.opened=!0,i&&i.call(this,e,!0),a.length||this.trigger("before_open",{node:e}),this.trigger("open_node",{node:e}),r&&a.length||this.trigger("after_open",{node:e}),!0):this.is_loading(e)?setTimeout(S.proxy(function(){this.open_node(e,i,r)},this),500):void this.load_node(e,function(e,t){return t?this.open_node(e,i,r):!!i&&i.call(this,e,!1)}):(i&&i.call(this,e,!1),!1))},_open_to:function(e){if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;var t,i,r=e.parents;for(t=0,i=r.length;t<i;t+=1)t!==S.jstree.root&&this.open_node(r[t],!1,0);return S("#"+e.id.replace(S.jstree.idregex,"\\$&"),this.element)},close_node:function(e,t){var i,r,s,a;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.close_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&(!this.is_closed(e)&&(t=t===E?this.settings.core.animation:t,a=(s=this).get_node(e,!0),e.state.opened=!1,this.trigger("close_node",{node:e}),void(a.length?t?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(t,function(){this.style.display="",a.children(".jstree-children").remove(),s.element&&s.trigger("after_close",{node:e})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:e})):this.trigger("after_close",{node:e}))))},toggle_node:function(e){var t,i;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.toggle_node(e[t]);return!0}return this.is_closed(e)?this.open_node(e):this.is_open(e)?this.close_node(e):void 0},open_all:function(e,i,r){if(e||(e=S.jstree.root),!(e=this.get_node(e)))return!1;var t=e.id===S.jstree.root?this.get_container_ul():this.get_node(e,!0),s,a,n;if(!t.length){for(s=0,a=e.children_d.length;s<a;s++)this.is_closed(this._model.data[e.children_d[s]])&&(this._model.data[e.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:e})}r=r||t,(t=(n=this).is_closed(e)?t.find(".jstree-closed").addBack():t.find(".jstree-closed")).each(function(){n.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,r)},i||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(e,t){if(e||(e=S.jstree.root),!(e=this.get_node(e)))return!1;var i=e.id===S.jstree.root?this.get_container_ul():this.get_node(e,!0),r=this,s,a;for(i.length&&(i=this.is_open(e)?i.find(".jstree-open").addBack():i.find(".jstree-open"),S(i.get().reverse()).each(function(){r.close_node(this,t||0)})),s=0,a=e.children_d.length;s<a;s++)this._model.data[e.children_d[s]].state.opened=!1;this.trigger("close_all",{node:e})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(e){var t,i;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;e.state.disabled=!1,this.get_node(e,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:e})},disable_node:function(e){var t,i;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;e.state.disabled=!0,this.get_node(e,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:e})},is_hidden:function(e){return!0===(e=this.get_node(e)).state.hidden},hide_node:function(e,t){var i,r;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.hide_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;e.state.hidden||(e.state.hidden=!0,this._node_changed(e.parent),t||this.redraw(),this.trigger("hide_node",{node:e}))},show_node:function(e,t){var i,r;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.show_node(e[i],!0);return t||this.redraw(),!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;e.state.hidden&&(e.state.hidden=!1,this._node_changed(e.parent),t||this.redraw(),this.trigger("show_node",{node:e}))},hide_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==S.jstree.root&&!i[t].state.hidden&&(i[t].state.hidden=!0,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("hide_all",{nodes:r}),r},show_all:function(e){var t,i=this._model.data,r=[];for(t in i)i.hasOwnProperty(t)&&t!==S.jstree.root&&i[t].state.hidden&&(i[t].state.hidden=!1,r.push(t));return this._model.force_full_redraw=!0,e||this.redraw(),this.trigger("show_all",{nodes:r}),r},activate_node:function(e,t){if(this.is_disabled(e))return!1;if(t&&"object"==typeof t||(t={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==E?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&(!t.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(t.shiftKey){var i=this.get_node(e).id,r=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,a=!1,n,o;for(n=0,o=s.length;n<o;n+=1)s[n]===i&&(a=!a),s[n]===r&&(a=!a),this.is_disabled(s[n])||!a&&s[n]!==i&&s[n]!==r?this.deselect_node(s[n],!0,t):this.is_hidden(s[n])||this.select_node(s[n],!0,!1,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);else!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:t})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(e,t,i,r){var s,a,n,o;if(S.isArray(e)){for(a=0,n=(e=e.slice()).length;a<n;a++)this.select_node(e[a],t,i,r);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;s=this.get_node(e,!0),e.state.selected||(e.state.selected=!0,this._data.core.selected.push(e.id),i||(s=this._open_to(e)),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:e,selected:this._data.core.selected,event:r}),t||this.trigger("changed",{action:"select_node",node:e,selected:this._data.core.selected,event:r}))},deselect_node:function(e,t,i){var r,s,a;if(S.isArray(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.deselect_node(e[r],t,i);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;a=this.get_node(e,!0),e.state.selected&&(e.state.selected=!1,this._data.core.selected=S.vakata.array_remove_item(this._data.core.selected,e.id),a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:e,selected:this._data.core.selected,event:i}),t||this.trigger("changed",{action:"deselect_node",node:e,selected:this._data.core.selected,event:i}))},select_all:function(e){var t=this._data.core.selected.concat([]),i,r;for(this._data.core.selected=this._model.data[S.jstree.root].children_d.concat(),i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})},deselect_all:function(e){var t=this._data.core.selected.concat([]),i,r;for(i=0,r=this._data.core.selected.length;i<r;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&e.state.selected},get_selected:function(e){return e?S.map(this._data.core.selected,S.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(e){var t=this.get_selected(!0),i={},r,s,a,n;for(r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?S.map(t,S.proxy(function(e){return this.get_node(e)},this)):t},get_bottom_selected:function(e){var t=this.get_selected(!0),i=[],r,s;for(r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?S.map(i,S.proxy(function(e){return this.get_node(e)},this)):i},get_state:function(){var e={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},t;for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==S.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&e.core.loaded.push(t),this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(t,i){if(t){if(t.core&&t.core.selected&&t.core.initial_selection===E&&(t.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),t.core){var e,r,s,a,n;if(t.core.loaded)return this.settings.core.loaded_state&&S.isArray(t.core.loaded)&&t.core.loaded.length?this._load_nodes(t.core.loaded,function(e){delete t.core.loaded,this.set_state(t,i)}):(delete t.core.loaded,this.set_state(t,i)),!1;if(t.core.open)return S.isArray(t.core.open)&&t.core.open.length?this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,i)}):(delete t.core.open,this.set_state(t,i)),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==E&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==E&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,i),!1;if(t.core.selected)return a=this,t.core.initial_selection!==E&&t.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),S.each(t.core.selected,function(e,t){a.select_node(t,!1,!0)})),delete t.core.initial_selection,delete t.core.selected,this.set_state(t,i),!1;for(n in t)t.hasOwnProperty(n)&&"core"!==n&&-1===S.inArray(n,this.settings.plugins)&&delete t[n];if(S.isEmptyObject(t.core))return delete t.core,this.set_state(t,i),!1}return!S.isEmptyObject(t)||(t=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(e,t){this._data.core.state=!0===t?{}:this.get_state(),t&&S.isFunction(t)&&(this._data.core.state=t.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[S.jstree.root]={id:S.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;e||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(S.jstree.root,function(e,t){t&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(S.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===S.jstree.root)return!1;var i=[],e=[],r=this._data.core.selected.concat([]);e.push(t.id),!0===t.state.opened&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){e.push(this.id),i.push(this.id)}),this._load_nodes(e,S.proxy(function(e){this.open_node(i,!1,0),this.select_node(r),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(e,t){if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;var i,r,s=this._model.data,a=e.id;for(t=t.toString(),s[e.parent].children[S.inArray(e.id,s[e.parent].children)]=t,i=0,r=e.parents.length;i<r;i++)s[e.parents[i]].children_d[S.inArray(e.id,s[e.parents[i]].children_d)]=t;for(i=0,r=e.children.length;i<r;i++)s[e.children[i]].parent=t;for(i=0,r=e.children_d.length;i<r;i++)s[e.children_d[i]].parents[S.inArray(e.id,s[e.children_d[i]].parents)]=t;return-1!==(i=S.inArray(e.id,this._data.core.selected))&&(this._data.core.selected[i]=t),(i=this.get_node(e.id,!0))&&(i.attr("id",t),this.element.attr("aria-activedescendant")===e.id&&this.element.attr("aria-activedescendant",t)),delete s[e.id],e.id=t,s[e.li_attr.id=t]=e,this.trigger("set_id",{node:e,new:e.id,old:a}),!0},get_text:function(e){return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&e.text},set_text:function(e,t){var i,r;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_text(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&(e.text=t,this.get_node(e,!0).length&&this.redraw_node(e.id),this.trigger("set_text",{obj:e,text:t}),!0)},get_json:function(e,t,i){if(!(e=this.get_node(e||S.jstree.root)))return!1;t&&t.flat&&!i&&(i=[]);var r={id:e.id,text:e.text,icon:this.get_icon(e),li_attr:S.extend(!0,{},e.li_attr),a_attr:S.extend(!0,{},e.a_attr),state:{},data:(!t||!t.no_data)&&S.extend(!0,S.isArray(e.data)?[]:{},e.data)},s,a;if(t&&t.flat?r.parent=e.parent:r.children=[],t&&t.no_state)delete r.state;else for(s in e.state)e.state.hasOwnProperty(s)&&(r.state[s]=e.state[s]);if(t&&t.no_li_attr&&delete r.li_attr,t&&t.no_a_attr&&delete r.a_attr,t&&t.no_id&&(delete r.id,r.li_attr&&r.li_attr.id&&delete r.li_attr.id,r.a_attr&&r.a_attr.id&&delete r.a_attr.id),t&&t.flat&&e.id!==S.jstree.root&&i.push(r),!t||!t.no_children)for(s=0,a=e.children.length;s<a;s++)t&&t.flat?this.get_json(e.children[s],t,i):r.children.push(this.get_json(e.children[s],t));return t&&t.flat?i:e.id===S.jstree.root?r.children:r},create_node:function(e,t,i,r,s){if(null===e&&(e=S.jstree.root),!(e=this.get_node(e)))return!1;if(!(i=i===E?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,r,!0)});var a,n,o,d;switch(t||(t={text:this.get_string("New node")}),(t="string"==typeof t?{text:t}:S.extend(!0,{},t)).text===E&&(t.text=this.get_string("New node")),e.id===S.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":a=this.get_node(e.parent),i=S.inArray(e.id,a.children),e=a;break;case"after":a=this.get_node(e.parent),i=S.inArray(e.id,a.children)+1,e=a;break;case"inside":case"first":i=0;break;case"last":i=e.children.length;break;default:i||(i=0)}if(i>e.children.length&&(i=e.children.length),t.id||(t.id=!0),!this.check("create_node",t,e,i))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===t.id&&delete t.id,!(t=this._parse_model_from_json(t,e.id,e.parents.concat())))return!1;for(a=this.get_node(t),(n=[]).push(t),n=n.concat(a.children_d),this.trigger("model",{nodes:n,parent:e.id}),e.children_d=e.children_d.concat(n),o=0,d=e.parents.length;o<d;o++)this._model.data[e.parents[o]].children_d=this._model.data[e.parents[o]].children_d.concat(n);for(t=a,a=[],o=0,d=e.children.length;o<d;o++)a[i<=o?o+1:o]=e.children[o];return a[i]=t.id,e.children=a,this.redraw_node(e,!0),this.trigger("create_node",{node:this.get_node(t),parent:e.id,position:i}),r&&r.call(this,this.get_node(t)),t.id},rename_node:function(e,t){var i,r,s;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.rename_node(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&(s=e.text,this.check("rename_node",e,this.get_parent(e),t)?(this.set_text(e,t),this.trigger("rename_node",{node:e,text:t,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(e){var t,i,r,s,a,n,o,d,c,l,h,_;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.delete_node(e[t]);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;if(r=this.get_node(e.parent),s=S.inArray(e.id,r.children),l=!1,!this.check("delete_node",e,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==s&&(r.children=S.vakata.array_remove(r.children,s)),(a=e.children_d.concat([])).push(e.id),n=0,o=e.parents.length;n<o;n++)this._model.data[e.parents[n]].children_d=S.vakata.array_filter(this._model.data[e.parents[n]].children_d,function(e){return-1===S.inArray(e,a)});for(d=0,c=a.length;d<c;d++)if(this._model.data[a[d]].state.selected){l=!0;break}for(l&&(this._data.core.selected=S.vakata.array_filter(this._data.core.selected,function(e){return-1===S.inArray(e,a)})),this.trigger("delete_node",{node:e,parent:r.id}),l&&this.trigger("changed",{action:"delete_node",node:e,selected:this._data.core.selected,parent:r.id}),d=0,c=a.length;d<c;d++)delete this._model.data[a[d]];return-1!==S.inArray(this._data.core.focused,a)&&(this._data.core.focused=null,h=this.element[0].scrollTop,_=this.element[0].scrollLeft,r.id===S.jstree.root?this._model.data[S.jstree.root].children[0]&&this.get_node(this._model.data[S.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(r,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=h,this.element[0].scrollLeft=_),this.redraw_node(r,!0),!0},check:function(e,t,i,r,s){t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var a=e.match(/^move_node|copy_node|create_node$/i)?i:t,n=this.settings.core.check_callback;return"move_node"!==e&&"copy_node"!==e||s&&s.is_multi||t.id!==i.id&&("move_node"!==e||S.inArray(t.id,i.children)!==r)&&-1===S.inArray(i.id,t.children_d)?(a&&a.data&&(a=a.data),a&&a.functions&&(!1===a.functions[e]||!0===a.functions[e])?(!1===a.functions[e]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),a.functions[e]):!(!1===n||S.isFunction(n)&&!1===n.call(this,e,t,i,r,s)||n&&!1===n[e])||!(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})):!(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})})},last_error:function(){return this._data.core.last_error},move_node:function(e,t,i,r,s,a,n){var o,d,c,l,h,_,u,g,f,p,m,v,j,y;if(t=this.get_node(t),i=i===E?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.move_node(e,t,i,r,!0,!1,n)});if(S.isArray(e)){if(1!==e.length){for(o=0,d=e.length;o<d;o++)(f=this.move_node(e[o],t,i,r,s,!1,n))&&(t=f,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===S.jstree.root)return!1;if(c=(e.parent||S.jstree.root).toString(),h=i.toString().match(/^(before|after)$/)&&t.id!==S.jstree.root?this.get_node(t.parent):t,u=!(_=n||(this._model.data[e.id]?this:S.jstree.reference(e.id)))||!_._id||this._id!==_._id,l=_&&_._id&&c&&_._model.data[c]&&_._model.data[c].children?S.inArray(e.id,_._model.data[c].children):-1,_&&_._id&&(e=_._model.data[e.id]),u)return!!(f=this.copy_node(e,t,i,r,s,!1,n))&&(_&&_.delete_node(e),f);switch(t.id===S.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=S.inArray(t.id,h.children);break;case"after":i=S.inArray(t.id,h.children)+1;break;case"inside":case"first":i=0;break;case"last":i=h.children.length;break;default:i||(i=0)}if(i>h.children.length&&(i=h.children.length),!this.check("move_node",e,h,i,{core:!0,origin:n,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(e.parent===h.id){for(g=h.children.concat(),-1!==(f=S.inArray(e.id,g))&&(g=S.vakata.array_remove(g,f),f<i&&i--),f=[],p=0,m=g.length;p<m;p++)f[i<=p?p+1:p]=g[p];f[i]=e.id,h.children=f,this._node_changed(h.id),this.redraw(h.id===S.jstree.root)}else{for((f=e.children_d.concat()).push(e.id),p=0,m=e.parents.length;p<m;p++){for(g=[],v=0,j=(y=_._model.data[e.parents[p]].children_d).length;v<j;v++)-1===S.inArray(y[v],f)&&g.push(y[v]);_._model.data[e.parents[p]].children_d=g}for(_._model.data[c].children=S.vakata.array_remove_item(_._model.data[c].children,e.id),p=0,m=h.parents.length;p<m;p++)this._model.data[h.parents[p]].children_d=this._model.data[h.parents[p]].children_d.concat(f);for(g=[],p=0,m=h.children.length;p<m;p++)g[i<=p?p+1:p]=h.children[p];for(g[i]=e.id,h.children=g,h.children_d.push(e.id),h.children_d=h.children_d.concat(e.children_d),e.parent=h.id,(f=h.parents.concat()).unshift(h.id),y=e.parents.length,f=(e.parents=f).concat(),p=0,m=e.children_d.length;p<m;p++)this._model.data[e.children_d[p]].parents=this._model.data[e.children_d[p]].parents.slice(0,-1*y),Array.prototype.push.apply(this._model.data[e.children_d[p]].parents,f);c!==S.jstree.root&&h.id!==S.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(h.id)),a||this.redraw()}return r&&r.call(this,e,h,i),this.trigger("move_node",{node:e,parent:h.id,position:i,old_parent:c,old_position:l,is_multi:_&&_._id&&_._id!==this._id,is_foreign:!_||!_._id,old_instance:_,new_instance:this}),e.id},copy_node:function(e,t,i,r,s,a,n){var o,d,c,l,h,_,u,g,f,p,m;if(t=this.get_node(t),i=i===E?0:i,!t)return!1;if(!i.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.copy_node(e,t,i,r,!0,!1,n)});if(S.isArray(e)){if(1!==e.length){for(o=0,d=e.length;o<d;o++)(l=this.copy_node(e[o],t,i,r,s,!0,n))&&(t=l,i="after");return this.redraw(),!0}e=e[0]}if(!(e=e&&e.id?e:this.get_node(e))||e.id===S.jstree.root)return!1;switch(g=(e.parent||S.jstree.root).toString(),f=i.toString().match(/^(before|after)$/)&&t.id!==S.jstree.root?this.get_node(t.parent):t,m=!(p=n||(this._model.data[e.id]?this:S.jstree.reference(e.id)))||!p._id||this._id!==p._id,p&&p._id&&(e=p._model.data[e.id]),t.id===S.jstree.root&&("before"===i&&(i="first"),"after"===i&&(i="last")),i){case"before":i=S.inArray(t.id,f.children);break;case"after":i=S.inArray(t.id,f.children)+1;break;case"inside":case"first":i=0;break;case"last":i=f.children.length;break;default:i||(i=0)}if(i>f.children.length&&(i=f.children.length),!this.check("copy_node",e,f,i,{core:!0,origin:n,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(u=p?p.get_json(e,{no_id:!0,no_data:!0,no_state:!0}):e))return!1;if(!0===u.id&&delete u.id,!(u=this._parse_model_from_json(u,f.id,f.parents.concat())))return!1;for(l=this.get_node(u),e&&e.state&&!1===e.state.loaded&&(l.state.loaded=!1),(c=[]).push(u),c=c.concat(l.children_d),this.trigger("model",{nodes:c,parent:f.id}),h=0,_=f.parents.length;h<_;h++)this._model.data[f.parents[h]].children_d=this._model.data[f.parents[h]].children_d.concat(c);for(c=[],h=0,_=f.children.length;h<_;h++)c[i<=h?h+1:h]=f.children[h];return c[i]=l.id,f.children=c,f.children_d.push(l.id),f.children_d=f.children_d.concat(l.children_d),f.id===S.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(f.id),a||this.redraw(f.id===S.jstree.root),r&&r.call(this,l,f,i),this.trigger("copy_node",{node:l,original:e,parent:f.id,position:i,old_parent:g,old_position:p&&p._id&&g&&p._model.data[g]&&p._model.data[g].children?S.inArray(e.id,p._model.data[g].children):-1,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),l.id},cut:function(e){if(e||(e=this._data.core.selected.concat()),S.isArray(e)||(e=[e]),!e.length)return!1;var t=[],i,r,s;for(r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&i.id&&i.id!==S.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="move_node",(o=this).trigger("cut",{node:e})},copy:function(e){if(e||(e=this._data.core.selected.concat()),S.isArray(e)||(e=[e]),!e.length)return!1;var t=[],i,r,s;for(r=0,s=e.length;r<s;r++)(i=this.get_node(e[r]))&&i.id&&i.id!==S.jstree.root&&t.push(i);if(!t.length)return!1;a=t,n="copy_node",(o=this).trigger("copy",{node:e})},get_buffer:function(){return{mode:n,node:a,inst:o}},can_paste:function(){return!1!==n&&!1!==a},paste:function(e,t){if(!((e=this.get_node(e))&&n&&n.match(/^(copy_node|move_node)$/)&&a))return!1;this[n](a,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:a,mode:n}),o=n=a=!1},clear_buffer:function(){o=n=a=!1,this.trigger("clear_buffer")},edit:function(a,e,n){var t,i,o,d,c,l,h,r,_,u=!1;return!!(a=this.get_node(a))&&(this.check("edit",a,this.get_parent(a))?(_=a,e="string"==typeof e?e:a.text,this.set_text(a,""),a=this._open_to(a),_.text=e,t=this._data.core.rtl,i=this.element.width(),this._data.core.focused=_.id,o=a.children(".jstree-anchor").focus(),d=S("<span>"),c=e,l=S("<div />",{css:{position:"absolute",top:"-200px",left:t?"0px":"-1000px",visibility:"hidden"}}).appendTo(k.body),h=S("<input />",{value:c,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:S.proxy(function(e){e.stopImmediatePropagation(),e.preventDefault();var t,i=d.children(".jstree-rename-input").val(),r=this.settings.core.force_text,s;""===i&&(i=c),l.remove(),d.replaceWith(o),d.remove(),c=r?c:S("<div></div>").append(S.parseHTML(c)).html(),a=this.get_node(a),this.set_text(a,c),(s=!!this.rename_node(a,r?S("<div></div>").text(i).text():S("<div></div>").append(S.parseHTML(i)).html()))||this.set_text(a,c),this._data.core.focused=_.id,setTimeout(S.proxy(function(){var e=this.get_node(_.id,!0);e.length&&(this._data.core.focused=_.id,e.children(".jstree-anchor").focus())},this),0),n&&n.call(this,_,s,u),h=null},this),keydown:function(e){var t=e.which;27===t&&(u=!0,this.value=c),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(l.text("pW"+this.value).width(),i))},keypress:function(e){if(13===e.which)return!1}}),r={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""},d.attr("class",o.attr("class")).append(o.contents().clone()).append(h),o.replaceWith(d),l.css(r),h.css(r).width(Math.min(l.text("pW"+h[0].value).width(),i))[0].select(),void S(k).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){h&&e.target!==h&&S(h).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(e,t){if(!e)return!1;if(!0===t){var i=this.settings.core.themes.dir;i||(i=S.jstree.path+"/themes"),t=i+"/"+e+"/style.css"}t&&-1===S.inArray(t,r)&&(S("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />'),r.push(t)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=e,this.element.addClass("jstree-"+e),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+e+"-responsive"),this.trigger("set_theme",{theme:e})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),(this._data.core.themes.variant=e)&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(e,t){var i,r,s,a;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.set_icon(e[i],t);return!0}return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&(a=e.icon,e.icon=!0===t||null===t||t===E||""===t||t,s=this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===t?(s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"),this.hide_icon(e)):(!0===t||null===t||t===E||""===t?s.removeClass("jstree-themeicon-custom "+a).css("background","").removeAttr("rel"):-1===t.indexOf("/")&&-1===t.indexOf(".")?(s.removeClass(a).css("background",""),s.addClass(t+" jstree-themeicon-custom").attr("rel",t)):(s.removeClass(a).css("background",""),s.addClass("jstree-themeicon-custom").css("background","url('"+t+"') center center no-repeat").attr("rel",t)),!1===a&&this.show_icon(e)),!0)},get_icon:function(e){return!(!(e=this.get_node(e))||e.id===S.jstree.root)&&e.icon},hide_icon:function(e){var t,i;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.hide_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===S.jstree.root)&&(e.icon=!1,this.get_node(e,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(e){var t,i,r;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.show_icon(e[t]);return!0}return!(!(e=this.get_node(e))||e===S.jstree.root)&&(r=this.get_node(e,!0),e.icon=!r.length||r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),e.icon||(e.icon=!0),r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},S.vakata={},S.vakata.attributes=function(e,i){e=S(e)[0];var r=i?{}:[];return e&&e.attributes&&S.each(e.attributes,function(e,t){-1===S.inArray(t.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==t.value&&""!==S.trim(t.value)&&(i?r[t.name]=t.value:r.push(t.name))}),r},S.vakata.array_unique=function(e){var t=[],i,r,s,a={};for(i=0,s=e.length;i<s;i++)a[e[i]]===E&&(t.push(e[i]),a[e[i]]=!0);return t},S.vakata.array_remove=function(e,t){return e.splice(t,1),e},S.vakata.array_remove_item=function(e,t){var i=S.inArray(t,e);return-1!==i?S.vakata.array_remove(e,i):e},S.vakata.array_filter=function(e,t,i,r,s){if(e.filter)return e.filter(t,i);for(s in r=[],e)~~s+""==s+""&&0<=s&&t.call(i,e[s],+s,e)&&r.push(e[s]);return r},S.jstree.plugins.changed=function(e,a){var n=[];this.trigger=function(e,t){var i,r;if(t||(t={}),"changed"===e.replace(".jstree","")){t.changed={selected:[],deselected:[]};var s={};for(i=0,r=n.length;i<r;i++)s[n[i]]=1;for(i=0,r=t.selected.length;i<r;i++)s[t.selected[i]]?s[t.selected[i]]=2:t.changed.selected.push(t.selected[i]);for(i=0,r=n.length;i<r;i++)1===s[n[i]]&&t.changed.deselected.push(n[i]);n=t.selected.slice()}a.trigger.call(this,e,t)},this.refresh=function(e,t){return n=[],a.refresh.apply(this,arguments)}};var c=k.createElement("I"),_,u,g,d,l,h,f,i;c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),S.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},S.jstree.plugins.checkbox=function(e,d){this.bind=function(){d.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",S.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",S.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",S.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(S.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",S.proxy(function(e,t){var i=this._model.data,r=i[t.parent],s=t.nodes,a,n;for(a=0,n=s.length;a<n;a++)i[s[a]].state.checked=i[s[a]].state.checked||i[s[a]].original&&i[s[a]].original.state&&i[s[a]].original.state.checked,i[s[a]].state.checked&&this._data.checkbox.selected.push(s[a])},this)),-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",S.proxy(function(e,t){var i=this._model.data,r=i[t.parent],s=t.nodes,a=[],n,o,d,c,l,h,_=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection;if(-1!==_.indexOf("down"))if(r.state[u?"selected":"checked"]){for(o=0,d=s.length;o<d;o++)i[s[o]].state[u?"selected":"checked"]=!0;this._data[u?"core":"checkbox"].selected=this._data[u?"core":"checkbox"].selected.concat(s)}else for(o=0,d=s.length;o<d;o++)if(i[s[o]].state[u?"selected":"checked"]){for(c=0,l=i[s[o]].children_d.length;c<l;c++)i[i[s[o]].children_d[c]].state[u?"selected":"checked"]=!0;this._data[u?"core":"checkbox"].selected=this._data[u?"core":"checkbox"].selected.concat(i[s[o]].children_d)}if(-1!==_.indexOf("up")){for(o=0,d=r.children_d.length;o<d;o++)i[r.children_d[o]].children.length||a.push(i[r.children_d[o]].parent);for(c=0,l=(a=S.vakata.array_unique(a)).length;c<l;c++){r=i[a[c]];while(r&&r.id!==S.jstree.root){for(o=n=0,d=r.children.length;o<d;o++)n+=i[r.children[o]].state[u?"selected":"checked"];if(n!==d)break;r.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(r.id),(h=this.get_node(r,!0))&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}}}this._data[u?"core":"checkbox"].selected=S.vakata.array_unique(this._data[u?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",S.proxy(function(e,t){var i=this,r=t.node,s=this._model.data,a=this.get_node(r.parent),n,o,d,c,l=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection,_={},u=this._data[h?"core":"checkbox"].selected;for(n=0,o=u.length;n<o;n++)_[u[n]]=!0;if(-1!==l.indexOf("down")){var g=this._cascade_new_checked_state(r.id,!0),f=r.children_d.concat(r.id);for(n=0,o=f.length;n<o;n++)-1<g.indexOf(f[n])?_[f[n]]=!0:delete _[f[n]]}if(-1!==l.indexOf("up"))while(a&&a.id!==S.jstree.root){for(n=d=0,o=a.children.length;n<o;n++)d+=s[a.children[n]].state[h?"selected":"checked"];if(d!==o)break;a.state[h?"selected":"checked"]=!0,_[a.id]=!0,(c=this.get_node(a,!0))&&c.length&&c.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),a=this.get_node(a.parent)}for(n in u=[],_)_.hasOwnProperty(n)&&u.push(n);this._data[h?"core":"checkbox"].selected=u},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",S.proxy(function(e,t){var i=this.get_node(S.jstree.root),r=this._model.data,s,a,n;for(s=0,a=i.children_d.length;s<a;s++)(n=r[i.children_d[s]])&&n.original&&n.original.state&&n.original.state.undetermined&&(n.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",S.proxy(function(e,t){var i=this,r=t.node,s=this.get_node(r,!0),a,n,o,d=this.settings.checkbox.cascade,c=this.settings.checkbox.tie_selection,l=this._data[c?"core":"checkbox"].selected,h={},_=[],u=r.children_d.concat(r.id);if(-1!==d.indexOf("down")){var g=this._cascade_new_checked_state(r.id,!1);l=l.filter(function(e){return-1===u.indexOf(e)||-1<g.indexOf(e)})}if(-1!==d.indexOf("up")&&-1===l.indexOf(r.id)){for(a=0,n=r.parents.length;a<n;a++)(o=this._model.data[r.parents[a]]).state[c?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(r.parents[a],!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(c?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===r.parents.indexOf(e)})}this._data[c?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",S.proxy(function(e,t){var i=this.get_node(t.parent),r=this._model.data,s,a,n,o,d=this.settings.checkbox.tie_selection;while(i&&i.id!==S.jstree.root&&!i.state[d?"selected":"checked"]){for(s=n=0,a=i.children.length;s<a;s++)n+=r[i.children[s]].state[d?"selected":"checked"];if(!(0<a&&n===a))break;i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),(o=this.get_node(i,!0))&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}},this)).on("move_node.jstree",S.proxy(function(e,t){var i=t.is_multi,r=t.old_parent,s=this.get_node(t.parent),a=this._model.data,n,o,d,c,l,h=this.settings.checkbox.tie_selection;if(!i){n=this.get_node(r);while(n&&n.id!==S.jstree.root&&!n.state[h?"selected":"checked"]){for(d=o=0,c=n.children.length;d<c;d++)o+=a[n.children[d]].state[h?"selected":"checked"];if(!(0<c&&o===c))break;n.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(n.id),(l=this.get_node(n,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}}n=s;while(n&&n.id!==S.jstree.root){for(d=o=0,c=n.children.length;d<c;d++)o+=a[n.children[d]].state[h?"selected":"checked"];if(o===c)n.state[h?"selected":"checked"]||(n.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(n.id),(l=this.get_node(n,!0))&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!n.state[h?"selected":"checked"])break;n.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=S.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,n.id),(l=this.get_node(n,!0))&&l.length&&l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}n=this.get_node(n.parent)}},this))},this.get_undetermined=function(e){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var i,r,s,a,n={},o=this._model.data,t=this.settings.checkbox.tie_selection,d=this._data[t?"core":"checkbox"].selected,c=[],l=this,h=[];for(i=0,r=d.length;i<r;i++)if(o[d[i]]&&o[d[i]].parents)for(s=0,a=o[d[i]].parents.length;s<a;s++){if(n[o[d[i]].parents[s]]!==E)break;o[d[i]].parents[s]!==S.jstree.root&&(n[o[d[i]].parents[s]]=!0,c.push(o[d[i]].parents[s]))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var e=l.get_node(this),t;if(e)if(e.state.loaded){for(i=0,r=e.children_d.length;i<r;i++)if(!(t=o[e.children_d[i]]).state.loaded&&t.original&&t.original.state&&t.original.state.undetermined&&!0===t.original.state.undetermined)for(n[t.id]===E&&t.id!==S.jstree.root&&(n[t.id]=!0,c.push(t.id)),s=0,a=t.parents.length;s<a;s++)n[t.parents[s]]===E&&t.parents[s]!==S.jstree.root&&(n[t.parents[s]]=!0,c.push(t.parents[s]))}else if(e.original&&e.original.state&&e.original.state.undetermined&&!0===e.original.state.undetermined)for(n[e.id]===E&&e.id!==S.jstree.root&&(n[e.id]=!0,c.push(e.id)),s=0,a=e.parents.length;s<a;s++)n[e.parents[s]]===E&&e.parents[s]!==S.jstree.root&&(n[e.parents[s]]=!0,c.push(e.parents[s]))}),i=0,r=c.length;i<r;i++)o[c[i]].state[t?"selected":"checked"]||h.push(e?o[c[i]]:c[i]);return h},this._undetermined=function(){if(null!==this.element){var e=this.get_undetermined(!1),t,i,r;for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),t=0,i=e.length;t<i;t++)(r=this.get_node(e[t],!0))&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(e,t,i,r){if(e=d.redraw_node.apply(this,arguments)){var s,a,n=null,o=null;for(s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(!this.settings.checkbox.tie_selection&&this._model.data[e.id].state.checked&&(n.className+=" jstree-checked"),o=c.cloneNode(!1),this._model.data[e.id].state.checkbox_disabled&&(o.className+=" jstree-checkbox-disabled"),n.insertBefore(o,n.childNodes[0]))}return i||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(S.proxy(this._undetermined,this),50)),e},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(e){e=this.get_node(e);var t=this.settings.checkbox.cascade,i,r,s=this.settings.checkbox.tie_selection,a=this._data[s?"core":"checkbox"].selected,n=this._model.data;if(!e||!0===e.state[s?"selected":"checked"]||-1===t.indexOf("undetermined")||-1===t.indexOf("down")&&-1===t.indexOf("up"))return!1;if(!e.state.loaded&&!0===e.original.state.undetermined)return!0;for(i=0,r=e.children_d.length;i<r;i++)if(-1!==S.inArray(e.children_d[i],a)||!n[e.children_d[i]].state.loaded&&n[e.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(e){var t,i,r;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.disable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled||(e.state.checkbox_disabled=!0,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:e}))},this.enable_checkbox=function(e){var t,i,r;if(S.isArray(e)){for(t=0,i=(e=e.slice()).length;t<i;t++)this.enable_checkbox(e[t]);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;r=this.get_node(e,!0),e.state.checkbox_disabled&&(e.state.checkbox_disabled=!1,r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:e}))},this.activate_node=function(e,t){return!S(t.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||S(t.target).hasClass("jstree-checkbox"))&&(t.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!S(t.target).hasClass("jstree-checkbox")?d.activate_node.call(this,e,t):!this.is_disabled(e)&&(this.is_checked(e)?this.uncheck_node(e,t):this.check_node(e,t),void this.trigger("activate_node",{node:this.get_node(e)})))},this._cascade_new_checked_state=function(e,t){var i=this,r=this.settings.checkbox.tie_selection,s=this._model.data[e],a=[],n=[],o,d,c;if(!this.settings.checkbox.cascade_to_disabled&&s.state.disabled||!this.settings.checkbox.cascade_to_hidden&&s.state.hidden)c=this.get_checked_descendants(e),s.state[r?"selected":"checked"]&&c.push(s.id),a=a.concat(c);else{if(s.children)for(o=0,d=s.children.length;o<d;o++){var l=s.children[o];c=i._cascade_new_checked_state(l,t),a=a.concat(c),-1<c.indexOf(l)&&n.push(l)}var h=i.get_node(s,!0),_=0<n.length&&n.length<s.children.length;s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=_),_?(s.state[r?"selected":"checked"]=!1,h.attr("aria-selected",!1).children(".jstree-anchor").removeClass(r?"jstree-clicked":"jstree-checked")):t&&n.length===s.children.length?(s.state[r?"selected":"checked"]=t,a.push(s.id),h.attr("aria-selected",!0).children(".jstree-anchor").addClass(r?"jstree-clicked":"jstree-checked")):(s.state[r?"selected":"checked"]=!1,h.attr("aria-selected",!1).children(".jstree-anchor").removeClass(r?"jstree-clicked":"jstree-checked"))}return a},this.get_checked_descendants=function(e){var t=this,i=t.settings.checkbox.tie_selection,r;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.select_node(e,!1,!0,t);var i,r,s,a;if(S.isArray(e)){for(r=0,s=(e=e.slice()).length;r<s;r++)this.check_node(e[r],t);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;i=this.get_node(e,!0),e.state.checked||(e.state.checked=!0,this._data.checkbox.selected.push(e.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.uncheck_node=function(e,t){if(this.settings.checkbox.tie_selection)return this.deselect_node(e,!1,t);var i,r,s;if(S.isArray(e)){for(i=0,r=(e=e.slice()).length;i<r;i++)this.uncheck_node(e[i],t);return!0}if(!(e=this.get_node(e))||e.id===S.jstree.root)return!1;s=this.get_node(e,!0),e.state.checked&&(e.state.checked=!1,this._data.checkbox.selected=S.vakata.array_remove_item(this._data.checkbox.selected,e.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:e,selected:this._data.checkbox.selected,event:t}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e=this._data.checkbox.selected.concat([]),t,i;for(this._data.checkbox.selected=this._model.data[S.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e=this._data.checkbox.selected.concat([]),t,i;for(t=0,i=this._data.checkbox.selected.length;t<i;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):!(!(e=this.get_node(e))||e.id===S.jstree.root)&&e.state.checked},this.get_checked=function(e){return this.settings.checkbox.tie_selection?this.get_selected(e):e?S.map(this._data.checkbox.selected,S.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_top_selected(e);var t=this.get_checked(!0),i={},r,s,a,n;for(r=0,s=t.length;r<s;r++)i[t[r].id]=t[r];for(r=0,s=t.length;r<s;r++)for(a=0,n=t[r].children_d.length;a<n;a++)i[t[r].children_d[a]]&&delete i[t[r].children_d[a]];for(r in t=[],i)i.hasOwnProperty(r)&&t.push(r);return e?S.map(t,S.proxy(function(e){return this.get_node(e)},this)):t},this.get_bottom_checked=function(e){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(e);var t=this.get_checked(!0),i=[],r,s;for(r=0,s=t.length;r<s;r++)t[r].children.length||i.push(t[r].id);return e?S.map(i,S.proxy(function(e){return this.get_node(e)},this)):i},this.load_node=function(e,t){var i,r,s,a,n,o;if(!S.isArray(e)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(e))&&o.state.loaded)for(i=0,r=o.children_d.length;i<r;i++)this._model.data[o.children_d[i]].state.checked&&(n=!0,this._data.checkbox.selected=S.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[i]));return d.load_node.apply(this,arguments)},this.get_state=function(){var e=d.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection||(e.checkbox=this._data.checkbox.selected.slice()),e},this.set_state=function(e,t){var i=d.set_state.apply(this,arguments);if(i&&e.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var r=this;S.each(e.checkbox,function(e,t){r.check_node(t)})}return delete e.checkbox,this.set_state(e,t),!1}return i},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),d.refresh.apply(this,arguments)}},S.jstree.defaults.conditionalselect=function(){return!0},S.jstree.plugins.conditionalselect=function(e,i){this.activate_node=function(e,t){if(this.settings.conditionalselect.call(this,this.get_node(e),t))return i.activate_node.call(this,e,t)}},S.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(e,t){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var i=S.jstree.reference(e.reference),t=i.get_node(e.reference);i.create_node(t,{},"last",function(t){try{i.edit(t)}catch(e){setTimeout(function(){i.edit(t)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var t=S.jstree.reference(e.reference),i=t.get_node(e.reference);t.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var t=S.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.delete_node(t.get_selected()):t.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var t=S.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.cut(t.get_top_selected()):t.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var t=S.jstree.reference(e.reference),i=t.get_node(e.reference);t.is_selected(i)?t.copy(t.get_top_selected()):t.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(e){return!S.jstree.reference(e.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var t=S.jstree.reference(e.reference),i=t.get_node(e.reference);t.paste(i)}}}}}}},S.jstree.plugins.contextmenu=function(e,a){this.bind=function(){a.bind.call(this);var i=0,r=null,t,s;this.element.on("init.jstree loading.jstree ready.jstree",S.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",S.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),i=e.ctrlKey?+new Date:0,(t||r)&&(i=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",S.proxy(function(e){this._data.contextmenu.visible&&(!i||250<+new Date-i)&&S.vakata.context.hide(),i=0},this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].clientX,s=e.originalEvent.changedTouches[0].clientY,r=setTimeout(function(){S(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(10<Math.abs(t-e.originalEvent.changedTouches[0].clientX)||10<Math.abs(s-e.originalEvent.changedTouches[0].clientY))&&(clearTimeout(r),S.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){r&&clearTimeout(r)}),S(k).on("context_hide.vakata.jstree",S.proxy(function(e,t){this._data.contextmenu.visible=!1,S(t.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&S.vakata.context.hide(),a.teardown.call(this)},this.show_contextmenu=function(t,i,r,e){if(!(t=this.get_node(t))||t.id===S.jstree.root)return!1;var s=this.settings.contextmenu,a,n=this.get_node(t,!0).children(".jstree-anchor"),o=!1,d=!1;(s.show_at_node||i===E||r===E)&&(o=n.offset(),i=o.left,r=o.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(t)&&this.activate_node(t,e),d=s.items,S.isFunction(d)&&(d=d.call(this,t,S.proxy(function(e){this._show_contextmenu(t,i,r,e)},this))),S.isPlainObject(d)&&this._show_contextmenu(t,i,r,d)},this._show_contextmenu=function(e,t,i,r){var s,a=this.get_node(e,!0).children(".jstree-anchor");S(k).one("context_show.vakata.jstree",S.proxy(function(e,t){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";S(t.element).addClass(i),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,S.vakata.context.show(a,{x:t,y:i},r),this.trigger("show_contextmenu",{node:e,x:t,y:i})}},g={element:u=!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1},(_=S).vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(e){_(k).triggerHandler("context_"+e+".vakata",{reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_execute:function(e){return!(!(e=g.items[e])||e._disabled&&(!_.isFunction(e._disabled)||e._disabled({item:e,reference:g.reference,element:g.element}))||!e.action)&&e.action.call(null,{item:e,reference:g.reference,element:g.element,position:{x:g.position_x,y:g.position_y}})},_parse:function(e,t){if(!e)return!1;t||(g.html="",g.items=[]);var i="",r=!1,s;return t&&(i+="<ul>"),_.each(e,function(e,t){if(!t)return!0;g.items.push(t),!r&&t.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(_.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),r=!1,i+="<li class='"+(t._class||"")+(!0===t._disabled||_.isFunction(t._disabled)&&t._disabled({item:t,reference:g.reference,element:g.element})?" vakata-contextmenu-disabled ":"")+"' "+(t.shortcut?" data-shortcut='"+t.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(g.items.length-1)+"' "+(t.title?"title='"+t.title+"'":"")+">",_.vakata.context.settings.icons&&(i+="<i ",t.icon&&(-1!==t.icon.indexOf("/")||-1!==t.icon.indexOf(".")?i+=" style='background:url(\""+t.icon+"\") center center no-repeat' ":i+=" class='"+t.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(_.isFunction(t.label)?t.label({item:e,reference:g.reference,element:g.element}):t.label)+(t.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+t.shortcut+'">'+(t.shortcut_label||"")+"</span>":"")+"</a>",t.submenu&&(s=_.vakata.context._parse(t.submenu,!0))&&(i+=s),i+="</li>",t.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(_.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",r=!0)}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),t&&(i+="</ul>"),t||(g.html=i,_.vakata.context._trigger("parse")),10<i.length&&i},_show_submenu:function(e){if((e=_(e)).length&&e.children("ul").length){var t=e.children("ul"),i=e.offset().left,r=i+e.outerWidth(),s=e.offset().top,a=t.width(),n=t.height(),o=_(window).width()+_(window).scrollLeft(),d=_(window).height()+_(window).scrollTop();u?e[r-(a+10+e.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):e[o<r+a&&o-r<i?"addClass":"removeClass"]("vakata-context-right"),d<s+n+10&&t.css("bottom","-1px"),e.hasClass("vakata-context-right")?i<a&&t.css("margin-right",i-a):o-r<a&&t.css("margin-left",o-r-a),t.show()}},show:function(e,t,i){var r,s,a,n,o,d,c,l,h=!0;switch(g.element&&g.element.length&&g.element.width(""),!0){case!t&&!e:return!1;case!!t&&!!e:g.reference=e,g.position_x=t.x,g.position_y=t.y;break;case!t&&!!e:r=(g.reference=e).offset(),g.position_x=r.left+e.outerHeight(),g.position_y=r.top;break;case!!t&&!e:g.position_x=t.x,g.position_y=t.y}e&&!i&&_(e).data("vakata_contextmenu")&&(i=_(e).data("vakata_contextmenu")),_.vakata.context._parse(i)&&g.element.html(g.html),g.items.length&&(g.element.appendTo(k.body),s=g.element,a=g.position_x,n=g.position_y,o=s.width(),d=s.height(),c=_(window).width()+_(window).scrollLeft(),l=_(window).height()+_(window).scrollTop(),u&&(a-=s.outerWidth()-_(e).outerWidth())<_(window).scrollLeft()+20&&(a=_(window).scrollLeft()+20),c<a+o+20&&(a=c-(o+20)),l<n+d+20&&(n=l-(d+20)),g.element.css({left:a,top:n}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),g.is_visible=!0,_.vakata.context._trigger("show"))},hide:function(){g.is_visible&&(g.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),g.is_visible=!1,_.vakata.context._trigger("hide"))}},_(function(){u="rtl"===_(k.body).css("direction");var i=!1;g.element=_("<ul class='vakata-context'></ul>"),g.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),_.contains(this,e.relatedTarget)||(i&&clearTimeout(i),g.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),_(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),_.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){_.contains(this,e.relatedTarget)||_(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){var t;_(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),_.vakata.context.settings.hide_onmouseleave&&(i=setTimeout((t=this,function(){_.vakata.context.hide()}),_.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),_(this).blur().parent().hasClass("vakata-context-disabled")||!1===_.vakata.context._execute(_(this).attr("rel"))||_.vakata.context.hide()}).on("keydown","a",function(e){var t=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),_(e.currentTarget).trigger(e);break;case 37:g.is_visible&&(g.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:g.is_visible&&((t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length||(t=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:g.is_visible&&(g.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:g.is_visible&&((t=g.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length||(t=g.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),t.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:_.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=g.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),_(k).on("mousedown.vakata.jstree",function(e){g.is_visible&&g.element[0]!==e.target&&!_.contains(g.element[0],e.target)&&_.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,t){g.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),u&&g.element.addClass("vakata-context-rtl").css("direction","rtl"),g.element.find("ul").hide().end()})}),S.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1},S.jstree.plugins.dnd=function(e,o){this.init=function(e,t){o.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in k.createElement("span")},this.bind=function(){o.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",S.proxy(function(e){if(this.settings.dnd.large_drag_target&&S(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!S(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var t=this.get_node(e.target),i=this.is_selected(t)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,r=1<i?i+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(r=S.vakata.html.escape(r)),t&&t.id&&t.id!==S.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||S.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,1<i?this.get_top_selected(!0):[t],e))){if(d={jstree:!0,origin:this,obj:this.get_node(t,!0),nodes:1<i?this.get_top_selected():[t.id]},l=e.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),S.vakata.dnd.start(e,d,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+r+'<ins class="jstree-copy" style="display:none;">+</ins></div>');S.vakata.dnd._trigger("start",e,{helper:S(),element:l,data:d})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),S.vakata.dnd._trigger("move",e,{helper:S(),element:l,data:d}),!1}).on("drop.jstree",S.proxy(function(e){return e.preventDefault(),S.vakata.dnd._trigger("stop",e,{helper:S(),element:l,data:d}),!1},this))},this.redraw_node=function(e,t,i,r){if((e=o.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var s,a,n=null;for(s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&n.setAttribute("draggable",!0)}return e}},S(function(){var C=!1,A=!1,T=!1,N=!1,O=S('<div id="jstree-marker">&#160;</div>').hide();S(k).on("dragover.vakata.jstree",function(e){l&&S.vakata.dnd._trigger("move",e,{helper:S(),element:l,data:d})}).on("drop.vakata.jstree",function(e){l&&(S.vakata.dnd._trigger("stop",e,{helper:S(),element:l,data:d}),d=l=null)}).on("dnd_start.vakata.jstree",function(e,t){T=C=!1,t&&t.data&&t.data.jstree&&O.appendTo(k.body)}).on("dnd_move.vakata.jstree",function(e,s){var a=s.event.target!==T.target;if(N&&(s.event&&"dragover"===s.event.type&&!a||clearTimeout(N)),s&&s.data&&s.data.jstree&&(!s.event.target.id||"jstree-marker"!==s.event.target.id)){T=s.event;var n=S.jstree.reference(s.event.target),o=!1,d=!1,t=!1,i,c,l,h,_,u,g,f,p,m,v,j,y,k,x,b,w;if(n&&n._data&&n._data.dnd)if(O.attr("class","jstree-"+n.get_theme()+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")),b=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey)),s.helper.children().attr("class","jstree-"+n.get_theme()+" jstree-"+n.get_theme()+"-"+n.get_theme_variant()+" "+(n.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[b?"show":"hide"](),s.event.target!==n.element[0]&&s.event.target!==n.get_container_ul()[0]||0!==n.get_container_ul().children().length){if((o=n.settings.dnd.large_drop_target?S(s.event.target).closest(".jstree-node").children(".jstree-anchor"):S(s.event.target).closest(".jstree-anchor"))&&o.length&&o.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(d=o.offset(),t=(s.event.pageY!==E?s.event.pageY:s.event.originalEvent.pageY)-d.top,h=o.outerHeight(),g=t<h/3?["b","i","a"]:h-h/3<t?["a","i","b"]:h/2<t?["i","a","b"]:["i","b","a"],S.each(g,function(e,t){switch(t){case"b":c=d.left-6,l=d.top,_=n.get_parent(o),u=o.parent().index();break;case"i":k=n.settings.dnd.inside_pos,x=n.get_node(o.parent()),c=d.left-2,l=d.top+h/2+1,_=x.id,u="first"===k?0:"last"===k?x.children.length:Math.min(k,x.children.length);break;case"a":c=d.left-6,l=d.top+h,_=n.get_parent(o),u=o.parent().index()+1}for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(v=s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",j=u,"move_node"===v&&"a"===t&&s.data.origin&&s.data.origin===n&&_===n.get_parent(s.data.nodes[p])&&(y=n.get_node(_),j>S.inArray(s.data.nodes[p],y.children)&&(j-=1)),!(f=f&&(n&&n.settings&&n.settings.dnd&&!1===n.settings.dnd.check_while_dragging||n.check(v,s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],_,j,{dnd:!0,ref:n.get_node(o.parent()),pos:t,origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))){n&&n.last_error&&(A=n.last_error());break}var i,r;if("i"===t&&o.parent().is(".jstree-closed")&&n.settings.dnd.open_timeout&&(s.event&&"dragover"===s.event.type&&!a||(N&&clearTimeout(N),N=setTimeout((i=n,r=o,function(){i.open_node(r)}),n.settings.dnd.open_timeout))),f)return(w=n.get_node(_,!0)).hasClass(".jstree-dnd-parent")||(S(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),w.addClass("jstree-dnd-parent")),C={ins:n,par:_,pos:"i"!==t||"last"!==k||0!==u||n.is_loaded(x)?u:"last"},O.css({left:c+"px",top:l+"px"}).show(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"),A={},!(g=!0)}),!0===g))return}else{for(f=!0,p=0,m=s.data.nodes.length;p<m;p++)if(!(f=f&&n.check(s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node",s.data.origin&&s.data.origin!==n?s.data.origin.get_node(s.data.nodes[p]):s.data.nodes[p],S.jstree.root,"last",{dnd:!0,ref:n.get_node(S.jstree.root),pos:"i",origin:s.data.origin,is_multi:s.data.origin&&s.data.origin!==n,is_foreign:!s.data.origin})))break;if(f)return C={ins:n,par:S.jstree.root,pos:"last"},O.hide(),s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(s.event.originalEvent&&s.event.originalEvent.dataTransfer&&(s.event.originalEvent.dataTransfer.dropEffect=b?"copy":"move"))}S(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C=!1,s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),s.event.originalEvent&&s.event.originalEvent.dataTransfer,O.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(O.hide(),T=C=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,t){if(S(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),N&&clearTimeout(N),t&&t.data&&t.data.jstree){O.hide().detach();var i,r,s=[];if(C){for(i=0,r=t.data.nodes.length;i<r;i++)s[i]=t.data.origin?t.data.origin.get_node(t.data.nodes[i]):t.data.nodes[i];C.ins[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(t.event.metaKey||t.event.ctrlKey))?"copy_node":"move_node"](s,C.par,C.pos,!1,!1,!1,t.data.origin)}else(i=S(t.event.target).closest(".jstree")).length&&A&&A.error&&"check"===A.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,A);C=T=!1}}).on("keyup.jstree keydown.jstree",function(e,t){(t=S.vakata.dnd._get())&&t.data&&t.data.jstree&&("keyup"===e.type&&27===e.which?(N&&clearTimeout(N),N=T=A=C=!1,O.hide().detach(),S.vakata.dnd._clean()):(t.helper.find(".jstree-copy").first()[t.data.origin&&(t.data.origin.settings.dnd.always_copy||t.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),T&&(T.metaKey=e.metaKey,T.ctrlKey=e.ctrlKey,S.vakata.dnd._trigger("move",T))))})}),f={element:!((h=S).vakata.html={div:h("<div />"),escape:function(e){return h.vakata.html.div.text(e).html()},strip:function(e){return h.vakata.html.div.empty().append(h.parseHTML(e)).text()}}),target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},h.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(e,t,i){i===E&&(i=h.vakata.dnd._get()),i.event=t,h(k).triggerHandler("dnd_"+e+".vakata",i)},_get:function(){return{data:f.data,element:f.element,helper:f.helper}},_clean:function(){f.helper&&f.helper.remove(),f.scroll_i&&(clearInterval(f.scroll_i),f.scroll_i=!1),f={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},h(k).off("mousemove.vakata.jstree touchmove.vakata.jstree",h.vakata.dnd.drag),h(k).off("mouseup.vakata.jstree touchend.vakata.jstree",h.vakata.dnd.stop)},_scroll:function(e){if(!f.scroll_e||!f.scroll_l&&!f.scroll_t)return f.scroll_i&&(clearInterval(f.scroll_i),f.scroll_i=!1),!1;if(!f.scroll_i)return f.scroll_i=setInterval(h.vakata.dnd._scroll,100),!1;if(!0===e)return!1;var t=f.scroll_e.scrollTop(),i=f.scroll_e.scrollLeft();f.scroll_e.scrollTop(t+f.scroll_t*h.vakata.dnd.settings.scroll_speed),f.scroll_e.scrollLeft(i+f.scroll_l*h.vakata.dnd.settings.scroll_speed),t===f.scroll_e.scrollTop()&&i===f.scroll_e.scrollLeft()||h.vakata.dnd._trigger("scroll",f.scroll_e)},start:function(e,t,i){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=k.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_drag&&h.vakata.dnd.stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(e){}return f.init_x=e.pageX,f.init_y=e.pageY,f.data=t,f.is_down=!0,f.element=e.currentTarget,f.target=e.target,f.is_touch="touchstart"===e.type,!1!==i&&(f.helper=h("<div id='vakata-dnd'></div>").html(i).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),h(k).on("mousemove.vakata.jstree touchmove.vakata.jstree",h.vakata.dnd.drag),h(k).on("mouseup.vakata.jstree touchend.vakata.jstree",h.vakata.dnd.stop),!1},drag:function(i){if("touchmove"===i.type&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(i.pageX=i.originalEvent.changedTouches[0].pageX,i.pageY=i.originalEvent.changedTouches[0].pageY,i.target=k.elementFromPoint(i.originalEvent.changedTouches[0].pageX-window.pageXOffset,i.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_down){if(!f.is_drag){if(!(Math.abs(i.pageX-f.init_x)>(f.is_touch?h.vakata.dnd.settings.threshold_touch:h.vakata.dnd.settings.threshold)||Math.abs(i.pageY-f.init_y)>(f.is_touch?h.vakata.dnd.settings.threshold_touch:h.vakata.dnd.settings.threshold)))return;f.helper&&(f.helper.appendTo(k.body),f.helper_w=f.helper.outerWidth()),f.is_drag=!0,h(f.target).one("click.vakata",!1),h.vakata.dnd._trigger("start",i)}var e=!1,t=!1,r=!1,s=!1,a=!1,n=!1,o=!1,d=!1,c=!1,l=!1;return f.scroll_t=0,f.scroll_l=0,f.scroll_e=!1,h(h(i.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(h(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var e=h(this),t=e.offset();if(this.scrollHeight>this.offsetHeight&&(t.top+e.height()-i.pageY<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=1),i.pageY-t.top<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(t.left+e.width()-i.pageX<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=1),i.pageX-t.left<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=-1)),f.scroll_t||f.scroll_l)return f.scroll_e=h(this),!1}),f.scroll_e||(e=h(k),t=h(window),r=e.height(),s=t.height(),a=e.width(),n=t.width(),o=e.scrollTop(),d=e.scrollLeft(),s<r&&i.pageY-o<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=-1),s<r&&s-(i.pageY-o)<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_t=1),n<a&&i.pageX-d<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=-1),n<a&&n-(i.pageX-d)<h.vakata.dnd.settings.scroll_proximity&&(f.scroll_l=1),(f.scroll_t||f.scroll_l)&&(f.scroll_e=e)),f.scroll_e&&h.vakata.dnd._scroll(!0),f.helper&&(c=parseInt(i.pageY+h.vakata.dnd.settings.helper_top,10),l=parseInt(i.pageX+h.vakata.dnd.settings.helper_left,10),r&&r<c+25&&(c=r-50),a&&l+f.helper_w>a&&(l=a-(f.helper_w+2)),f.helper.css({left:l+"px",top:c+"px"})),h.vakata.dnd._trigger("move",i),!1}},stop:function(e){if("touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=k.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),f.is_drag)e.target!==f.target&&h(f.target).off("click.vakata"),h.vakata.dnd._trigger("stop",e);else if("touchend"===e.type&&e.target===f.target){var t=setTimeout(function(){h(e.target).click()},100);h(e.target).one("click",function(){t&&clearTimeout(t)})}return h.vakata.dnd._clean(),!1}},S.jstree.defaults.massload=null,S.jstree.plugins.massload=function(e,h){this.init=function(e,t){this._data.massload={},h.init.call(this,e,t)},this._load_nodes=function(a,n,o,d){var e=this.settings.massload,t=JSON.stringify(a),i=[],r=this._model.data,s,c,l;if(!o){for(s=0,c=a.length;s<c;s++)r[a[s]]&&(r[a[s]].state.loaded||r[a[s]].state.failed)&&!d||(i.push(a[s]),(l=this.get_node(a[s],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},i.length){if(S.isFunction(e))return e.call(this,i,S.proxy(function(e){var t,i;if(e)for(t in e)e.hasOwnProperty(t)&&(this._data.massload[t]=e[t]);for(t=0,i=a.length;t<i;t++)(l=this.get_node(a[t],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);h._load_nodes.call(this,a,n,o,d)},this));if("object"==typeof e&&e&&e.url)return e=S.extend(!0,{},e),S.isFunction(e.url)&&(e.url=e.url.call(this,i)),S.isFunction(e.data)&&(e.data=e.data.call(this,i)),S.ajax(e).done(S.proxy(function(e,t,i){var r,s;if(e)for(r in e)e.hasOwnProperty(r)&&(this._data.massload[r]=e[r]);for(r=0,s=a.length;r<s;r++)(l=this.get_node(a[r],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);h._load_nodes.call(this,a,n,o,d)},this)).fail(S.proxy(function(e){h._load_nodes.call(this,a,n,o,d)},this))}}return h._load_nodes.call(this,a,n,o,d)},this._load_node=function(e,t){var i=this._data.massload[e.id],r=null,s;return i?(r=this["string"==typeof i?"_append_html_data":"_append_json_data"](e,"string"==typeof i?S(S.parseHTML(i)).filter(function(){return 3!==this.nodeType}):i,function(e){t.call(this,e)}),(s=this.get_node(e.id,!0))&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[e.id],r):h._load_node.call(this,e,t)}},S.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},S.jstree.plugins.search=function(e,o){this.bind=function(){o.bind.call(this),this._data.search.str="",this._data.search.dom=S(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",S.proxy(function(e,t){if(this._data.search.som&&t.res.length){var i=this._model.data,r,s,a=[],n,o;for(r=0,s=t.res.length;r<s;r++)if(i[t.res[r]]&&!i[t.res[r]].state.hidden&&(a.push(t.res[r]),a=a.concat(i[t.res[r]].parents),this._data.search.smc))for(n=0,o=i[t.res[r]].children_d.length;n<o;n++)i[i[t.res[r]].children_d[n]]&&!i[i[t.res[r]].children_d[n]].state.hidden&&a.push(i[t.res[r]].children_d[n]);a=S.vakata.array_remove_item(S.vakata.array_unique(a),S.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(a,!0),this.redraw(!0)}},this)).on("clear_search.jstree",S.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(r,e,t,i,s,a){if(!1===r||""===S.trim(r.toString()))return this.clear_search();i=(i=this.get_node(i))&&i.id?i.id:null,r=r.toString();var n=this.settings.search,o=!!n.ajax&&n.ajax,d=this._model.data,c=null,l=[],h=[],_,u;if(this._data.search.res.length&&!s&&this.clear_search(),t===E&&(t=n.show_only_matches),a===E&&(a=n.show_only_matches_children),!e&&!1!==o)return S.isFunction(o)?o.call(this,r,S.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(S.isArray(e)?S.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})},this),i):((o=S.extend({},o)).data||(o.data={}),o.data.str=r,i&&(o.data.inside=i),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=S.ajax(o).fail(S.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(o)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(S.proxy(function(e){e&&e.d&&(e=e.d),this._load_nodes(S.isArray(e)?S.vakata.array_unique(e):[],function(){this.search(r,!0,t,i,s,a)})},this)),this._data.search.lastRequest);if(s||(this._data.search.str=r,this._data.search.dom=S(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=t,this._data.search.smc=a),c=new S.vakata.search(r,!0,{caseSensitive:n.case_sensitive,fuzzy:n.fuzzy}),S.each(d[i||S.jstree.root].children_d,function(e,t){var i=d[t];i.text&&!i.state.hidden&&(!n.search_leaves_only||i.state.loaded&&0===i.children.length)&&(n.search_callback&&n.search_callback.call(this,r,i)||!n.search_callback&&c.search(i.text).isMatch)&&(l.push(t),h=h.concat(i.parents))}),l.length){for(_=0,u=(h=S.vakata.array_unique(h)).length;_<u;_++)h[_]!==S.jstree.root&&d[h[_]]&&!0===this.open_node(h[_],null,0)&&this._data.search.opn.push(h[_]);this._data.search.res=s?(this._data.search.dom=this._data.search.dom.add(S(this.element[0].querySelectorAll("#"+S.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(S.jstree.idregex,"\\$&"):e.replace(S.jstree.idregex,"\\$&")}).join(", #")))),S.vakata.array_unique(this._data.search.res.concat(l))):(this._data.search.dom=S(this.element[0].querySelectorAll("#"+S.map(l,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(S.jstree.idregex,"\\$&"):e.replace(S.jstree.idregex,"\\$&")}).join(", #"))),l),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:r,res:this._data.search.res,show_only_matches:t})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=S(this.element[0].querySelectorAll("#"+S.map(this._data.search.res,function(e){return-1!=="0123456789".indexOf(e[0])?"\\3"+e[0]+" "+e.substr(1).replace(S.jstree.idregex,"\\$&"):e.replace(S.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=S()},this.redraw_node=function(e,t,i,r){if((e=o.redraw_node.apply(this,arguments))&&-1!==S.inArray(e.id,this._data.search.res)){var s,a,n=null;for(s=0,a=e.childNodes.length;s<a;s++)if(e.childNodes[s]&&e.childNodes[s].className&&-1!==e.childNodes[s].className.indexOf("jstree-anchor")){n=e.childNodes[s];break}n&&(n.className+=" jstree-search")}return e}},(i=S).vakata.search=function(p,e,m){m=m||{},!1!==(m=i.extend({},i.vakata.search.defaults,m)).fuzzy&&(m.fuzzy=!0),p=m.caseSensitive?p:p.toLowerCase();var v=m.location,s=m.distance,j=m.threshold,y=p.length,k,x,b,t;return 32<y&&(m.fuzzy=!1),m.fuzzy&&(k=1<<y-1,x=function(){var e={},t=0;for(t=0;t<y;t++)e[p.charAt(t)]=0;for(t=0;t<y;t++)e[p.charAt(t)]|=1<<y-t-1;return e}(),b=function(e,t){var i=e/y,r=Math.abs(v-t);return s?i+r/s:r?1:i}),t=function(e){if(e=m.caseSensitive?e:e.toLowerCase(),p===e||-1!==e.indexOf(p))return{isMatch:!0,score:0};if(!m.fuzzy)return{isMatch:!1,score:1};var t,i,r=e.length,s=j,a=e.indexOf(p,v),n,o,d=y+r,c,l,h,_,u,g=1,f=[];for(-1!==a&&(s=Math.min(b(0,a),s),-1!==(a=e.lastIndexOf(p,v+y))&&(s=Math.min(b(0,a),s))),a=-1,t=0;t<y;t++){n=0,o=d;while(n<o)b(t,v+o)<=s?n=o:d=o,o=Math.floor((d-n)/2+n);for(d=o,l=Math.max(1,v-o+1),h=Math.min(v+o,r)+y,(_=new Array(h+2))[h+1]=(1<<t)-1,i=h;l<=i;i--)if(u=x[e.charAt(i-1)],_[i]=0===t?(_[i+1]<<1|1)&u:(_[i+1]<<1|1)&u|(c[i+1]|c[i])<<1|1|c[i+1],_[i]&k&&(g=b(t,i-1))<=s){if(s=g,a=i-1,f.push(a),!(v<a))break;l=Math.max(1,2*v-a)}if(b(t+1,v)>s)break;c=_}return{isMatch:0<=a,score:g}},!0===e?{search:t}:t(e)},i.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1},S.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1};var p=!(S.jstree.plugins.sort=function(e,t){this.bind=function(){t.bind.call(this),this.element.on("model.jstree",S.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",S.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",S.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(e,t){var i,r;if((e=this.get_node(e))&&e.children&&e.children.length&&(e.children.sort(S.proxy(this.settings.sort,this)),t))for(i=0,r=e.children_d.length;i<r;i++)this.sort(e.children_d[i],!1)}}),t,m;S.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},S.jstree.plugins.state=function(e,t){this.bind=function(){t.bind.call(this);var i=S.proxy(function(){this.element.on(this.settings.state.events,S.proxy(function(){p&&clearTimeout(p),p=setTimeout(S.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",S.proxy(function(e,t){this.element.one("restore_state.jstree",i),this.restore_state()||i()},this))},this.save_state=function(){var e=this.get_state();this.settings.state.preserve_loaded||delete e.core.loaded;var t={state:e,ttl:this.settings.state.ttl,sec:+new Date};S.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var i=S.vakata.storage.get(this.settings.state.key);if(i)try{i=JSON.parse(i)}catch(e){return!1}return!(i&&i.ttl&&i.sec&&+new Date-i.sec>i.ttl)&&(i&&i.state&&(i=i.state),i&&S.isFunction(this.settings.state.filter)&&(i=this.settings.state.filter.call(this,i)),!!i&&(this.settings.state.preserve_loaded||delete i.core.loaded,this.element.one("set_state.jstree",function(e,t){t.instance.trigger("restore_state",{state:S.extend(!0,{},i)})}),this.set_state(i),!0))},this.clear_state=function(){return S.vakata.storage.del(this.settings.state.key)}},(t=S).vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}},S.jstree.defaults.types={default:{}},S.jstree.defaults.types[S.jstree.root]={},S.jstree.plugins.types=function(e,l){this.init=function(e,t){var i,r;if(t&&t.types&&t.types.default)for(i in t.types)if("default"!==i&&i!==S.jstree.root&&t.types.hasOwnProperty(i))for(r in t.types.default)t.types.default.hasOwnProperty(r)&&t.types[i][r]===E&&(t.types[i][r]=t.types.default[r]);l.init.call(this,e,t),this._model.data[S.jstree.root].type=S.jstree.root},this.refresh=function(e,t){l.refresh.call(this,e,t),this._model.data[S.jstree.root].type=S.jstree.root},this.bind=function(){this.element.on("model.jstree",S.proxy(function(e,t){var i=this._model.data,r=t.nodes,s=this.settings.types,a,n,o="default",d;for(a=0,n=r.length;a<n;a++){if(o="default",i[r[a]].original&&i[r[a]].original.type&&s[i[r[a]].original.type]&&(o=i[r[a]].original.type),i[r[a]].data&&i[r[a]].data.jstree&&i[r[a]].data.jstree.type&&s[i[r[a]].data.jstree.type]&&(o=i[r[a]].data.jstree.type),i[r[a]].type=o,!0===i[r[a]].icon&&s[o].icon!==E&&(i[r[a]].icon=s[o].icon),s[o].li_attr!==E&&"object"==typeof s[o].li_attr)for(d in s[o].li_attr)if(s[o].li_attr.hasOwnProperty(d)){if("id"===d)continue;i[r[a]].li_attr[d]===E?i[r[a]].li_attr[d]=s[o].li_attr[d]:"class"===d&&(i[r[a]].li_attr.class=s[o].li_attr.class+" "+i[r[a]].li_attr.class)}if(s[o].a_attr!==E&&"object"==typeof s[o].a_attr)for(d in s[o].a_attr)if(s[o].a_attr.hasOwnProperty(d)){if("id"===d)continue;i[r[a]].a_attr[d]===E?i[r[a]].a_attr[d]=s[o].a_attr[d]:"href"===d&&"#"===i[r[a]].a_attr[d]?i[r[a]].a_attr.href=s[o].a_attr.href:"class"===d&&(i[r[a]].a_attr.class=s[o].a_attr.class+" "+i[r[a]].a_attr.class)}}i[S.jstree.root].type=S.jstree.root},this)),l.bind.call(this)},this.get_json=function(e,t,i){var r,s,a=this._model.data,n=t?S.extend(!0,{},t,{no_id:!1}):{},o=l.get_json.call(this,e,n,i);if(!1===o)return!1;if(S.isArray(o))for(r=0,s=o.length;r<s;r++)o[r].type=o[r].id&&a[o[r].id]&&a[o[r].id].type?a[o[r].id].type:"default",t&&t.no_id&&(delete o[r].id,o[r].li_attr&&o[r].li_attr.id&&delete o[r].li_attr.id,o[r].a_attr&&o[r].a_attr.id&&delete o[r].a_attr.id);else o.type=o.id&&a[o.id]&&a[o.id].type?a[o.id].type:"default",t&&t.no_id&&(o=this._delete_ids(o));return o},this._delete_ids=function(e){if(S.isArray(e)){for(var t=0,i=e.length;t<i;t++)e[t]=this._delete_ids(e[t]);return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&S.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(e,t,i,r,s){if(!1===l.check.call(this,e,t,i,r,s))return!1;t=t&&t.id?t:this.get_node(t),i=i&&i.id?i:this.get_node(i);var a=t&&t.id?s&&s.origin?s.origin:S.jstree.reference(t.id):null,n,o,d,c;switch(a=a&&a._model&&a._model.data?a._model.data:null,e){case"create_node":case"move_node":case"copy_node":if("move_node"!==e||-1===S.inArray(t.id,i.children)){if((n=this.get_rules(i)).max_children!==E&&-1!==n.max_children&&n.max_children===i.children.length)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(n.valid_children!==E&&-1!==n.valid_children&&-1===S.inArray(t.type||"default",n.valid_children))return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});if(a&&t.children_d&&t.parents){for(d=o=0,c=t.children_d.length;d<c;d++)o=Math.max(o,a[t.children_d[d]].parents.length);o=o-t.parents.length+1}(o<=0||o===E)&&(o=1);do{if(n.max_depth!==E&&-1!==n.max_depth&&n.max_depth<o)return!(this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})});i=this.get_node(i.parent),n=this.get_rules(i),o++}while(i)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var t=this.get_type(e,!0);return t.max_depth===E&&(t.max_depth=-1),t.max_children===E&&(t.max_children=-1),t.valid_children===E&&(t.valid_children=-1),t},this.get_type=function(e,t){return!!(e=this.get_node(e))&&(t?S.extend({type:e.type},this.settings.types[e.type]):e.type)},this.set_type=function(e,t){var i=this._model.data,r,s,a,n,o,d,c,l;if(S.isArray(e)){for(s=0,a=(e=e.slice()).length;s<a;s++)this.set_type(e[s],t);return!0}if(r=this.settings.types,e=this.get_node(e),!r[t]||!e)return!1;if((c=this.get_node(e,!0))&&c.length&&(l=c.children(".jstree-anchor")),n=e.type,o=this.get_icon(e),e.type=t,(!0===o||!r[n]||r[n].icon!==E&&o===r[n].icon)&&this.set_icon(e,r[t].icon===E||r[t].icon),r[n]&&r[n].li_attr!==E&&"object"==typeof r[n].li_attr)for(d in r[n].li_attr)if(r[n].li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(i[e.id].li_attr.class=(i[e.id].li_attr.class||"").replace(r[n].li_attr[d],""),c&&c.removeClass(r[n].li_attr[d])):i[e.id].li_attr[d]===r[n].li_attr[d]&&(i[e.id].li_attr[d]=null,c&&c.removeAttr(d))}if(r[n]&&r[n].a_attr!==E&&"object"==typeof r[n].a_attr)for(d in r[n].a_attr)if(r[n].a_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(i[e.id].a_attr.class=(i[e.id].a_attr.class||"").replace(r[n].a_attr[d],""),l&&l.removeClass(r[n].a_attr[d])):i[e.id].a_attr[d]===r[n].a_attr[d]&&("href"===d?(i[e.id].a_attr[d]="#",l&&l.attr("href","#")):(delete i[e.id].a_attr[d],l&&l.removeAttr(d)))}if(r[t].li_attr!==E&&"object"==typeof r[t].li_attr)for(d in r[t].li_attr)if(r[t].li_attr.hasOwnProperty(d)){if("id"===d)continue;i[e.id].li_attr[d]===E?(i[e.id].li_attr[d]=r[t].li_attr[d],c&&("class"===d?c.addClass(r[t].li_attr[d]):c.attr(d,r[t].li_attr[d]))):"class"===d&&(i[e.id].li_attr.class=r[t].li_attr[d]+" "+i[e.id].li_attr.class,c&&c.addClass(r[t].li_attr[d]))}if(r[t].a_attr!==E&&"object"==typeof r[t].a_attr)for(d in r[t].a_attr)if(r[t].a_attr.hasOwnProperty(d)){if("id"===d)continue;i[e.id].a_attr[d]===E?(i[e.id].a_attr[d]=r[t].a_attr[d],l&&("class"===d?l.addClass(r[t].a_attr[d]):l.attr(d,r[t].a_attr[d]))):"href"===d&&"#"===i[e.id].a_attr[d]?(i[e.id].a_attr.href=r[t].a_attr.href,l&&l.attr("href",r[t].a_attr.href)):"class"===d&&(i[e.id].a_attr.class=r[t].a_attr.class+" "+i[e.id].a_attr.class,l&&l.addClass(r[t].a_attr[d]))}return!0}},S.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},S.jstree.plugins.unique=function(e,f){this.check=function(e,t,i,r,s){if(!1===f.check.call(this,e,t,i,r,s))return!1;if(t=t&&t.id?t:this.get_node(t),!(i=i&&i.id?i:this.get_node(i))||!i.children)return!0;var a="rename_node"===e?r:t.text,n=[],o=this.settings.unique.case_sensitive,d=this.settings.unique.trim_whitespace,c=this._model.data,l,h,_;for(l=0,h=i.children.length;l<h;l++)_=c[i.children[l]].text,o||(_=_.toLowerCase()),d&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),n.push(_);switch(o||(a=a.toLowerCase()),d&&(a=a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),e){case"delete_node":return!0;case"rename_node":return _=t.text||"",o||(_=_.toLowerCase()),d&&(_=_.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),(l=-1===S.inArray(a,n)||t.text&&_===a)||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),l;case"create_node":return(l=-1===S.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),l;case"copy_node":return(l=-1===S.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),l;case"move_node":return(l=t.parent===i.id&&(!s||!s.is_multi)||-1===S.inArray(a,n))||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+a+" already exists. Preventing: "+e,data:JSON.stringify({chk:e,pos:r,obj:!(!t||!t.id)&&t.id,par:!(!i||!i.id)&&i.id})}),l}return!0},this.create_node=function(e,t,i,r,s){if(!t||t.text===E){if(null===e&&(e=S.jstree.root),!(e=this.get_node(e)))return f.create_node.call(this,e,t,i,r,s);if(!(i=i===E?"last":i).toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(e))return f.create_node.call(this,e,t,i,r,s);t||(t={});var a,n,o,d,c,l=this._model.data,h=this.settings.unique.case_sensitive,_=this.settings.unique.trim_whitespace,u=this.settings.unique.duplicate,g;for(n=a=this.get_string("New node"),o=[],d=0,c=e.children.length;d<c;d++)g=l[e.children[d]].text,h||(g=g.toLowerCase()),_&&(g=g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),o.push(g);d=1,g=n,h||(g=g.toLowerCase()),_&&(g=g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));while(-1!==S.inArray(g,o))g=n=u.call(this,a,++d).toString(),h||(g=g.toLowerCase()),_&&(g=g.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));t.text=n}return f.create_node.call(this,e,t,i,r,s)}};var v=k.createElement("DIV");if(v.setAttribute("unselectable","on"),v.setAttribute("role","presentation"),v.className="jstree-wholerow",v.innerHTML="&#160;",S.jstree.plugins.wholerow=function(e,a){this.bind=function(){a.bind.call(this),this.element.on("ready.jstree set_state.jstree",S.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",S.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",S.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",S.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i=!1,r,s;for(r=0,s=t.selected.length;r<s;r++)(i=this.get_node(t.selected[r],!0))&&i.length&&i.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",S.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",S.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",S.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var t=S.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});S(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t)}},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=S.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});S(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var t=S.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});S(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",S.proxy(function(e){e.stopImmediatePropagation();var t=S.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});S(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(t).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",S.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",S.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),a.teardown.call(this)},this.redraw_node=function(e,t,i,r){if(e=a.redraw_node.apply(this,arguments)){var s=v.cloneNode(!0);-1!==S.inArray(e.id,this._data.core.selected)&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===e.id&&(s.className+=" jstree-wholerow-hovered"),e.insertBefore(s,e.childNodes[0])}return e}},window.customElements&&Object&&Object.create){var j=Object.create(HTMLElement.prototype);j.createdCallback=function(){var e={core:{},plugins:[]},t;for(t in S.jstree.plugins)S.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(e.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(e[t]=JSON.parse(this.getAttribute(t))));for(t in S.jstree.defaults.core)S.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(e.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));S(this).jstree(e)};try{window.customElements.define("vakata-jstree",function(){},{prototype:j})}catch(e){}}}});

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvanN0cmVlL2Rpc3QvanN0cmVlLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFFQSxhQUFhLGFBQWEsS0FBcUMsQ0FBQyxpQ0FBTyxDQUFDLDZFQUFRLENBQUMsb0NBQUMsQ0FBQztBQUFBO0FBQUE7QUFBQSxvR0FBQyxDQUFDLFNBQXdGLENBQUMsZUFBZSxhQUFhLGNBQWMsNkVBQTZFLFVBQVUsMEJBQTBCLFdBQVcsV0FBVywyRkFBMkYsV0FBVyxnQkFBZ0IsK0JBQStCLGlDQUFpQyx1QkFBdUIseUZBQXlGLGlDQUFpQyxzQ0FBc0MsNkJBQTZCLDBEQUEwRCwyQkFBMkIsa0RBQWtELE1BQU0sUUFBUSxxQ0FBcUMsMEJBQTBCLDJDQUEyQyxnQ0FBZ0Msa0JBQWtCLGdFQUFnRSxPQUFPLFVBQVUscUJBQXFCLDRDQUE0QyxVQUFVLDJHQUEyRyw2QkFBNkIscUNBQXFDLElBQUkseUJBQXlCLDBFQUEwRSxxREFBcUQsZ0RBQWdELDBJQUEwSSwwQkFBMEIsdURBQXVELG1CQUFtQix5REFBeUQsMEJBQTBCLG9GQUFvRix1RkFBdUYsaUhBQWlILHlCQUF5Qiw2Q0FBNkMsbUJBQW1CLDZDQUE2QyxrQkFBa0IscUZBQXFGLEtBQUssdUNBQXVDLGlGQUFpRixnQkFBZ0IsbUJBQW1CLHlDQUF5QyxrREFBa0QsbUJBQW1CLGlHQUFpRyx1REFBdUQsRUFBRSx1Q0FBdUMsd0VBQXdFLDhEQUE4RCxrQkFBa0IsbUJBQW1CLHlDQUF5QyxrREFBa0QsaUJBQWlCLGdCQUFnQixrQkFBa0IsbUJBQW1CLG1EQUFtRCw4REFBOEQsaUJBQWlCLHlGQUF5RixnQkFBZ0IsZ0RBQWdELDBCQUEwQixxQkFBcUIsMEJBQTBCLDBCQUEwQixzQ0FBc0Msb0JBQW9CLGFBQWEsT0FBTyxrRUFBa0UsNkNBQTZDLGtDQUFrQyx5RUFBeUUsV0FBVyxzbkJBQXNuQiwwRUFBMEUsbW9CQUFtb0IscUJBQXFCLHlDQUF5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QXFCLHVDQUF1QywrQkFBK0IsOENBQThDLHNGQUFzRiw0SUFBNEksNEJBQTRCLElBQUksdUhBQXVILDJGQUEyRiwyQkFBMkIsNExBQTRMLGdJQUFnSSwwREFBMEQsRUFBRSxJQUFJLDhFQUE4RSxnSUFBZ0ksMERBQTBELEVBQUUsSUFBSSw0RUFBNEUsZ0lBQWdJLDBEQUEwRCxFQUFFLElBQUksZ0hBQWdILGdJQUFnSSwwREFBMEQsRUFBRSxJQUFJLFNBQVMsc0NBQXNDLG1CQUFtQiwrRkFBK0YsOEhBQThILFFBQVEsRUFBRSxpSkFBaUosaUVBQWlFLElBQUksdUhBQXVILHlGQUF5Riw2SUFBNkksU0FBUyw0Q0FBNEMsNkJBQTZCLDhIQUE4SCwwQ0FBMEMscUJBQXFCLHFGQUFxRixpQkFBaUIsd0VBQXdFLHVEQUF1RCx1REFBdUQscUZBQXFGLGtEQUFrRCxxRkFBcUYsYUFBYSw0QkFBNEIsSUFBSSxzSEFBc0gsb0RBQW9ELDJIQUEySCx5RUFBeUUsa0xBQWtMLHVFQUF1RSwyQkFBMkIsbUJBQW1CLDZCQUE2QixvR0FBb0csRUFBRSwwRkFBMEYseURBQXlELDZCQUE2Qix1QkFBdUIsd0VBQXdFLEVBQUUsaUdBQWlHLHNEQUFzRCw2QkFBNkIsMEJBQTBCLHdFQUF3RSxFQUFFLGlHQUFpRyxxRUFBcUUsNkJBQTZCLHVCQUF1Qix3RUFBd0UsRUFBRSxpR0FBaUcsbUZBQW1GLDJHQUEyRyxrRUFBa0UsbUNBQW1DLFFBQVEsMEJBQTBCLDZGQUE2RixvQ0FBb0MsMENBQTBDLHNCQUFzQiw4TkFBOE4sVUFBVSwrQ0FBK0MsMkNBQTJDLDZCQUE2QixPQUFPLE9BQU8sWUFBWSxHQUFHLHNNQUFzTSxpS0FBaUssbUJBQW1CLElBQUkseURBQXlELEVBQUUsWUFBWSxFQUFFLGFBQWEsRSIsImZpbGUiOiJ0aGVtZS1idW5kbGUuY2h1bmsuMTYuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEganNUcmVlIC0gdjMuMy43IC0gMjAxOC0xMS0xNCAtIChNSVQpICovXG5cbiFmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxlKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKHJlcXVpcmUoXCJqcXVlcnlcIikpOmUoalF1ZXJ5KX0oZnVuY3Rpb24oUyxFKXtcInVzZSBzdHJpY3RcIjtpZighUy5qc3RyZWUpe3ZhciBzPTAsYT0hMSxuPSExLG89ITEscj1bXSxlPVMoXCJzY3JpcHQ6bGFzdFwiKS5hdHRyKFwic3JjXCIpLGs9d2luZG93LmRvY3VtZW50O1MuanN0cmVlPXt2ZXJzaW9uOlwiMy4zLjdcIixkZWZhdWx0czp7cGx1Z2luczpbXX0scGx1Z2luczp7fSxwYXRoOmUmJi0xIT09ZS5pbmRleE9mKFwiL1wiKT9lLnJlcGxhY2UoL1xcL1teXFwvXSskLyxcIlwiKTpcIlwiLGlkcmVnZXg6L1tcXFxcOiYhXnwoKVxcW1xcXTw+QConK34jXCI7Liw9XFwtIFxcLyR7fSU/YF0vZyxyb290OlwiI1wifSxTLmpzdHJlZS5jcmVhdGU9ZnVuY3Rpb24oZSxpKXt2YXIgcj1uZXcgUy5qc3RyZWUuY29yZSgrK3MpLHQ9aTtyZXR1cm4gaT1TLmV4dGVuZCghMCx7fSxTLmpzdHJlZS5kZWZhdWx0cyxpKSx0JiZ0LnBsdWdpbnMmJihpLnBsdWdpbnM9dC5wbHVnaW5zKSxTLmVhY2goaS5wbHVnaW5zLGZ1bmN0aW9uKGUsdCl7XCJjb3JlXCIhPT1lJiYocj1yLnBsdWdpbih0LGlbdF0pKX0pLFMoZSkuZGF0YShcImpzdHJlZVwiLHIpLHIuaW5pdChlLGkpLHJ9LFMuanN0cmVlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtTKFwiLmpzdHJlZTpqc3RyZWVcIikuanN0cmVlKFwiZGVzdHJveVwiKSxTKGspLm9mZihcIi5qc3RyZWVcIil9LFMuanN0cmVlLmNvcmU9ZnVuY3Rpb24oZSl7dGhpcy5faWQ9ZSx0aGlzLl9jbnQ9MCx0aGlzLl93cms9bnVsbCx0aGlzLl9kYXRhPXtjb3JlOnt0aGVtZXM6e25hbWU6ITEsZG90czohMSxpY29uczohMSxlbGxpcHNpczohMX0sc2VsZWN0ZWQ6W10sbGFzdF9lcnJvcjp7fSx3b3JraW5nOiExLHdvcmtlcl9xdWV1ZTpbXSxmb2N1c2VkOm51bGx9fX0sUy5qc3RyZWUucmVmZXJlbmNlPWZ1bmN0aW9uKHQpe3ZhciBpPW51bGwsZT1udWxsO2lmKCF0fHwhdC5pZHx8dC50YWdOYW1lJiZ0Lm5vZGVUeXBlfHwodD10LmlkKSwhZXx8IWUubGVuZ3RoKXRyeXtlPVModCl9Y2F0Y2goZSl7fWlmKCFlfHwhZS5sZW5ndGgpdHJ5e2U9UyhcIiNcIit0LnJlcGxhY2UoUy5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSl9Y2F0Y2goZSl7fXJldHVybiBlJiZlLmxlbmd0aCYmKGU9ZS5jbG9zZXN0KFwiLmpzdHJlZVwiKSkubGVuZ3RoJiYoZT1lLmRhdGEoXCJqc3RyZWVcIikpP2k9ZTpTKFwiLmpzdHJlZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9Uyh0aGlzKS5kYXRhKFwianN0cmVlXCIpO2lmKGUmJmUuX21vZGVsLmRhdGFbdF0pcmV0dXJuIGk9ZSwhMX0pLGl9LFMuZm4uanN0cmVlPWZ1bmN0aW9uKGkpe3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBpLHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGE9bnVsbDtyZXR1cm4hKCEwPT09aSYmIXRoaXMubGVuZ3RoKSYmKHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPVMuanN0cmVlLnJlZmVyZW5jZSh0aGlzKSx0PXImJmU/ZVtpXTpudWxsO2lmKGE9ciYmdD90LmFwcGx5KGUscyk6bnVsbCxlfHxyfHxpIT09RSYmIVMuaXNQbGFpbk9iamVjdChpKXx8Uy5qc3RyZWUuY3JlYXRlKHRoaXMsaSksKGUmJiFyfHwhMD09PWkpJiYoYT1lfHwhMSksbnVsbCE9PWEmJmEhPT1FKXJldHVybiExfSksbnVsbCE9PWEmJmEhPT1FP2E6dGhpcyl9LFMuZXhwci5wc2V1ZG9zLmpzdHJlZT1TLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gUyhlKS5oYXNDbGFzcyhcImpzdHJlZVwiKSYmUyhlKS5kYXRhKFwianN0cmVlXCIpIT09RX19KSxTLmpzdHJlZS5kZWZhdWx0cy5jb3JlPXtkYXRhOiExLHN0cmluZ3M6ITEsY2hlY2tfY2FsbGJhY2s6ITEsZXJyb3I6Uy5ub29wLGFuaW1hdGlvbjoyMDAsbXVsdGlwbGU6ITAsdGhlbWVzOntuYW1lOiExLHVybDohMSxkaXI6ITEsZG90czohMCxpY29uczohMCxlbGxpcHNpczohMSxzdHJpcGVzOiExLHZhcmlhbnQ6ITEscmVzcG9uc2l2ZTohMX0sZXhwYW5kX3NlbGVjdGVkX29ubG9hZDohMCx3b3JrZXI6ITAsZm9yY2VfdGV4dDohMSxkYmxjbGlja190b2dnbGU6ITAsbG9hZGVkX3N0YXRlOiExLHJlc3RvcmVfZm9jdXM6ITAsa2V5Ym9hcmQ6e1wiY3RybC1zcGFjZVwiOmZ1bmN0aW9uKGUpe2UudHlwZT1cImNsaWNrXCIsUyhlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSl9LGVudGVyOmZ1bmN0aW9uKGUpe2UudHlwZT1cImNsaWNrXCIsUyhlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoZSl9LGxlZnQ6ZnVuY3Rpb24oZSl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNfb3BlbihlLmN1cnJlbnRUYXJnZXQpKXRoaXMuY2xvc2Vfbm9kZShlLmN1cnJlbnRUYXJnZXQpO2Vsc2V7dmFyIHQ9dGhpcy5nZXRfcGFyZW50KGUuY3VycmVudFRhcmdldCk7dCYmdC5pZCE9PVMuanN0cmVlLnJvb3QmJnRoaXMuZ2V0X25vZGUodCwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5mb2N1cygpfX0sdXA6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciB0PXRoaXMuZ2V0X3ByZXZfZG9tKGUuY3VycmVudFRhcmdldCk7dCYmdC5sZW5ndGgmJnQuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5mb2N1cygpfSxyaWdodDpmdW5jdGlvbihlKXtpZihlLnByZXZlbnREZWZhdWx0KCksdGhpcy5pc19jbG9zZWQoZS5jdXJyZW50VGFyZ2V0KSl0aGlzLm9wZW5fbm9kZShlLmN1cnJlbnRUYXJnZXQsZnVuY3Rpb24oZSl7dGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZvY3VzKCl9KTtlbHNlIGlmKHRoaXMuaXNfb3BlbihlLmN1cnJlbnRUYXJnZXQpKXt2YXIgdD10aGlzLmdldF9ub2RlKGUuY3VycmVudFRhcmdldCwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdO3QmJlModGhpcy5fZmlyc3RDaGlsZCh0KSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5mb2N1cygpfX0sZG93bjpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9dGhpcy5nZXRfbmV4dF9kb20oZS5jdXJyZW50VGFyZ2V0KTt0JiZ0Lmxlbmd0aCYmdC5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZvY3VzKCl9LFwiKlwiOmZ1bmN0aW9uKGUpe3RoaXMub3Blbl9hbGwoKX0saG9tZTpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQ9dGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7dCYmUyh0KS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpbHRlcihcIjp2aXNpYmxlXCIpLmZvY3VzKCl9LGVuZDpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5sYXN0KCkuZm9jdXMoKX0sZjI6ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuZWRpdChlLmN1cnJlbnRUYXJnZXQpfX19LFMuanN0cmVlLmNvcmUucHJvdG90eXBlPXtwbHVnaW46ZnVuY3Rpb24oZSx0KXt2YXIgaT1TLmpzdHJlZS5wbHVnaW5zW2VdO3JldHVybiBpPyh0aGlzLl9kYXRhW2VdPXt9LGkucHJvdG90eXBlPXRoaXMsbmV3IGkodCx0aGlzKSk6dGhpc30saW5pdDpmdW5jdGlvbihlLHQpe3RoaXMuX21vZGVsPXtkYXRhOnt9LGNoYW5nZWQ6W10sZm9yY2VfZnVsbF9yZWRyYXc6ITEscmVkcmF3X3RpbWVvdXQ6ITEsZGVmYXVsdF9zdGF0ZTp7bG9hZGVkOiEwLG9wZW5lZDohMSxzZWxlY3RlZDohMSxkaXNhYmxlZDohMX19LHRoaXMuX21vZGVsLmRhdGFbUy5qc3RyZWUucm9vdF09e2lkOlMuanN0cmVlLnJvb3QscGFyZW50Om51bGwscGFyZW50czpbXSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLHN0YXRlOntsb2FkZWQ6ITF9fSx0aGlzLmVsZW1lbnQ9UyhlKS5hZGRDbGFzcyhcImpzdHJlZSBqc3RyZWUtXCIrdGhpcy5faWQpLHRoaXMuc2V0dGluZ3M9dCx0aGlzLl9kYXRhLmNvcmUucmVhZHk9ITEsdGhpcy5fZGF0YS5jb3JlLmxvYWRlZD0hMSx0aGlzLl9kYXRhLmNvcmUucnRsPVwicnRsXCI9PT10aGlzLmVsZW1lbnQuY3NzKFwiZGlyZWN0aW9uXCIpLHRoaXMuZWxlbWVudFt0aGlzLl9kYXRhLmNvcmUucnRsP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianN0cmVlLXJ0bFwiKSx0aGlzLmVsZW1lbnQuYXR0cihcInJvbGVcIixcInRyZWVcIiksdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlJiZ0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtbXVsdGlzZWxlY3RhYmxlXCIsITApLHRoaXMuZWxlbWVudC5hdHRyKFwidGFiaW5kZXhcIil8fHRoaXMuZWxlbWVudC5hdHRyKFwidGFiaW5kZXhcIixcIjBcIiksdGhpcy5iaW5kKCksdGhpcy50cmlnZ2VyKFwiaW5pdFwiKSx0aGlzLl9kYXRhLmNvcmUub3JpZ2luYWxfY29udGFpbmVyX2h0bWw9dGhpcy5lbGVtZW50LmZpbmQoXCIgPiB1bCA+IGxpXCIpLmNsb25lKCEwKSx0aGlzLl9kYXRhLmNvcmUub3JpZ2luYWxfY29udGFpbmVyX2h0bWwuZmluZChcImxpXCIpLmFkZEJhY2soKS5jb250ZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAzPT09dGhpcy5ub2RlVHlwZSYmKCF0aGlzLm5vZGVWYWx1ZXx8L15cXHMrJC8udGVzdCh0aGlzLm5vZGVWYWx1ZSkpfSkucmVtb3ZlKCksdGhpcy5lbGVtZW50Lmh0bWwoXCI8dWwgY2xhc3M9J2pzdHJlZS1jb250YWluZXItdWwganN0cmVlLWNoaWxkcmVuJyByb2xlPSdncm91cCc+PGxpIGlkPSdqXCIrdGhpcy5faWQrXCJfbG9hZGluZycgY2xhc3M9J2pzdHJlZS1pbml0aWFsLW5vZGUganN0cmVlLWxvYWRpbmcganN0cmVlLWxlYWYganN0cmVlLWxhc3QnIHJvbGU9J3RyZWUtaXRlbSc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS1vY2wnPjwvaT48YSBjbGFzcz0nanN0cmVlLWFuY2hvcicgaHJlZj0nIyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24taGlkZGVuJz48L2k+XCIrdGhpcy5nZXRfc3RyaW5nKFwiTG9hZGluZyAuLi5cIikrXCI8L2E+PC9saT48L3VsPlwiKSx0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLFwialwiK3RoaXMuX2lkK1wiX2xvYWRpbmdcIiksdGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodD10aGlzLmdldF9jb250YWluZXJfdWwoKS5jaGlsZHJlbihcImxpXCIpLmZpcnN0KCkub3V0ZXJIZWlnaHQoKXx8MjQsdGhpcy5fZGF0YS5jb3JlLm5vZGU9dGhpcy5fY3JlYXRlX3Byb3RvdHlwZV9ub2RlKCksdGhpcy50cmlnZ2VyKFwibG9hZGluZ1wiKSx0aGlzLmxvYWRfbm9kZShTLmpzdHJlZS5yb290KX0sZGVzdHJveTpmdW5jdGlvbihlKXtpZih0aGlzLnRyaWdnZXIoXCJkZXN0cm95XCIpLHRoaXMuX3dyayl0cnl7d2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5fd3JrKSx0aGlzLl93cms9bnVsbH1jYXRjaChlKXt9ZXx8dGhpcy5lbGVtZW50LmVtcHR5KCksdGhpcy50ZWFyZG93bigpfSxfY3JlYXRlX3Byb3RvdHlwZV9ub2RlOmZ1bmN0aW9uKCl7dmFyIGU9ay5jcmVhdGVFbGVtZW50KFwiTElcIiksdCxpO3JldHVybiBlLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInRyZWVpdGVtXCIpLCh0PWsuY3JlYXRlRWxlbWVudChcIklcIikpLmNsYXNzTmFtZT1cImpzdHJlZS1pY29uIGpzdHJlZS1vY2xcIix0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxlLmFwcGVuZENoaWxkKHQpLCh0PWsuY3JlYXRlRWxlbWVudChcIkFcIikpLmNsYXNzTmFtZT1cImpzdHJlZS1hbmNob3JcIix0LnNldEF0dHJpYnV0ZShcImhyZWZcIixcIiNcIiksdC5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIiksKGk9ay5jcmVhdGVFbGVtZW50KFwiSVwiKSkuY2xhc3NOYW1lPVwianN0cmVlLWljb24ganN0cmVlLXRoZW1laWNvblwiLGkuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLHQuYXBwZW5kQ2hpbGQoaSksZS5hcHBlbmRDaGlsZCh0KSx0PWk9bnVsbCxlfSxfa2JldmVudF90b19mdW5jOmZ1bmN0aW9uKGUpe3ZhciB0PXs4OlwiQmFja3NwYWNlXCIsOTpcIlRhYlwiLDEzOlwiUmV0dXJuXCIsMTk6XCJQYXVzZVwiLDI3OlwiRXNjXCIsMzI6XCJTcGFjZVwiLDMzOlwiUGFnZVVwXCIsMzQ6XCJQYWdlRG93blwiLDM1OlwiRW5kXCIsMzY6XCJIb21lXCIsMzc6XCJMZWZ0XCIsMzg6XCJVcFwiLDM5OlwiUmlnaHRcIiw0MDpcIkRvd25cIiw0NDpcIlByaW50XCIsNDU6XCJJbnNlcnRcIiw0NjpcIkRlbGV0ZVwiLDk2OlwiTnVtcGFkMFwiLDk3OlwiTnVtcGFkMVwiLDk4OlwiTnVtcGFkMlwiLDk5OlwiTnVtcGFkM1wiLDEwMDpcIk51bXBhZDRcIiwxMDE6XCJOdW1wYWQ1XCIsMTAyOlwiTnVtcGFkNlwiLDEwMzpcIk51bXBhZDdcIiwxMDQ6XCJOdW1wYWQ4XCIsMTA1OlwiTnVtcGFkOVwiLFwiLTEzXCI6XCJOdW1wYWRFbnRlclwiLDExMjpcIkYxXCIsMTEzOlwiRjJcIiwxMTQ6XCJGM1wiLDExNTpcIkY0XCIsMTE2OlwiRjVcIiwxMTc6XCJGNlwiLDExODpcIkY3XCIsMTE5OlwiRjhcIiwxMjA6XCJGOVwiLDEyMTpcIkYxMFwiLDEyMjpcIkYxMVwiLDEyMzpcIkYxMlwiLDE0NDpcIk51bWxvY2tcIiwxNDU6XCJTY3JvbGxsb2NrXCIsMTY6XCJTaGlmdFwiLDE3OlwiQ3RybFwiLDE4OlwiQWx0XCIsNDg6XCIwXCIsNDk6XCIxXCIsNTA6XCIyXCIsNTE6XCIzXCIsNTI6XCI0XCIsNTM6XCI1XCIsNTQ6XCI2XCIsNTU6XCI3XCIsNTY6XCI4XCIsNTc6XCI5XCIsNTk6XCI7XCIsNjE6XCI9XCIsNjU6XCJhXCIsNjY6XCJiXCIsNjc6XCJjXCIsNjg6XCJkXCIsNjk6XCJlXCIsNzA6XCJmXCIsNzE6XCJnXCIsNzI6XCJoXCIsNzM6XCJpXCIsNzQ6XCJqXCIsNzU6XCJrXCIsNzY6XCJsXCIsNzc6XCJtXCIsNzg6XCJuXCIsNzk6XCJvXCIsODA6XCJwXCIsODE6XCJxXCIsODI6XCJyXCIsODM6XCJzXCIsODQ6XCJ0XCIsODU6XCJ1XCIsODY6XCJ2XCIsODc6XCJ3XCIsODg6XCJ4XCIsODk6XCJ5XCIsOTA6XCJ6XCIsMTA3OlwiK1wiLDEwOTpcIi1cIiwxMTA6XCIuXCIsMTg2OlwiO1wiLDE4NzpcIj1cIiwxODg6XCIsXCIsMTg5OlwiLVwiLDE5MDpcIi5cIiwxOTE6XCIvXCIsMTkyOlwiYFwiLDIxOTpcIltcIiwyMjA6XCJcXFxcXCIsMjIxOlwiXVwiLDIyMjpcIidcIiwxMTE6XCIvXCIsMTA2OlwiKlwiLDE3MzpcIi1cIn0saT1bXTtlLmN0cmxLZXkmJmkucHVzaChcImN0cmxcIiksZS5hbHRLZXkmJmkucHVzaChcImFsdFwiKSxlLnNoaWZ0S2V5JiZpLnB1c2goXCJzaGlmdFwiKSxpLnB1c2godFtlLndoaWNoXXx8ZS53aGljaCksaT1pLnNvcnQoKS5qb2luKFwiLVwiKS50b0xvd2VyQ2FzZSgpO3ZhciByPXRoaXMuc2V0dGluZ3MuY29yZS5rZXlib2FyZCxzLGE7Zm9yKHMgaW4gcilpZihyLmhhc093blByb3BlcnR5KHMpJiYoXCItXCIhPT0oYT1zKSYmXCIrXCIhPT1hJiYoYT0oYT1hLnJlcGxhY2UoXCItLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrK1wiLFwiLVBMVVNcIikucmVwbGFjZShcIi0rXCIsXCItUExVU1wiKSkuc3BsaXQoLy18XFwrLykuc29ydCgpLmpvaW4oXCItXCIpLnJlcGxhY2UoXCJNSU5VU1wiLFwiLVwiKS5yZXBsYWNlKFwiUExVU1wiLFwiK1wiKS50b0xvd2VyQ2FzZSgpKSxhPT09aSkpcmV0dXJuIHJbc107cmV0dXJuIG51bGx9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dGhpcy51bmJpbmQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJqc3RyZWVcIikucmVtb3ZlRGF0YShcImpzdHJlZVwiKS5maW5kKFwiW2NsYXNzXj0nanN0cmVlJ11cIikuYWRkQmFjaygpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UoL2pzdHJlZVteIF0qfCQvZ2ksXCJcIil9KSx0aGlzLmVsZW1lbnQ9bnVsbH0sYmluZDpmdW5jdGlvbigpe3ZhciBhPVwiXCIsbj1udWxsLHQ9MDt0aGlzLmVsZW1lbnQub24oXCJkYmxjbGljay5qc3RyZWVcIixmdW5jdGlvbihlKXtpZihlLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1lLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITA7aWYoay5zZWxlY3Rpb24mJmsuc2VsZWN0aW9uLmVtcHR5KWsuc2VsZWN0aW9uLmVtcHR5KCk7ZWxzZSBpZih3aW5kb3cuZ2V0U2VsZWN0aW9uKXt2YXIgdD13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7dHJ5e3QucmVtb3ZlQWxsUmFuZ2VzKCksdC5jb2xsYXBzZSgpfWNhdGNoKGUpe319fSkub24oXCJtb3VzZWRvd24uanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlKXtlLnRhcmdldD09PXRoaXMuZWxlbWVudFswXSYmKGUucHJldmVudERlZmF1bHQoKSx0PStuZXcgRGF0ZSl9LHRoaXMpKS5vbihcIm1vdXNlZG93bi5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsUy5wcm94eShmdW5jdGlvbihlKXt0aGlzLnRvZ2dsZV9ub2RlKGUudGFyZ2V0KX0sdGhpcykpLm9uKFwiZGJsY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLFMucHJveHkoZnVuY3Rpb24oZSl7aWYoZS50YXJnZXQudGFnTmFtZSYmXCJpbnB1dFwiPT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXJldHVybiEwO3RoaXMuc2V0dGluZ3MuY29yZS5kYmxjbGlja190b2dnbGUmJnRoaXMudG9nZ2xlX25vZGUoZS50YXJnZXQpfSx0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsUy5wcm94eShmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksZS5jdXJyZW50VGFyZ2V0IT09ay5hY3RpdmVFbGVtZW50JiZTKGUuY3VycmVudFRhcmdldCkuZm9jdXMoKSx0aGlzLmFjdGl2YXRlX25vZGUoZS5jdXJyZW50VGFyZ2V0LGUpfSx0aGlzKSkub24oXCJrZXlkb3duLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixTLnByb3h5KGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDt0aGlzLl9kYXRhLmNvcmUucnRsJiYoMzc9PT1lLndoaWNoP2Uud2hpY2g9Mzk6Mzk9PT1lLndoaWNoJiYoZS53aGljaD0zNykpO3ZhciB0PXRoaXMuX2tiZXZlbnRfdG9fZnVuYyhlKTtpZih0KXt2YXIgaT10LmNhbGwodGhpcyxlKTtpZighMT09PWl8fCEwPT09aSlyZXR1cm4gaX19LHRoaXMpKS5vbihcImxvYWRfbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dC5zdGF0dXMmJih0Lm5vZGUuaWQhPT1TLmpzdHJlZS5yb290fHx0aGlzLl9kYXRhLmNvcmUubG9hZGVkfHwodGhpcy5fZGF0YS5jb3JlLmxvYWRlZD0hMCx0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKSYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKS5pZCksdGhpcy50cmlnZ2VyKFwibG9hZGVkXCIpKSx0aGlzLl9kYXRhLmNvcmUucmVhZHl8fHNldFRpbWVvdXQoUy5wcm94eShmdW5jdGlvbigpe2lmKHRoaXMuZWxlbWVudCYmIXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmZpbmQoXCIuanN0cmVlLWxvYWRpbmdcIikubGVuZ3RoKXtpZih0aGlzLl9kYXRhLmNvcmUucmVhZHk9ITAsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aCl7aWYodGhpcy5zZXR0aW5ncy5jb3JlLmV4cGFuZF9zZWxlY3RlZF9vbmxvYWQpe3ZhciBlPVtdLHQsaTtmb3IodD0wLGk9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aDt0PGk7dCsrKWU9ZS5jb25jYXQodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbdF1dLnBhcmVudHMpO2Zvcih0PTAsaT0oZT1TLnZha2F0YS5hcnJheV91bmlxdWUoZSkpLmxlbmd0aDt0PGk7dCsrKXRoaXMub3Blbl9ub2RlKGVbdF0sITEsMCl9dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJyZWFkeVwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pfXRoaXMudHJpZ2dlcihcInJlYWR5XCIpfX0sdGhpcyksMCkpfSx0aGlzKSkub24oXCJrZXlwcmVzcy5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUpe2lmKGUudGFyZ2V0LnRhZ05hbWUmJlwiaW5wdXRcIj09PWUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4hMDtuJiZjbGVhclRpbWVvdXQobiksbj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YT1cIlwifSw1MDApO3ZhciBpPVN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKSx0PXRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1hbmNob3JcIikuZmlsdGVyKFwiOnZpc2libGVcIikscj10LmluZGV4KGsuYWN0aXZlRWxlbWVudCl8fDAscz0hMTtpZigxPChhKz1pKS5sZW5ndGgpe2lmKHQuc2xpY2UocikuZWFjaChTLnByb3h5KGZ1bmN0aW9uKGUsdCl7aWYoMD09PVModCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihhKSlyZXR1cm4gUyh0KS5mb2N1cygpLCEocz0hMCl9LHRoaXMpKSxzKXJldHVybjtpZih0LnNsaWNlKDAscikuZWFjaChTLnByb3h5KGZ1bmN0aW9uKGUsdCl7aWYoMD09PVModCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihhKSlyZXR1cm4gUyh0KS5mb2N1cygpLCEocz0hMCl9LHRoaXMpKSxzKXJldHVybn1pZihuZXcgUmVnRXhwKFwiXlwiK2kucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLFwiXFxcXCQmXCIpK1wiKyRcIikudGVzdChhKSl7aWYodC5zbGljZShyKzEpLmVhY2goUy5wcm94eShmdW5jdGlvbihlLHQpe2lmKFModCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApPT09aSlyZXR1cm4gUyh0KS5mb2N1cygpLCEocz0hMCl9LHRoaXMpKSxzKXJldHVybjtpZih0LnNsaWNlKDAscisxKS5lYWNoKFMucHJveHkoZnVuY3Rpb24oZSx0KXtpZihTKHQpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKT09PWkpcmV0dXJuIFModCkuZm9jdXMoKSwhKHM9ITApfSx0aGlzKSkscylyZXR1cm59fSx0aGlzKSkub24oXCJpbml0LmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzO3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz1lLmRvdHMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzPWUuc3RyaXBlcyx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zPWUuaWNvbnMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz1lLmVsbGlwc2lzLHRoaXMuc2V0X3RoZW1lKGUubmFtZXx8XCJkZWZhdWx0XCIsZS51cmwpLHRoaXMuc2V0X3RoZW1lX3ZhcmlhbnQoZS52YXJpYW50KX0sdGhpcykpLm9uKFwibG9hZGluZy5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKCl7dGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM/XCJzaG93X2RvdHNcIjpcImhpZGVfZG90c1wiXSgpLHRoaXNbdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz9cInNob3dfaWNvbnNcIjpcImhpZGVfaWNvbnNcIl0oKSx0aGlzW3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz9cInNob3dfc3RyaXBlc1wiOlwiaGlkZV9zdHJpcGVzXCJdKCksdGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzP1wic2hvd19lbGxpcHNpc1wiOlwiaGlkZV9lbGxpcHNpc1wiXSgpfSx0aGlzKSkub24oXCJibHVyLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixTLnByb3h5KGZ1bmN0aW9uKGUpe3RoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwsUyhlLmN1cnJlbnRUYXJnZXQpLmZpbHRlcihcIi5qc3RyZWUtaG92ZXJlZFwiKS5tb3VzZWxlYXZlKCksdGhpcy5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiLFwiMFwiKX0sdGhpcykpLm9uKFwiZm9jdXMuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLFMucHJveHkoZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRfbm9kZShlLmN1cnJlbnRUYXJnZXQpO3QmJnQuaWQmJih0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD10LmlkKSx0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtaG92ZXJlZFwiKS5ub3QoZS5jdXJyZW50VGFyZ2V0KS5tb3VzZWxlYXZlKCksUyhlLmN1cnJlbnRUYXJnZXQpLm1vdXNlZW50ZXIoKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKX0sdGhpcykpLm9uKFwiZm9jdXMuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbigpe2lmKDUwMDwrbmV3IERhdGUtdCYmIXRoaXMuX2RhdGEuY29yZS5mb2N1c2VkJiZ0aGlzLnNldHRpbmdzLmNvcmUucmVzdG9yZV9mb2N1cyl7dD0wO3ZhciBlPXRoaXMuZ2V0X25vZGUodGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksITApO2UmJmUuZmluZChcIj4gLmpzdHJlZS1hbmNob3JcIikuZm9jdXMoKX19LHRoaXMpKS5vbihcIm1vdXNlZW50ZXIuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLFMucHJveHkoZnVuY3Rpb24oZSl7dGhpcy5ob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCl9LHRoaXMpKS5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLFMucHJveHkoZnVuY3Rpb24oZSl7dGhpcy5kZWhvdmVyX25vZGUoZS5jdXJyZW50VGFyZ2V0KX0sdGhpcykpfSx1bmJpbmQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub2ZmKFwiLmpzdHJlZVwiKSxTKGspLm9mZihcIi5qc3RyZWUtXCIrdGhpcy5faWQpfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pLCh0Lmluc3RhbmNlPXRoaXMpLmVsZW1lbnQudHJpZ2dlckhhbmRsZXIoZS5yZXBsYWNlKFwiLmpzdHJlZVwiLFwiXCIpK1wiLmpzdHJlZVwiLHQpfSxnZXRfY29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudH0sZ2V0X2NvbnRhaW5lcl91bDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCl9LGdldF9zdHJpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zZXR0aW5ncy5jb3JlLnN0cmluZ3M7cmV0dXJuIFMuaXNGdW5jdGlvbih0KT90LmNhbGwodGhpcyxlKTp0JiZ0W2VdP3RbZV06ZX0sX2ZpcnN0Q2hpbGQ6ZnVuY3Rpb24oZSl7ZT1lP2UuZmlyc3RDaGlsZDpudWxsO3doaWxlKG51bGwhPT1lJiYxIT09ZS5ub2RlVHlwZSllPWUubmV4dFNpYmxpbmc7cmV0dXJuIGV9LF9uZXh0U2libGluZzpmdW5jdGlvbihlKXtlPWU/ZS5uZXh0U2libGluZzpudWxsO3doaWxlKG51bGwhPT1lJiYxIT09ZS5ub2RlVHlwZSllPWUubmV4dFNpYmxpbmc7cmV0dXJuIGV9LF9wcmV2aW91c1NpYmxpbmc6ZnVuY3Rpb24oZSl7ZT1lP2UucHJldmlvdXNTaWJsaW5nOm51bGw7d2hpbGUobnVsbCE9PWUmJjEhPT1lLm5vZGVUeXBlKWU9ZS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGV9LGdldF9ub2RlOmZ1bmN0aW9uKGUsdCl7dmFyIGk7ZSYmZS5pZCYmKGU9ZS5pZCksZSBpbnN0YW5jZW9mIFMmJmUubGVuZ3RoJiZlWzBdLmlkJiYoZT1lWzBdLmlkKTt0cnl7aWYodGhpcy5fbW9kZWwuZGF0YVtlXSllPXRoaXMuX21vZGVsLmRhdGFbZV07ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmdGhpcy5fbW9kZWwuZGF0YVtlLnJlcGxhY2UoL14jLyxcIlwiKV0pZT10aGlzLl9tb2RlbC5kYXRhW2UucmVwbGFjZSgvXiMvLFwiXCIpXTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoaT1TKFwiI1wiK2UucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCkpLmxlbmd0aCYmdGhpcy5fbW9kZWwuZGF0YVtpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXSllPXRoaXMuX21vZGVsLmRhdGFbaS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmF0dHIoXCJpZFwiKV07ZWxzZSBpZigoaT10aGlzLmVsZW1lbnQuZmluZChlKSkubGVuZ3RoJiZ0aGlzLl9tb2RlbC5kYXRhW2kuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5hdHRyKFwiaWRcIildKWU9dGhpcy5fbW9kZWwuZGF0YVtpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXTtlbHNle2lmKCEoaT10aGlzLmVsZW1lbnQuZmluZChlKSkubGVuZ3RofHwhaS5oYXNDbGFzcyhcImpzdHJlZVwiKSlyZXR1cm4hMTtlPXRoaXMuX21vZGVsLmRhdGFbUy5qc3RyZWUucm9vdF19cmV0dXJuIHQmJihlPWUuaWQ9PT1TLmpzdHJlZS5yb290P3RoaXMuZWxlbWVudDpTKFwiI1wiK2UuaWQucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCkpLGV9Y2F0Y2goZSl7cmV0dXJuITF9fSxnZXRfcGF0aDpmdW5jdGlvbihlLHQsaSl7aWYoIShlPWUucGFyZW50cz9lOnRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdHx8IWUucGFyZW50cylyZXR1cm4hMTt2YXIgcixzLGE9W107Zm9yKGEucHVzaChpP2UuaWQ6ZS50ZXh0KSxyPTAscz1lLnBhcmVudHMubGVuZ3RoO3I8cztyKyspYS5wdXNoKGk/ZS5wYXJlbnRzW3JdOnRoaXMuZ2V0X3RleHQoZS5wYXJlbnRzW3JdKSk7cmV0dXJuIGE9YS5yZXZlcnNlKCkuc2xpY2UoMSksdD9hLmpvaW4odCk6YX0sZ2V0X25leHRfZG9tOmZ1bmN0aW9uKGUsdCl7dmFyIGk7aWYoKGU9dGhpcy5nZXRfbm9kZShlLCEwKSlbMF09PT10aGlzLmVsZW1lbnRbMF0pe2k9dGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KWk9dGhpcy5fbmV4dFNpYmxpbmcoaSk7cmV0dXJuISFpJiZTKGkpfWlmKCFlfHwhZS5sZW5ndGgpcmV0dXJuITE7aWYodCl7aT1lWzBdO2Rve2k9dGhpcy5fbmV4dFNpYmxpbmcoaSl9d2hpbGUoaSYmMD09PWkub2Zmc2V0SGVpZ2h0KTtyZXR1cm4hIWkmJlMoaSl9aWYoZS5oYXNDbGFzcyhcImpzdHJlZS1vcGVuXCIpKXtpPXRoaXMuX2ZpcnN0Q2hpbGQoZS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIilbMF0pO3doaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodClpPXRoaXMuX25leHRTaWJsaW5nKGkpO2lmKG51bGwhPT1pKXJldHVybiBTKGkpfWk9ZVswXTtkb3tpPXRoaXMuX25leHRTaWJsaW5nKGkpfXdoaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodCk7cmV0dXJuIG51bGwhPT1pP1MoaSk6ZS5wYXJlbnRzVW50aWwoXCIuanN0cmVlXCIsXCIuanN0cmVlLW5vZGVcIikubmV4dEFsbChcIi5qc3RyZWUtbm9kZTp2aXNpYmxlXCIpLmZpcnN0KCl9LGdldF9wcmV2X2RvbTpmdW5jdGlvbihlLHQpe3ZhciBpO2lmKChlPXRoaXMuZ2V0X25vZGUoZSwhMCkpWzBdPT09dGhpcy5lbGVtZW50WzBdKXtpPXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmxhc3RDaGlsZDt3aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpaT10aGlzLl9wcmV2aW91c1NpYmxpbmcoaSk7cmV0dXJuISFpJiZTKGkpfWlmKCFlfHwhZS5sZW5ndGgpcmV0dXJuITE7aWYodCl7aT1lWzBdO2Rve2k9dGhpcy5fcHJldmlvdXNTaWJsaW5nKGkpfXdoaWxlKGkmJjA9PT1pLm9mZnNldEhlaWdodCk7cmV0dXJuISFpJiZTKGkpfWk9ZVswXTtkb3tpPXRoaXMuX3ByZXZpb3VzU2libGluZyhpKX13aGlsZShpJiYwPT09aS5vZmZzZXRIZWlnaHQpO2lmKG51bGw9PT1pKXJldHVybiEoIShpPWVbMF0ucGFyZW50Tm9kZS5wYXJlbnROb2RlKXx8IWkuY2xhc3NOYW1lfHwtMT09PWkuY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtbm9kZVwiKSkmJlMoaSk7ZT1TKGkpO3doaWxlKGUuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSllPWUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCkuY2hpbGRyZW4oXCIuanN0cmVlLW5vZGU6dmlzaWJsZTpsYXN0XCIpO3JldHVybiBlfSxnZXRfcGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdCkmJmUucGFyZW50fSxnZXRfY2hpbGRyZW5fZG9tOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSwhMCkpWzBdPT09dGhpcy5lbGVtZW50WzBdP3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpOiEoIWV8fCFlLmxlbmd0aCkmJmUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpfSxpc19wYXJlbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dGhpcy5nZXRfbm9kZShlKSkmJighMT09PWUuc3RhdGUubG9hZGVkfHwwPGUuY2hpbGRyZW4ubGVuZ3RoKX0saXNfbG9hZGVkOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLnN0YXRlLmxvYWRlZH0saXNfbG9hZGluZzpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZSYmZS5zdGF0ZS5sb2FkaW5nfSxpc19vcGVuOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZlLnN0YXRlLm9wZW5lZH0saXNfY2xvc2VkOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuZ2V0X25vZGUoZSkpJiZ0aGlzLmlzX3BhcmVudChlKSYmIWUuc3RhdGUub3BlbmVkfSxpc19sZWFmOmZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLmlzX3BhcmVudChlKX0sbG9hZF9ub2RlOmZ1bmN0aW9uKG4sbyl7dmFyIGUsdCxpLHIscztpZihTLmlzQXJyYXkobikpcmV0dXJuIHRoaXMuX2xvYWRfbm9kZXMobi5zbGljZSgpLG8pLCEwO2lmKCEobj10aGlzLmdldF9ub2RlKG4pKSlyZXR1cm4gbyYmby5jYWxsKHRoaXMsbiwhMSksITE7aWYobi5zdGF0ZS5sb2FkZWQpe2ZvcihuLnN0YXRlLmxvYWRlZD0hMSxpPTAscj1uLnBhcmVudHMubGVuZ3RoO2k8cjtpKyspdGhpcy5fbW9kZWwuZGF0YVtuLnBhcmVudHNbaV1dLmNoaWxkcmVuX2Q9Uy52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX21vZGVsLmRhdGFbbi5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kLGZ1bmN0aW9uKGUpe3JldHVybi0xPT09Uy5pbkFycmF5KGUsbi5jaGlsZHJlbl9kKX0pO2ZvcihlPTAsdD1uLmNoaWxkcmVuX2QubGVuZ3RoO2U8dDtlKyspdGhpcy5fbW9kZWwuZGF0YVtuLmNoaWxkcmVuX2RbZV1dLnN0YXRlLnNlbGVjdGVkJiYocz0hMCksZGVsZXRlIHRoaXMuX21vZGVsLmRhdGFbbi5jaGlsZHJlbl9kW2VdXTtzJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPVMudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1TLmluQXJyYXkoZSxuLmNoaWxkcmVuX2QpfSkpLG4uY2hpbGRyZW49W10sbi5jaGlsZHJlbl9kPVtdLHMmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwibG9hZF9ub2RlXCIsbm9kZTpuLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pfXJldHVybiBuLnN0YXRlLmZhaWxlZD0hMSxuLnN0YXRlLmxvYWRpbmc9ITAsdGhpcy5nZXRfbm9kZShuLCEwKS5hZGRDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMCksdGhpcy5fbG9hZF9ub2RlKG4sUy5wcm94eShmdW5jdGlvbihlKXsobj10aGlzLl9tb2RlbC5kYXRhW24uaWRdKS5zdGF0ZS5sb2FkaW5nPSExLG4uc3RhdGUubG9hZGVkPWUsbi5zdGF0ZS5mYWlsZWQ9IW4uc3RhdGUubG9hZGVkO3ZhciB0PXRoaXMuZ2V0X25vZGUobiwhMCksaT0wLHI9MCxzPXRoaXMuX21vZGVsLmRhdGEsYT0hMTtmb3IoaT0wLHI9bi5jaGlsZHJlbi5sZW5ndGg7aTxyO2krKylpZihzW24uY2hpbGRyZW5baV1dJiYhc1tuLmNoaWxkcmVuW2ldXS5zdGF0ZS5oaWRkZW4pe2E9ITA7YnJlYWt9bi5zdGF0ZS5sb2FkZWQmJnQmJnQubGVuZ3RoJiYodC5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbG9zZWQganN0cmVlLW9wZW4ganN0cmVlLWxlYWZcIiksYT9cIiNcIiE9PW4uaWQmJnQuYWRkQ2xhc3Mobi5zdGF0ZS5vcGVuZWQ/XCJqc3RyZWUtb3BlblwiOlwianN0cmVlLWNsb3NlZFwiKTp0LmFkZENsYXNzKFwianN0cmVlLWxlYWZcIikpLHQucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITEpLHRoaXMudHJpZ2dlcihcImxvYWRfbm9kZVwiLHtub2RlOm4sc3RhdHVzOmV9KSxvJiZvLmNhbGwodGhpcyxuLGUpfSx0aGlzKSksITB9LF9sb2FkX25vZGVzOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzPSEwLGE9ZnVuY3Rpb24oKXt0aGlzLl9sb2FkX25vZGVzKGUsdCwhMCl9LG49dGhpcy5fbW9kZWwuZGF0YSxvLGQsYz1bXTtmb3Iobz0wLGQ9ZS5sZW5ndGg7bzxkO28rKyluW2Vbb11dJiYoIW5bZVtvXV0uc3RhdGUubG9hZGVkJiYhbltlW29dXS5zdGF0ZS5mYWlsZWR8fCFpJiZyKSYmKHRoaXMuaXNfbG9hZGluZyhlW29dKXx8dGhpcy5sb2FkX25vZGUoZVtvXSxhKSxzPSExKTtpZihzKXtmb3Iobz0wLGQ9ZS5sZW5ndGg7bzxkO28rKyluW2Vbb11dJiZuW2Vbb11dLnN0YXRlLmxvYWRlZCYmYy5wdXNoKGVbb10pO3QmJiF0LmRvbmUmJih0LmNhbGwodGhpcyxjKSx0LmRvbmU9ITApfX0sbG9hZF9hbGw6ZnVuY3Rpb24oZSx0KXtpZihlfHwoZT1TLmpzdHJlZS5yb290KSwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7dmFyIGk9W10scj10aGlzLl9tb2RlbC5kYXRhLHM9cltlLmlkXS5jaGlsZHJlbl9kLGEsbjtmb3IoZS5zdGF0ZSYmIWUuc3RhdGUubG9hZGVkJiZpLnB1c2goZS5pZCksYT0wLG49cy5sZW5ndGg7YTxuO2ErKylyW3NbYV1dJiZyW3NbYV1dLnN0YXRlJiYhcltzW2FdXS5zdGF0ZS5sb2FkZWQmJmkucHVzaChzW2FdKTtpLmxlbmd0aD90aGlzLl9sb2FkX25vZGVzKGksZnVuY3Rpb24oKXt0aGlzLmxvYWRfYWxsKGUsdCl9KToodCYmdC5jYWxsKHRoaXMsZSksdGhpcy50cmlnZ2VyKFwibG9hZF9hbGxcIix7bm9kZTplfSkpfSxfbG9hZF9ub2RlOmZ1bmN0aW9uKHMsYSl7dmFyIGU9dGhpcy5zZXR0aW5ncy5jb3JlLmRhdGEsdCxuPWZ1bmN0aW9uIGUoKXtyZXR1cm4gMyE9PXRoaXMubm9kZVR5cGUmJjghPT10aGlzLm5vZGVUeXBlfTtyZXR1cm4gZT9TLmlzRnVuY3Rpb24oZSk/ZS5jYWxsKHRoaXMscyxTLnByb3h5KGZ1bmN0aW9uKGUpeyExPT09ZT9hLmNhbGwodGhpcywhMSk6dGhpc1tcInN0cmluZ1wiPT10eXBlb2YgZT9cIl9hcHBlbmRfaHRtbF9kYXRhXCI6XCJfYXBwZW5kX2pzb25fZGF0YVwiXShzLFwic3RyaW5nXCI9PXR5cGVvZiBlP1MoUy5wYXJzZUhUTUwoZSkpLmZpbHRlcihuKTplLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSl9LHRoaXMpKTpcIm9iamVjdFwiPT10eXBlb2YgZT9lLnVybD8oZT1TLmV4dGVuZCghMCx7fSxlKSxTLmlzRnVuY3Rpb24oZS51cmwpJiYoZS51cmw9ZS51cmwuY2FsbCh0aGlzLHMpKSxTLmlzRnVuY3Rpb24oZS5kYXRhKSYmKGUuZGF0YT1lLmRhdGEuY2FsbCh0aGlzLHMpKSxTLmFqYXgoZSkuZG9uZShTLnByb3h5KGZ1bmN0aW9uKGUsdCxpKXt2YXIgcj1pLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO3JldHVybiByJiYtMSE9PXIuaW5kZXhPZihcImpzb25cIil8fFwib2JqZWN0XCI9PXR5cGVvZiBlP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEocyxlLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6ciYmLTEhPT1yLmluZGV4T2YoXCJodG1sXCIpfHxcInN0cmluZ1wiPT10eXBlb2YgZT90aGlzLl9hcHBlbmRfaHRtbF9kYXRhKHMsUyhTLnBhcnNlSFRNTChlKSkuZmlsdGVyKG4pLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImFqYXhcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA0XCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgbm9kZVwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOnMuaWQseGhyOml9KX0sdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksYS5jYWxsKHRoaXMsITEpKX0sdGhpcykpLmZhaWwoUy5wcm94eShmdW5jdGlvbihlKXt0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJhamF4XCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNFwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpzLmlkLHhocjplfSl9LGEuY2FsbCh0aGlzLCExKSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKX0sdGhpcykpKToodD1TLmlzQXJyYXkoZSk/Uy5leHRlbmQoITAsW10sZSk6Uy5pc1BsYWluT2JqZWN0KGUpP1MuZXh0ZW5kKCEwLHt9LGUpOmUscy5pZD09PVMuanN0cmVlLnJvb3Q/dGhpcy5fYXBwZW5kX2pzb25fZGF0YShzLHQsZnVuY3Rpb24oZSl7YS5jYWxsKHRoaXMsZSl9KToodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwibm9kYXRhXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNVwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpzLmlkfSl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLGEuY2FsbCh0aGlzLCExKSkpOlwic3RyaW5nXCI9PXR5cGVvZiBlP3MuaWQ9PT1TLmpzdHJlZS5yb290P3RoaXMuX2FwcGVuZF9odG1sX2RhdGEocyxTKFMucGFyc2VIVE1MKGUpKS5maWx0ZXIobiksZnVuY3Rpb24oZSl7YS5jYWxsKHRoaXMsZSl9KToodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwibm9kYXRhXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNlwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpzLmlkfSl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLGEuY2FsbCh0aGlzLCExKSk6YS5jYWxsKHRoaXMsITEpOnMuaWQ9PT1TLmpzdHJlZS5yb290P3RoaXMuX2FwcGVuZF9odG1sX2RhdGEocyx0aGlzLl9kYXRhLmNvcmUub3JpZ2luYWxfY29udGFpbmVyX2h0bWwuY2xvbmUoITApLGZ1bmN0aW9uKGUpe2EuY2FsbCh0aGlzLGUpfSk6YS5jYWxsKHRoaXMsITEpfSxfbm9kZV9jaGFuZ2VkOmZ1bmN0aW9uKGUpeyhlPXRoaXMuZ2V0X25vZGUoZSkpJiYtMT09PVMuaW5BcnJheShlLmlkLHRoaXMuX21vZGVsLmNoYW5nZWQpJiZ0aGlzLl9tb2RlbC5jaGFuZ2VkLnB1c2goZS5pZCl9LF9hcHBlbmRfaHRtbF9kYXRhOmZ1bmN0aW9uKGUsdCxpKXsoZT10aGlzLmdldF9ub2RlKGUpKS5jaGlsZHJlbj1bXSxlLmNoaWxkcmVuX2Q9W107dmFyIHI9dC5pcyhcInVsXCIpP3QuY2hpbGRyZW4oKTp0LHM9ZS5pZCxhPVtdLG49W10sbz10aGlzLl9tb2RlbC5kYXRhLGQ9b1tzXSxjPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGgsbCxoLF87Zm9yKHIuZWFjaChTLnByb3h5KGZ1bmN0aW9uKGUsdCl7KGw9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKFModCkscyxkLnBhcmVudHMuY29uY2F0KCkpKSYmKGEucHVzaChsKSxuLnB1c2gobCksb1tsXS5jaGlsZHJlbl9kLmxlbmd0aCYmKG49bi5jb25jYXQob1tsXS5jaGlsZHJlbl9kKSkpfSx0aGlzKSksZC5jaGlsZHJlbj1hLGQuY2hpbGRyZW5fZD1uLGg9MCxfPWQucGFyZW50cy5sZW5ndGg7aDxfO2grKylvW2QucGFyZW50c1toXV0uY2hpbGRyZW5fZD1vW2QucGFyZW50c1toXV0uY2hpbGRyZW5fZC5jb25jYXQobik7dGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6bixwYXJlbnQ6c30pLHMhPT1TLmpzdHJlZS5yb290Pyh0aGlzLl9ub2RlX2NoYW5nZWQocyksdGhpcy5yZWRyYXcoKSk6KHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1pbml0aWFsLW5vZGVcIikucmVtb3ZlKCksdGhpcy5yZWRyYXcoITApKSx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoIT09YyYmdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJtb2RlbFwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pLGkuY2FsbCh0aGlzLCEwKX0sX2FwcGVuZF9qc29uX2RhdGE6ZnVuY3Rpb24oZSx0LGQsaSl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7KGU9dGhpcy5nZXRfbm9kZShlKSkuY2hpbGRyZW49W10sZS5jaGlsZHJlbl9kPVtdLHQuZCYmXCJzdHJpbmdcIj09dHlwZW9mKHQ9dC5kKSYmKHQ9SlNPTi5wYXJzZSh0KSksUy5pc0FycmF5KHQpfHwodD1bdF0pO3ZhciByPW51bGwscz17ZGY6dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxkYXQ6dCxwYXI6ZS5pZCxtOnRoaXMuX21vZGVsLmRhdGEsdF9pZDp0aGlzLl9pZCx0X2NudDp0aGlzLl9jbnQsc2VsOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0saj10aGlzLGE9ZnVuY3Rpb24oZSxjKXtlLmRhdGEmJihlPWUuZGF0YSk7dmFyIHQ9ZS5kYXQsaT1lLnBhcixyPVtdLHM9W10sbD1bXSxoPWUuZGYsXz1lLnRfaWQsdT1lLnRfY250LGc9ZS5tLGE9Z1tpXSxuPWUuc2VsLG8sZCxmLHAsbT1mdW5jdGlvbihlLHQsaSl7aT1pP2kuY29uY2F0KCk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByPWUuaWQudG9TdHJpbmcoKSxzLGEsbixvLGQ9e2lkOnIsdGV4dDplLnRleHR8fFwiXCIsaWNvbjplLmljb249PT1jfHxlLmljb24scGFyZW50OnQscGFyZW50czppLGNoaWxkcmVuOmUuY2hpbGRyZW58fFtdLGNoaWxkcmVuX2Q6ZS5jaGlsZHJlbl9kfHxbXSxkYXRhOmUuZGF0YSxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX07Zm9yKHMgaW4gaCloLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1oW3NdKTtpZihlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGQuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGQuaWNvbiE9PWMmJm51bGwhPT1kLmljb24mJlwiXCIhPT1kLmljb258fChkLmljb249ITApLGUmJmUuZGF0YSYmKGQuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKHMgaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1lLmRhdGEuanN0cmVlW3NdKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IocyBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkocykmJihkLnN0YXRlW3NdPWUuc3RhdGVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKHMgaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGQubGlfYXR0cltzXT1lLmxpX2F0dHJbc10pO2lmKGQubGlfYXR0ci5pZHx8KGQubGlfYXR0ci5pZD1yKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKHMgaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkocykmJihkLmFfYXR0cltzXT1lLmFfYXR0cltzXSk7Zm9yKGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGQuc3RhdGUubG9hZGVkPSExLGQuY2hpbGRyZW49W10sZC5jaGlsZHJlbl9kPVtdKSxzPTAsYT0oZ1tkLmlkXT1kKS5jaGlsZHJlbi5sZW5ndGg7czxhO3MrKyluPW0oZ1tkLmNoaWxkcmVuW3NdXSxkLmlkLGkpLG89Z1tuXSxkLmNoaWxkcmVuX2QucHVzaChuKSxvLmNoaWxkcmVuX2QubGVuZ3RoJiYoZC5jaGlsZHJlbl9kPWQuY2hpbGRyZW5fZC5jb25jYXQoby5jaGlsZHJlbl9kKSk7cmV0dXJuIGRlbGV0ZSBlLmRhdGEsZGVsZXRlIGUuY2hpbGRyZW4sZ1tkLmlkXS5vcmlnaW5hbD1lLGQuc3RhdGUuc2VsZWN0ZWQmJmwucHVzaChkLmlkKSxkLmlkfSx2PWZ1bmN0aW9uKGUsdCxpKXtpPWk/aS5jb25jYXQoKTpbXSx0JiZpLnVuc2hpZnQodCk7dmFyIHI9ITEscyxhLG4sbyxkO2Rve3I9XCJqXCIrXytcIl9cIisgKyt1fXdoaWxlKGdbcl0pO2ZvcihzIGluIGQ9e2lkOiExLHRleHQ6XCJzdHJpbmdcIj09dHlwZW9mIGU/ZTpcIlwiLGljb246XCJvYmplY3RcIiE9dHlwZW9mIGV8fGUuaWNvbj09PWN8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxkYXRhOm51bGwsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9LGgpaC5oYXNPd25Qcm9wZXJ0eShzKSYmKGQuc3RhdGVbc109aFtzXSk7aWYoZSYmZS5pZCYmKGQuaWQ9ZS5pZC50b1N0cmluZygpKSxlJiZlLnRleHQmJihkLnRleHQ9ZS50ZXh0KSxlJiZlLmRhdGEmJmUuZGF0YS5qc3RyZWUmJmUuZGF0YS5qc3RyZWUuaWNvbiYmKGQuaWNvbj1lLmRhdGEuanN0cmVlLmljb24pLGQuaWNvbiE9PWMmJm51bGwhPT1kLmljb24mJlwiXCIhPT1kLmljb258fChkLmljb249ITApLGUmJmUuZGF0YSYmKGQuZGF0YT1lLmRhdGEsZS5kYXRhLmpzdHJlZSkpZm9yKHMgaW4gZS5kYXRhLmpzdHJlZSllLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KHMpJiYoZC5zdGF0ZVtzXT1lLmRhdGEuanN0cmVlW3NdKTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5zdGF0ZSlmb3IocyBpbiBlLnN0YXRlKWUuc3RhdGUuaGFzT3duUHJvcGVydHkocykmJihkLnN0YXRlW3NdPWUuc3RhdGVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmxpX2F0dHIpZm9yKHMgaW4gZS5saV9hdHRyKWUubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShzKSYmKGQubGlfYXR0cltzXT1lLmxpX2F0dHJbc10pO2lmKGQubGlfYXR0ci5pZCYmIWQuaWQmJihkLmlkPWQubGlfYXR0ci5pZC50b1N0cmluZygpKSxkLmlkfHwoZC5pZD1yKSxkLmxpX2F0dHIuaWR8fChkLmxpX2F0dHIuaWQ9ZC5pZCksZSYmXCJvYmplY3RcIj09dHlwZW9mIGUuYV9hdHRyKWZvcihzIGluIGUuYV9hdHRyKWUuYV9hdHRyLmhhc093blByb3BlcnR5KHMpJiYoZC5hX2F0dHJbc109ZS5hX2F0dHJbc10pO2lmKGUmJmUuY2hpbGRyZW4mJmUuY2hpbGRyZW4ubGVuZ3RoKXtmb3Iocz0wLGE9ZS5jaGlsZHJlbi5sZW5ndGg7czxhO3MrKyluPXYoZS5jaGlsZHJlbltzXSxkLmlkLGkpLG89Z1tuXSxkLmNoaWxkcmVuLnB1c2gobiksby5jaGlsZHJlbl9kLmxlbmd0aCYmKGQuY2hpbGRyZW5fZD1kLmNoaWxkcmVuX2QuY29uY2F0KG8uY2hpbGRyZW5fZCkpO2QuY2hpbGRyZW5fZD1kLmNoaWxkcmVuX2QuY29uY2F0KGQuY2hpbGRyZW4pfXJldHVybiBlJiZlLmNoaWxkcmVuJiYhMD09PWUuY2hpbGRyZW4mJihkLnN0YXRlLmxvYWRlZD0hMSxkLmNoaWxkcmVuPVtdLGQuY2hpbGRyZW5fZD1bXSksZGVsZXRlIGUuZGF0YSxkZWxldGUgZS5jaGlsZHJlbixkLm9yaWdpbmFsPWUsKGdbZC5pZF09ZCkuc3RhdGUuc2VsZWN0ZWQmJmwucHVzaChkLmlkKSxkLmlkfTtpZih0Lmxlbmd0aCYmdFswXS5pZCE9PWMmJnRbMF0ucGFyZW50IT09Yyl7Zm9yKGQ9MCxmPXQubGVuZ3RoO2Q8ZjtkKyspdFtkXS5jaGlsZHJlbnx8KHRbZF0uY2hpbGRyZW49W10pLHRbZF0uc3RhdGV8fCh0W2RdLnN0YXRlPXt9KSxnW3RbZF0uaWQudG9TdHJpbmcoKV09dFtkXTtmb3IoZD0wLGY9dC5sZW5ndGg7ZDxmO2QrKylnW3RbZF0ucGFyZW50LnRvU3RyaW5nKCldPyhnW3RbZF0ucGFyZW50LnRvU3RyaW5nKCldLmNoaWxkcmVuLnB1c2godFtkXS5pZC50b1N0cmluZygpKSxhLmNoaWxkcmVuX2QucHVzaCh0W2RdLmlkLnRvU3RyaW5nKCkpKTp2b2lkIDAhPT1qJiYoai5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwicGFyc2VcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA3XCIscmVhc29uOlwiTm9kZSB3aXRoIGludmFsaWQgcGFyZW50XCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7aWQ6dFtkXS5pZC50b1N0cmluZygpLHBhcmVudDp0W2RdLnBhcmVudC50b1N0cmluZygpfSl9LGouc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKGosai5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpKTtmb3IoZD0wLGY9YS5jaGlsZHJlbi5sZW5ndGg7ZDxmO2QrKylvPW0oZ1thLmNoaWxkcmVuW2RdXSxpLGEucGFyZW50cy5jb25jYXQoKSkscy5wdXNoKG8pLGdbb10uY2hpbGRyZW5fZC5sZW5ndGgmJihzPXMuY29uY2F0KGdbb10uY2hpbGRyZW5fZCkpO2ZvcihkPTAsZj1hLnBhcmVudHMubGVuZ3RoO2Q8ZjtkKyspZ1thLnBhcmVudHNbZF1dLmNoaWxkcmVuX2Q9Z1thLnBhcmVudHNbZF1dLmNoaWxkcmVuX2QuY29uY2F0KHMpO3A9e2NudDp1LG1vZDpnLHNlbDpuLHBhcjppLGRwYzpzLGFkZDpsfX1lbHNle2ZvcihkPTAsZj10Lmxlbmd0aDtkPGY7ZCsrKShvPXYodFtkXSxpLGEucGFyZW50cy5jb25jYXQoKSkpJiYoci5wdXNoKG8pLHMucHVzaChvKSxnW29dLmNoaWxkcmVuX2QubGVuZ3RoJiYocz1zLmNvbmNhdChnW29dLmNoaWxkcmVuX2QpKSk7Zm9yKGEuY2hpbGRyZW49cixhLmNoaWxkcmVuX2Q9cyxkPTAsZj1hLnBhcmVudHMubGVuZ3RoO2Q8ZjtkKyspZ1thLnBhcmVudHNbZF1dLmNoaWxkcmVuX2Q9Z1thLnBhcmVudHNbZF1dLmNoaWxkcmVuX2QuY29uY2F0KHMpO3A9e2NudDp1LG1vZDpnLHNlbDpuLHBhcjppLGRwYzpzLGFkZDpsfX1pZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ2b2lkIDAhPT13aW5kb3cuZG9jdW1lbnQpcmV0dXJuIHA7cG9zdE1lc3NhZ2UocCl9LG49ZnVuY3Rpb24oZSx0KXtpZihudWxsIT09dGhpcy5lbGVtZW50KXt0aGlzLl9jbnQ9ZS5jbnQ7dmFyIGkscj10aGlzLl9tb2RlbC5kYXRhO2ZvcihpIGluIHIpci5oYXNPd25Qcm9wZXJ0eShpKSYmcltpXS5zdGF0ZSYmcltpXS5zdGF0ZS5sb2FkaW5nJiZlLm1vZFtpXSYmKGUubW9kW2ldLnN0YXRlLmxvYWRpbmc9ITApO2lmKHRoaXMuX21vZGVsLmRhdGE9ZS5tb2QsdCl7dmFyIHMsYT1lLmFkZCxuPWUuc2VsLG89dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnNsaWNlKCk7aWYocj10aGlzLl9tb2RlbC5kYXRhLG4ubGVuZ3RoIT09by5sZW5ndGh8fFMudmFrYXRhLmFycmF5X3VuaXF1ZShuLmNvbmNhdChvKSkubGVuZ3RoIT09bi5sZW5ndGgpe2ZvcihpPTAscz1uLmxlbmd0aDtpPHM7aSsrKS0xPT09Uy5pbkFycmF5KG5baV0sYSkmJi0xPT09Uy5pbkFycmF5KG5baV0sbykmJihyW25baV1dLnN0YXRlLnNlbGVjdGVkPSExKTtmb3IoaT0wLHM9by5sZW5ndGg7aTxzO2krKyktMT09PVMuaW5BcnJheShvW2ldLG4pJiYocltvW2ldXS5zdGF0ZS5zZWxlY3RlZD0hMCl9fWUuYWRkLmxlbmd0aCYmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KGUuYWRkKSksdGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6ZS5kcGMscGFyZW50OmUucGFyfSksZS5wYXIhPT1TLmpzdHJlZS5yb290Pyh0aGlzLl9ub2RlX2NoYW5nZWQoZS5wYXIpLHRoaXMucmVkcmF3KCkpOnRoaXMucmVkcmF3KCEwKSxlLmFkZC5sZW5ndGgmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwibW9kZWxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KSxkLmNhbGwodGhpcywhMCl9fTtpZih0aGlzLnNldHRpbmdzLmNvcmUud29ya2VyJiZ3aW5kb3cuQmxvYiYmd2luZG93LlVSTCYmd2luZG93Lldvcmtlcil0cnl7bnVsbD09PXRoaXMuX3dyayYmKHRoaXMuX3dyaz13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgd2luZG93LkJsb2IoW1wic2VsZi5vbm1lc3NhZ2UgPSBcIithLnRvU3RyaW5nKCldLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSkpLCF0aGlzLl9kYXRhLmNvcmUud29ya2luZ3x8aT8odGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITAsKHI9bmV3IHdpbmRvdy5Xb3JrZXIodGhpcy5fd3JrKSkub25tZXNzYWdlPVMucHJveHkoZnVuY3Rpb24oZSl7bi5jYWxsKHRoaXMsZS5kYXRhLCEwKTt0cnl7ci50ZXJtaW5hdGUoKSxyPW51bGx9Y2F0Y2goZSl7fXRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExfSx0aGlzKSxzLnBhcj9yLnBvc3RNZXNzYWdlKHMpOnRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExKTp0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnB1c2goW2UsdCxkLCEwXSl9Y2F0Y2goZSl7bi5jYWxsKHRoaXMsYShzKSwhMSksdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5sZW5ndGg/dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUuc2hpZnQoKSk6dGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITF9ZWxzZSBuLmNhbGwodGhpcyxhKHMpLCExKX19LF9wYXJzZV9tb2RlbF9mcm9tX2h0bWw6ZnVuY3Rpb24oZSx0LGkpe2k9aT9bXS5jb25jYXQoaSk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByLHMsYT10aGlzLl9tb2RlbC5kYXRhLG49e2lkOiExLHRleHQ6ITEsaWNvbjohMCxwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46W10sY2hpbGRyZW5fZDpbXSxkYXRhOm51bGwsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9LG8sZCxjO2ZvcihvIGluIHRoaXMuX21vZGVsLmRlZmF1bHRfc3RhdGUpdGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZS5oYXNPd25Qcm9wZXJ0eShvKSYmKG4uc3RhdGVbb109dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZVtvXSk7aWYoZD1TLnZha2F0YS5hdHRyaWJ1dGVzKGUsITApLFMuZWFjaChkLGZ1bmN0aW9uKGUsdCl7aWYoISh0PVMudHJpbSh0KSkubGVuZ3RoKXJldHVybiEwO24ubGlfYXR0cltlXT10LFwiaWRcIj09PWUmJihuLmlkPXQudG9TdHJpbmcoKSl9KSwoZD1lLmNoaWxkcmVuKFwiYVwiKS5maXJzdCgpKS5sZW5ndGgmJihkPVMudmFrYXRhLmF0dHJpYnV0ZXMoZCwhMCksUy5lYWNoKGQsZnVuY3Rpb24oZSx0KXsodD1TLnRyaW0odCkpLmxlbmd0aCYmKG4uYV9hdHRyW2VdPXQpfSkpLChkPWUuY2hpbGRyZW4oXCJhXCIpLmZpcnN0KCkubGVuZ3RoP2UuY2hpbGRyZW4oXCJhXCIpLmZpcnN0KCkuY2xvbmUoKTplLmNsb25lKCkpLmNoaWxkcmVuKFwiaW5zLCBpLCB1bFwiKS5yZW1vdmUoKSxkPWQuaHRtbCgpLGQ9UyhcIjxkaXYgLz5cIikuaHRtbChkKSxuLnRleHQ9dGhpcy5zZXR0aW5ncy5jb3JlLmZvcmNlX3RleHQ/ZC50ZXh0KCk6ZC5odG1sKCksZD1lLmRhdGEoKSxuLmRhdGE9ZD9TLmV4dGVuZCghMCx7fSxkKTpudWxsLG4uc3RhdGUub3BlbmVkPWUuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSxuLnN0YXRlLnNlbGVjdGVkPWUuY2hpbGRyZW4oXCJhXCIpLmhhc0NsYXNzKFwianN0cmVlLWNsaWNrZWRcIiksbi5zdGF0ZS5kaXNhYmxlZD1lLmNoaWxkcmVuKFwiYVwiKS5oYXNDbGFzcyhcImpzdHJlZS1kaXNhYmxlZFwiKSxuLmRhdGEmJm4uZGF0YS5qc3RyZWUpZm9yKG8gaW4gbi5kYXRhLmpzdHJlZSluLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KG8pJiYobi5zdGF0ZVtvXT1uLmRhdGEuanN0cmVlW29dKTsoZD1lLmNoaWxkcmVuKFwiYVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpKS5sZW5ndGgmJihuLmljb249IWQuaGFzQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKSYmZC5hdHRyKFwicmVsXCIpKSxuLnN0YXRlLmljb24hPT1FJiYobi5pY29uPW4uc3RhdGUuaWNvbiksbi5pY29uIT09RSYmbnVsbCE9PW4uaWNvbiYmXCJcIiE9PW4uaWNvbnx8KG4uaWNvbj0hMCksZD1lLmNoaWxkcmVuKFwidWxcIikuY2hpbGRyZW4oXCJsaVwiKTtkb3tjPVwialwiK3RoaXMuX2lkK1wiX1wiKyArK3RoaXMuX2NudH13aGlsZShhW2NdKTtyZXR1cm4gbi5pZD1uLmxpX2F0dHIuaWQ/bi5saV9hdHRyLmlkLnRvU3RyaW5nKCk6YyxkLmxlbmd0aD8oZC5lYWNoKFMucHJveHkoZnVuY3Rpb24oZSx0KXtyPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21faHRtbChTKHQpLG4uaWQsaSkscz10aGlzLl9tb2RlbC5kYXRhW3JdLG4uY2hpbGRyZW4ucHVzaChyKSxzLmNoaWxkcmVuX2QubGVuZ3RoJiYobi5jaGlsZHJlbl9kPW4uY2hpbGRyZW5fZC5jb25jYXQocy5jaGlsZHJlbl9kKSl9LHRoaXMpKSxuLmNoaWxkcmVuX2Q9bi5jaGlsZHJlbl9kLmNvbmNhdChuLmNoaWxkcmVuKSk6ZS5oYXNDbGFzcyhcImpzdHJlZS1jbG9zZWRcIikmJihuLnN0YXRlLmxvYWRlZD0hMSksbi5saV9hdHRyLmNsYXNzJiYobi5saV9hdHRyLmNsYXNzPW4ubGlfYXR0ci5jbGFzcy5yZXBsYWNlKFwianN0cmVlLWNsb3NlZFwiLFwiXCIpLnJlcGxhY2UoXCJqc3RyZWUtb3BlblwiLFwiXCIpKSxuLmFfYXR0ci5jbGFzcyYmKG4uYV9hdHRyLmNsYXNzPW4uYV9hdHRyLmNsYXNzLnJlcGxhY2UoXCJqc3RyZWUtY2xpY2tlZFwiLFwiXCIpLnJlcGxhY2UoXCJqc3RyZWUtZGlzYWJsZWRcIixcIlwiKSksKGFbbi5pZF09bikuc3RhdGUuc2VsZWN0ZWQmJnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5wdXNoKG4uaWQpLG4uaWR9LF9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbjpmdW5jdGlvbihlLHQsaSl7aT1pP2kuY29uY2F0KCk6W10sdCYmaS51bnNoaWZ0KHQpO3ZhciByPWUuaWQudG9TdHJpbmcoKSxzPXRoaXMuX21vZGVsLmRhdGEsYT10aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLG4sbyxkLGMsbD17aWQ6cix0ZXh0OmUudGV4dHx8XCJcIixpY29uOmUuaWNvbj09PUV8fGUuaWNvbixwYXJlbnQ6dCxwYXJlbnRzOmksY2hpbGRyZW46ZS5jaGlsZHJlbnx8W10sY2hpbGRyZW5fZDplLmNoaWxkcmVuX2R8fFtdLGRhdGE6ZS5kYXRhLHN0YXRlOnt9LGxpX2F0dHI6e2lkOiExfSxhX2F0dHI6e2hyZWY6XCIjXCJ9LG9yaWdpbmFsOiExfTtmb3IobiBpbiBhKWEuaGFzT3duUHJvcGVydHkobikmJihsLnN0YXRlW25dPWFbbl0pO2lmKGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksbC5pY29uIT09RSYmbnVsbCE9PWwuaWNvbiYmXCJcIiE9PWwuaWNvbnx8KGwuaWNvbj0hMCksZSYmZS5kYXRhJiYobC5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IobiBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkobikmJihsLnN0YXRlW25dPWUuZGF0YS5qc3RyZWVbbl0pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihuIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShuKSYmKGwuc3RhdGVbbl09ZS5zdGF0ZVtuXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IobiBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KG4pJiYobC5saV9hdHRyW25dPWUubGlfYXR0cltuXSk7aWYobC5saV9hdHRyLmlkfHwobC5saV9hdHRyLmlkPXIpLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmFfYXR0cilmb3IobiBpbiBlLmFfYXR0cillLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShuKSYmKGwuYV9hdHRyW25dPWUuYV9hdHRyW25dKTtmb3IoZSYmZS5jaGlsZHJlbiYmITA9PT1lLmNoaWxkcmVuJiYobC5zdGF0ZS5sb2FkZWQ9ITEsbC5jaGlsZHJlbj1bXSxsLmNoaWxkcmVuX2Q9W10pLG49MCxvPShzW2wuaWRdPWwpLmNoaWxkcmVuLmxlbmd0aDtuPG87bisrKWM9c1tkPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fZmxhdF9qc29uKHNbbC5jaGlsZHJlbltuXV0sbC5pZCxpKV0sbC5jaGlsZHJlbl9kLnB1c2goZCksYy5jaGlsZHJlbl9kLmxlbmd0aCYmKGwuY2hpbGRyZW5fZD1sLmNoaWxkcmVuX2QuY29uY2F0KGMuY2hpbGRyZW5fZCkpO3JldHVybiBkZWxldGUgZS5kYXRhLGRlbGV0ZSBlLmNoaWxkcmVuLHNbbC5pZF0ub3JpZ2luYWw9ZSxsLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChsLmlkKSxsLmlkfSxfcGFyc2VfbW9kZWxfZnJvbV9qc29uOmZ1bmN0aW9uKGUsdCxpKXtpPWk/aS5jb25jYXQoKTpbXSx0JiZpLnVuc2hpZnQodCk7dmFyIHI9ITEscyxhLG4sbyxkPXRoaXMuX21vZGVsLmRhdGEsYz10aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLGw7ZG97cj1cImpcIit0aGlzLl9pZCtcIl9cIisgKyt0aGlzLl9jbnR9d2hpbGUoZFtyXSk7Zm9yKHMgaW4gbD17aWQ6ITEsdGV4dDpcInN0cmluZ1wiPT10eXBlb2YgZT9lOlwiXCIsaWNvbjpcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5pY29uPT09RXx8ZS5pY29uLHBhcmVudDp0LHBhcmVudHM6aSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX0sYyljLmhhc093blByb3BlcnR5KHMpJiYobC5zdGF0ZVtzXT1jW3NdKTtpZihlJiZlLmlkJiYobC5pZD1lLmlkLnRvU3RyaW5nKCkpLGUmJmUudGV4dCYmKGwudGV4dD1lLnRleHQpLGUmJmUuZGF0YSYmZS5kYXRhLmpzdHJlZSYmZS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWUuZGF0YS5qc3RyZWUuaWNvbiksbC5pY29uIT09RSYmbnVsbCE9PWwuaWNvbiYmXCJcIiE9PWwuaWNvbnx8KGwuaWNvbj0hMCksZSYmZS5kYXRhJiYobC5kYXRhPWUuZGF0YSxlLmRhdGEuanN0cmVlKSlmb3IocyBpbiBlLmRhdGEuanN0cmVlKWUuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkocykmJihsLnN0YXRlW3NdPWUuZGF0YS5qc3RyZWVbc10pO2lmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnN0YXRlKWZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKGwuc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUubGlfYXR0cilmb3IocyBpbiBlLmxpX2F0dHIpZS5saV9hdHRyLmhhc093blByb3BlcnR5KHMpJiYobC5saV9hdHRyW3NdPWUubGlfYXR0cltzXSk7aWYobC5saV9hdHRyLmlkJiYhbC5pZCYmKGwuaWQ9bC5saV9hdHRyLmlkLnRvU3RyaW5nKCkpLGwuaWR8fChsLmlkPXIpLGwubGlfYXR0ci5pZHx8KGwubGlfYXR0ci5pZD1sLmlkKSxlJiZcIm9iamVjdFwiPT10eXBlb2YgZS5hX2F0dHIpZm9yKHMgaW4gZS5hX2F0dHIpZS5hX2F0dHIuaGFzT3duUHJvcGVydHkocykmJihsLmFfYXR0cltzXT1lLmFfYXR0cltzXSk7aWYoZSYmZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5sZW5ndGgpe2ZvcihzPTAsYT1lLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW89ZFtuPXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbihlLmNoaWxkcmVuW3NdLGwuaWQsaSldLGwuY2hpbGRyZW4ucHVzaChuKSxvLmNoaWxkcmVuX2QubGVuZ3RoJiYobC5jaGlsZHJlbl9kPWwuY2hpbGRyZW5fZC5jb25jYXQoby5jaGlsZHJlbl9kKSk7bC5jaGlsZHJlbl9kPWwuY2hpbGRyZW5fZC5jb25jYXQobC5jaGlsZHJlbil9cmV0dXJuIGUmJmUuY2hpbGRyZW4mJiEwPT09ZS5jaGlsZHJlbiYmKGwuc3RhdGUubG9hZGVkPSExLGwuY2hpbGRyZW49W10sbC5jaGlsZHJlbl9kPVtdKSxkZWxldGUgZS5kYXRhLGRlbGV0ZSBlLmNoaWxkcmVuLGwub3JpZ2luYWw9ZSwoZFtsLmlkXT1sKS5zdGF0ZS5zZWxlY3RlZCYmdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2gobC5pZCksbC5pZH0sX3JlZHJhdzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3P3RoaXMuX21vZGVsLmRhdGFbUy5qc3RyZWUucm9vdF0uY2hpbGRyZW4uY29uY2F0KFtdKTp0aGlzLl9tb2RlbC5jaGFuZ2VkLmNvbmNhdChbXSksdD1rLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSxpLHIscyxhPXRoaXMuX2RhdGEuY29yZS5mb2N1c2VkO2ZvcihyPTAscz1lLmxlbmd0aDtyPHM7cisrKShpPXRoaXMucmVkcmF3X25vZGUoZVtyXSwhMCx0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdykpJiZ0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyYmdC5hcHBlbmRDaGlsZChpKTt0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdyYmKHQuY2xhc3NOYW1lPXRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdLmNsYXNzTmFtZSx0LnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyb3VwXCIpLHRoaXMuZWxlbWVudC5lbXB0eSgpLmFwcGVuZCh0KSksbnVsbCE9PWEmJnRoaXMuc2V0dGluZ3MuY29yZS5yZXN0b3JlX2ZvY3VzJiYoKGk9dGhpcy5nZXRfbm9kZShhLCEwKSkmJmkubGVuZ3RoJiZpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIilbMF0hPT1rLmFjdGl2ZUVsZW1lbnQ/aS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZvY3VzKCk6dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9bnVsbCksdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITEsdGhpcy5fbW9kZWwuY2hhbmdlZD1bXSx0aGlzLnRyaWdnZXIoXCJyZWRyYXdcIix7bm9kZXM6ZX0pfSxyZWRyYXc6ZnVuY3Rpb24oZSl7ZSYmKHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwKSx0aGlzLl9yZWRyYXcoKX0sZHJhd19jaGlsZHJlbjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldF9ub2RlKGUpLGk9ITEscj0hMSxzPSExLGE9aztpZighdClyZXR1cm4hMTtpZih0LmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4gdGhpcy5yZWRyYXcoITApO2lmKCEoZT10aGlzLmdldF9ub2RlKGUsITApKXx8IWUubGVuZ3RoKXJldHVybiExO2lmKGUuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnJlbW92ZSgpLGU9ZVswXSx0LmNoaWxkcmVuLmxlbmd0aCYmdC5zdGF0ZS5sb2FkZWQpe2Zvcigocz1hLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSkuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JvdXBcIikscy5jbGFzc05hbWU9XCJqc3RyZWUtY2hpbGRyZW5cIixpPTAscj10LmNoaWxkcmVuLmxlbmd0aDtpPHI7aSsrKXMuYXBwZW5kQ2hpbGQodGhpcy5yZWRyYXdfbm9kZSh0LmNoaWxkcmVuW2ldLCEwLCEwKSk7ZS5hcHBlbmRDaGlsZChzKX19LHJlZHJhd19ub2RlOmZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzPXRoaXMuZ2V0X25vZGUoZSksYT0hMSxuPSExLG89ITEsZD0hMSxjPSExLGw9ITEsaD1cIlwiLF89ayx1PXRoaXMuX21vZGVsLmRhdGEsZz0hMSxmPSExLHA9bnVsbCxtPTAsdj0wLGo9ITEseT0hMTtpZighcylyZXR1cm4hMTtpZihzLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4gdGhpcy5yZWRyYXcoITApO2lmKHQ9dHx8MD09PXMuY2hpbGRyZW4ubGVuZ3RoLGU9ay5xdWVyeVNlbGVjdG9yP3RoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKFwiI1wiKygtMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2Yocy5pZFswXSk/XCJcXFxcM1wiK3MuaWRbMF0rXCIgXCIrcy5pZC5zdWJzdHIoMSkucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOnMuaWQucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpKSk6ay5nZXRFbGVtZW50QnlJZChzLmlkKSllPVMoZSksaXx8KChhPWUucGFyZW50KCkucGFyZW50KClbMF0pPT09dGhpcy5lbGVtZW50WzBdJiYoYT1udWxsKSxuPWUuaW5kZXgoKSksdHx8IXMuY2hpbGRyZW4ubGVuZ3RofHxlLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5sZW5ndGh8fCh0PSEwKSx0fHwobz1lLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKVswXSksZz1lLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIilbMF09PT1rLmFjdGl2ZUVsZW1lbnQsZS5yZW1vdmUoKTtlbHNlIGlmKHQ9ITAsIWkpe2lmKCEobnVsbD09PShhPXMucGFyZW50IT09Uy5qc3RyZWUucm9vdD9TKFwiI1wiK3MucGFyZW50LnJlcGxhY2UoUy5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpWzBdOm51bGwpfHxhJiZ1W3MucGFyZW50XS5zdGF0ZS5vcGVuZWQpKXJldHVybiExO249Uy5pbkFycmF5KHMuaWQsbnVsbD09PWE/dVtTLmpzdHJlZS5yb290XS5jaGlsZHJlbjp1W3MucGFyZW50XS5jaGlsZHJlbil9Zm9yKGQgaW4gZT10aGlzLl9kYXRhLmNvcmUubm9kZS5jbG9uZU5vZGUoITApLGg9XCJqc3RyZWUtbm9kZSBcIixzLmxpX2F0dHIpaWYocy5saV9hdHRyLmhhc093blByb3BlcnR5KGQpKXtpZihcImlkXCI9PT1kKWNvbnRpbnVlO1wiY2xhc3NcIiE9PWQ/ZS5zZXRBdHRyaWJ1dGUoZCxzLmxpX2F0dHJbZF0pOmgrPXMubGlfYXR0cltkXX1mb3Iocy5hX2F0dHIuaWR8fChzLmFfYXR0ci5pZD1zLmlkK1wiX2FuY2hvclwiKSxlLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhIXMuc3RhdGUuc2VsZWN0ZWQpLGUuc2V0QXR0cmlidXRlKFwiYXJpYS1sZXZlbFwiLHMucGFyZW50cy5sZW5ndGgpLGUuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbGxlZGJ5XCIscy5hX2F0dHIuaWQpLHMuc3RhdGUuZGlzYWJsZWQmJmUuc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSxkPTAsYz1zLmNoaWxkcmVuLmxlbmd0aDtkPGM7ZCsrKWlmKCF1W3MuY2hpbGRyZW5bZF1dLnN0YXRlLmhpZGRlbil7aj0hMDticmVha31pZihudWxsIT09cy5wYXJlbnQmJnVbcy5wYXJlbnRdJiYhcy5zdGF0ZS5oaWRkZW4mJihkPVMuaW5BcnJheShzLmlkLHVbcy5wYXJlbnRdLmNoaWxkcmVuKSx5PXMuaWQsLTEhPT1kKSlmb3IoZCsrLGM9dVtzLnBhcmVudF0uY2hpbGRyZW4ubGVuZ3RoO2Q8YztkKyspaWYodVt1W3MucGFyZW50XS5jaGlsZHJlbltkXV0uc3RhdGUuaGlkZGVufHwoeT11W3MucGFyZW50XS5jaGlsZHJlbltkXSkseSE9PXMuaWQpYnJlYWs7Zm9yKGMgaW4gcy5zdGF0ZS5oaWRkZW4mJihoKz1cIiBqc3RyZWUtaGlkZGVuXCIpLHMuc3RhdGUubG9hZGluZyYmKGgrPVwiIGpzdHJlZS1sb2FkaW5nXCIpLHMuc3RhdGUubG9hZGVkJiYhaj9oKz1cIiBqc3RyZWUtbGVhZlwiOihoKz1zLnN0YXRlLm9wZW5lZCYmcy5zdGF0ZS5sb2FkZWQ/XCIganN0cmVlLW9wZW5cIjpcIiBqc3RyZWUtY2xvc2VkXCIsZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIscy5zdGF0ZS5vcGVuZWQmJnMuc3RhdGUubG9hZGVkKSkseT09PXMuaWQmJihoKz1cIiBqc3RyZWUtbGFzdFwiKSxlLmlkPXMuaWQsZS5jbGFzc05hbWU9aCxoPShzLnN0YXRlLnNlbGVjdGVkP1wiIGpzdHJlZS1jbGlja2VkXCI6XCJcIikrKHMuc3RhdGUuZGlzYWJsZWQ/XCIganN0cmVlLWRpc2FibGVkXCI6XCJcIikscy5hX2F0dHIpaWYocy5hX2F0dHIuaGFzT3duUHJvcGVydHkoYykpe2lmKFwiaHJlZlwiPT09YyYmXCIjXCI9PT1zLmFfYXR0cltjXSljb250aW51ZTtcImNsYXNzXCIhPT1jP2UuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoYyxzLmFfYXR0cltjXSk6aCs9XCIgXCIrcy5hX2F0dHJbY119aWYoaC5sZW5ndGgmJihlLmNoaWxkTm9kZXNbMV0uY2xhc3NOYW1lPVwianN0cmVlLWFuY2hvciBcIitoKSwocy5pY29uJiYhMCE9PXMuaWNvbnx8ITE9PT1zLmljb24pJiYoITE9PT1zLmljb24/ZS5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uY2xhc3NOYW1lKz1cIiBqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiOi0xPT09cy5pY29uLmluZGV4T2YoXCIvXCIpJiYtMT09PXMuaWNvbi5pbmRleE9mKFwiLlwiKT9lLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWUrPVwiIFwiK3MuaWNvbitcIiBqc3RyZWUtdGhlbWVpY29uLWN1c3RvbVwiOihlLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U9J3VybChcIicrcy5pY29uKydcIiknLGUuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbj1cImNlbnRlciBjZW50ZXJcIixlLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5zdHlsZS5iYWNrZ3JvdW5kU2l6ZT1cImF1dG9cIixlLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWUrPVwiIGpzdHJlZS10aGVtZWljb24tY3VzdG9tXCIpKSx0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dD9lLmNoaWxkTm9kZXNbMV0uYXBwZW5kQ2hpbGQoXy5jcmVhdGVUZXh0Tm9kZShzLnRleHQpKTplLmNoaWxkTm9kZXNbMV0uaW5uZXJIVE1MKz1zLnRleHQsdCYmcy5jaGlsZHJlbi5sZW5ndGgmJihzLnN0YXRlLm9wZW5lZHx8cikmJnMuc3RhdGUubG9hZGVkKXtmb3IoKGw9Xy5jcmVhdGVFbGVtZW50KFwiVUxcIikpLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyb3VwXCIpLGwuY2xhc3NOYW1lPVwianN0cmVlLWNoaWxkcmVuXCIsZD0wLGM9cy5jaGlsZHJlbi5sZW5ndGg7ZDxjO2QrKylsLmFwcGVuZENoaWxkKHRoaXMucmVkcmF3X25vZGUocy5jaGlsZHJlbltkXSx0LCEwKSk7ZS5hcHBlbmRDaGlsZChsKX1pZihvJiZlLmFwcGVuZENoaWxkKG8pLCFpKXtmb3IoYXx8KGE9dGhpcy5lbGVtZW50WzBdKSxkPTAsYz1hLmNoaWxkTm9kZXMubGVuZ3RoO2Q8YztkKyspaWYoYS5jaGlsZE5vZGVzW2RdJiZhLmNoaWxkTm9kZXNbZF0uY2xhc3NOYW1lJiYtMSE9PWEuY2hpbGROb2Rlc1tkXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1jaGlsZHJlblwiKSl7cD1hLmNoaWxkTm9kZXNbZF07YnJlYWt9cHx8KChwPV8uY3JlYXRlRWxlbWVudChcIlVMXCIpKS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJncm91cFwiKSxwLmNsYXNzTmFtZT1cImpzdHJlZS1jaGlsZHJlblwiLGEuYXBwZW5kQ2hpbGQocCkpLG48KGE9cCkuY2hpbGROb2Rlcy5sZW5ndGg/YS5pbnNlcnRCZWZvcmUoZSxhLmNoaWxkTm9kZXNbbl0pOmEuYXBwZW5kQ2hpbGQoZSksZyYmKG09dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCx2PXRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0LGUuY2hpbGROb2Rlc1sxXS5mb2N1cygpLHRoaXMuZWxlbWVudFswXS5zY3JvbGxUb3A9bSx0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdD12KX1yZXR1cm4gcy5zdGF0ZS5vcGVuZWQmJiFzLnN0YXRlLmxvYWRlZCYmKHMuc3RhdGUub3BlbmVkPSExLHNldFRpbWVvdXQoUy5wcm94eShmdW5jdGlvbigpe3RoaXMub3Blbl9ub2RlKHMuaWQsITEsMCl9LHRoaXMpLDApKSxlfSxvcGVuX25vZGU6ZnVuY3Rpb24oZSxpLHIpe3ZhciB0LHMsYSxuO2lmKFMuaXNBcnJheShlKSl7Zm9yKHQ9MCxzPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8czt0KyspdGhpcy5vcGVuX25vZGUoZVt0XSxpLHIpO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdCkmJihyPXI9PT1FP3RoaXMuc2V0dGluZ3MuY29yZS5hbmltYXRpb246cix0aGlzLmlzX2Nsb3NlZChlKT90aGlzLmlzX2xvYWRlZChlKT8oYT10aGlzLmdldF9ub2RlKGUsITApLG49dGhpcyxhLmxlbmd0aCYmKHImJmEuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmxlbmd0aCYmYS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCghMCwhMCksZS5jaGlsZHJlbi5sZW5ndGgmJiF0aGlzLl9maXJzdENoaWxkKGEuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdKSYmdGhpcy5kcmF3X2NoaWxkcmVuKGUpLHI/KHRoaXMudHJpZ2dlcihcImJlZm9yZV9vcGVuXCIse25vZGU6ZX0pLGEuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIikuZW5kKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2xvc2VkXCIpLmFkZENsYXNzKFwianN0cmVlLW9wZW5cIikuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnN0b3AoITAsITApLnNsaWRlRG93bihyLGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiXCIsbi5lbGVtZW50JiZuLnRyaWdnZXIoXCJhZnRlcl9vcGVuXCIse25vZGU6ZX0pfSkpOih0aGlzLnRyaWdnZXIoXCJiZWZvcmVfb3BlblwiLHtub2RlOmV9KSxhWzBdLmNsYXNzTmFtZT1hWzBdLmNsYXNzTmFtZS5yZXBsYWNlKFwianN0cmVlLWNsb3NlZFwiLFwianN0cmVlLW9wZW5cIiksYVswXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsITApKSksZS5zdGF0ZS5vcGVuZWQ9ITAsaSYmaS5jYWxsKHRoaXMsZSwhMCksYS5sZW5ndGh8fHRoaXMudHJpZ2dlcihcImJlZm9yZV9vcGVuXCIse25vZGU6ZX0pLHRoaXMudHJpZ2dlcihcIm9wZW5fbm9kZVwiLHtub2RlOmV9KSxyJiZhLmxlbmd0aHx8dGhpcy50cmlnZ2VyKFwiYWZ0ZXJfb3BlblwiLHtub2RlOmV9KSwhMCk6dGhpcy5pc19sb2FkaW5nKGUpP3NldFRpbWVvdXQoUy5wcm94eShmdW5jdGlvbigpe3RoaXMub3Blbl9ub2RlKGUsaSxyKX0sdGhpcyksNTAwKTp2b2lkIHRoaXMubG9hZF9ub2RlKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD90aGlzLm9wZW5fbm9kZShlLGkscik6ISFpJiZpLmNhbGwodGhpcyxlLCExKX0pOihpJiZpLmNhbGwodGhpcyxlLCExKSwhMSkpfSxfb3Blbl90bzpmdW5jdGlvbihlKXtpZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KXJldHVybiExO3ZhciB0LGkscj1lLnBhcmVudHM7Zm9yKHQ9MCxpPXIubGVuZ3RoO3Q8aTt0Kz0xKXQhPT1TLmpzdHJlZS5yb290JiZ0aGlzLm9wZW5fbm9kZShyW3RdLCExLDApO3JldHVybiBTKFwiI1wiK2UuaWQucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCl9LGNsb3NlX25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLHMsYTtpZihTLmlzQXJyYXkoZSkpe2ZvcihpPTAscj0oZT1lLnNsaWNlKCkpLmxlbmd0aDtpPHI7aSsrKXRoaXMuY2xvc2Vfbm9kZShlW2ldLHQpO3JldHVybiEwfXJldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdCkmJighdGhpcy5pc19jbG9zZWQoZSkmJih0PXQ9PT1FP3RoaXMuc2V0dGluZ3MuY29yZS5hbmltYXRpb246dCxhPShzPXRoaXMpLmdldF9ub2RlKGUsITApLGUuc3RhdGUub3BlbmVkPSExLHRoaXMudHJpZ2dlcihcImNsb3NlX25vZGVcIix7bm9kZTplfSksdm9pZChhLmxlbmd0aD90P2EuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmF0dHIoXCJzdHlsZVwiLFwiZGlzcGxheTpibG9jayAhaW1wb3J0YW50XCIpLmVuZCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW9wZW5cIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2xvc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5zdG9wKCEwLCEwKS5zbGlkZVVwKHQsZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJcIixhLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5yZW1vdmUoKSxzLmVsZW1lbnQmJnMudHJpZ2dlcihcImFmdGVyX2Nsb3NlXCIse25vZGU6ZX0pfSk6KGFbMF0uY2xhc3NOYW1lPWFbMF0uY2xhc3NOYW1lLnJlcGxhY2UoXCJqc3RyZWUtb3BlblwiLFwianN0cmVlLWNsb3NlZFwiKSxhLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5yZW1vdmUoKSx0aGlzLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLHtub2RlOmV9KSk6dGhpcy50cmlnZ2VyKFwiYWZ0ZXJfY2xvc2VcIix7bm9kZTplfSkpKSl9LHRvZ2dsZV9ub2RlOmZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoUy5pc0FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLnRvZ2dsZV9ub2RlKGVbdF0pO3JldHVybiEwfXJldHVybiB0aGlzLmlzX2Nsb3NlZChlKT90aGlzLm9wZW5fbm9kZShlKTp0aGlzLmlzX29wZW4oZSk/dGhpcy5jbG9zZV9ub2RlKGUpOnZvaWQgMH0sb3Blbl9hbGw6ZnVuY3Rpb24oZSxpLHIpe2lmKGV8fChlPVMuanN0cmVlLnJvb3QpLCEoZT10aGlzLmdldF9ub2RlKGUpKSlyZXR1cm4hMTt2YXIgdD1lLmlkPT09Uy5qc3RyZWUucm9vdD90aGlzLmdldF9jb250YWluZXJfdWwoKTp0aGlzLmdldF9ub2RlKGUsITApLHMsYSxuO2lmKCF0Lmxlbmd0aCl7Zm9yKHM9MCxhPWUuY2hpbGRyZW5fZC5sZW5ndGg7czxhO3MrKyl0aGlzLmlzX2Nsb3NlZCh0aGlzLl9tb2RlbC5kYXRhW2UuY2hpbGRyZW5fZFtzXV0pJiYodGhpcy5fbW9kZWwuZGF0YVtlLmNoaWxkcmVuX2Rbc11dLnN0YXRlLm9wZW5lZD0hMCk7cmV0dXJuIHRoaXMudHJpZ2dlcihcIm9wZW5fYWxsXCIse25vZGU6ZX0pfXI9cnx8dCwodD0obj10aGlzKS5pc19jbG9zZWQoZSk/dC5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikuYWRkQmFjaygpOnQuZmluZChcIi5qc3RyZWUtY2xvc2VkXCIpKS5lYWNoKGZ1bmN0aW9uKCl7bi5vcGVuX25vZGUodGhpcyxmdW5jdGlvbihlLHQpe3QmJnRoaXMuaXNfcGFyZW50KGUpJiZ0aGlzLm9wZW5fYWxsKGUsaSxyKX0saXx8MCl9KSwwPT09ci5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJvcGVuX2FsbFwiLHtub2RlOnRoaXMuZ2V0X25vZGUocil9KX0sY2xvc2VfYWxsOmZ1bmN0aW9uKGUsdCl7aWYoZXx8KGU9Uy5qc3RyZWUucm9vdCksIShlPXRoaXMuZ2V0X25vZGUoZSkpKXJldHVybiExO3ZhciBpPWUuaWQ9PT1TLmpzdHJlZS5yb290P3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpOnRoaXMuZ2V0X25vZGUoZSwhMCkscj10aGlzLHMsYTtmb3IoaS5sZW5ndGgmJihpPXRoaXMuaXNfb3BlbihlKT9pLmZpbmQoXCIuanN0cmVlLW9wZW5cIikuYWRkQmFjaygpOmkuZmluZChcIi5qc3RyZWUtb3BlblwiKSxTKGkuZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uKCl7ci5jbG9zZV9ub2RlKHRoaXMsdHx8MCl9KSkscz0wLGE9ZS5jaGlsZHJlbl9kLmxlbmd0aDtzPGE7cysrKXRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3NdXS5zdGF0ZS5vcGVuZWQ9ITE7dGhpcy50cmlnZ2VyKFwiY2xvc2VfYWxsXCIse25vZGU6ZX0pfSxpc19kaXNhYmxlZDpmdW5jdGlvbihlKXtyZXR1cm4oZT10aGlzLmdldF9ub2RlKGUpKSYmZS5zdGF0ZSYmZS5zdGF0ZS5kaXNhYmxlZH0sZW5hYmxlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihTLmlzQXJyYXkoZSkpe2Zvcih0PTAsaT0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PGk7dCsrKXRoaXMuZW5hYmxlX25vZGUoZVt0XSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtlLnN0YXRlLmRpc2FibGVkPSExLHRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCExKSx0aGlzLnRyaWdnZXIoXCJlbmFibGVfbm9kZVwiLHtub2RlOmV9KX0sZGlzYWJsZV9ub2RlOmZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoUy5pc0FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmRpc2FibGVfbm9kZShlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KXJldHVybiExO2Uuc3RhdGUuZGlzYWJsZWQ9ITAsdGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsITApLHRoaXMudHJpZ2dlcihcImRpc2FibGVfbm9kZVwiLHtub2RlOmV9KX0saXNfaGlkZGVuOmZ1bmN0aW9uKGUpe3JldHVybiEwPT09KGU9dGhpcy5nZXRfbm9kZShlKSkuc3RhdGUuaGlkZGVufSxoaWRlX25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKFMuaXNBcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5oaWRlX25vZGUoZVtpXSwhMCk7cmV0dXJuIHR8fHRoaXMucmVkcmF3KCksITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtlLnN0YXRlLmhpZGRlbnx8KGUuc3RhdGUuaGlkZGVuPSEwLHRoaXMuX25vZGVfY2hhbmdlZChlLnBhcmVudCksdHx8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJoaWRlX25vZGVcIix7bm9kZTplfSkpfSxzaG93X25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyO2lmKFMuaXNBcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy5zaG93X25vZGUoZVtpXSwhMCk7cmV0dXJuIHR8fHRoaXMucmVkcmF3KCksITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtlLnN0YXRlLmhpZGRlbiYmKGUuc3RhdGUuaGlkZGVuPSExLHRoaXMuX25vZGVfY2hhbmdlZChlLnBhcmVudCksdHx8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJzaG93X25vZGVcIix7bm9kZTplfSkpfSxoaWRlX2FsbDpmdW5jdGlvbihlKXt2YXIgdCxpPXRoaXMuX21vZGVsLmRhdGEscj1bXTtmb3IodCBpbiBpKWkuaGFzT3duUHJvcGVydHkodCkmJnQhPT1TLmpzdHJlZS5yb290JiYhaVt0XS5zdGF0ZS5oaWRkZW4mJihpW3RdLnN0YXRlLmhpZGRlbj0hMCxyLnB1c2godCkpO3JldHVybiB0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCxlfHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcImhpZGVfYWxsXCIse25vZGVzOnJ9KSxyfSxzaG93X2FsbDpmdW5jdGlvbihlKXt2YXIgdCxpPXRoaXMuX21vZGVsLmRhdGEscj1bXTtmb3IodCBpbiBpKWkuaGFzT3duUHJvcGVydHkodCkmJnQhPT1TLmpzdHJlZS5yb290JiZpW3RdLnN0YXRlLmhpZGRlbiYmKGlbdF0uc3RhdGUuaGlkZGVuPSExLHIucHVzaCh0KSk7cmV0dXJuIHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwLGV8fHRoaXMucmVkcmF3KCksdGhpcy50cmlnZ2VyKFwic2hvd19hbGxcIix7bm9kZXM6cn0pLHJ9LGFjdGl2YXRlX25vZGU6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLmlzX2Rpc2FibGVkKGUpKXJldHVybiExO2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fHwodD17fSksdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiZ0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkIT09RT90aGlzLmdldF9ub2RlKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQpOm51bGwsdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCYmIXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuc3RhdGUuc2VsZWN0ZWQmJih0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPW51bGwpLCF0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoJiYodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLmdldF9ub2RlKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoLTFdKSksdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlJiYodC5tZXRhS2V5fHx0LmN0cmxLZXl8fHQuc2hpZnRLZXkpJiYoIXQuc2hpZnRLZXl8fHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQmJnRoaXMuZ2V0X3BhcmVudChlKSYmdGhpcy5nZXRfcGFyZW50KGUpPT09dGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5wYXJlbnQpKWlmKHQuc2hpZnRLZXkpe3ZhciBpPXRoaXMuZ2V0X25vZGUoZSkuaWQscj10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkLHM9dGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnBhcmVudCkuY2hpbGRyZW4sYT0hMSxuLG87Zm9yKG49MCxvPXMubGVuZ3RoO248bztuKz0xKXNbbl09PT1pJiYoYT0hYSksc1tuXT09PXImJihhPSFhKSx0aGlzLmlzX2Rpc2FibGVkKHNbbl0pfHwhYSYmc1tuXSE9PWkmJnNbbl0hPT1yP3RoaXMuZGVzZWxlY3Rfbm9kZShzW25dLCEwLHQpOnRoaXMuaXNfaGlkZGVuKHNbbl0pfHx0aGlzLnNlbGVjdF9ub2RlKHNbbl0sITAsITEsdCk7dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3Rfbm9kZVwiLG5vZGU6dGhpcy5nZXRfbm9kZShlKSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZXZlbnQ6dH0pfWVsc2UgdGhpcy5pc19zZWxlY3RlZChlKT90aGlzLmRlc2VsZWN0X25vZGUoZSwhMSx0KTp0aGlzLnNlbGVjdF9ub2RlKGUsITEsITEsdCk7ZWxzZSF0aGlzLnNldHRpbmdzLmNvcmUubXVsdGlwbGUmJih0Lm1ldGFLZXl8fHQuY3RybEtleXx8dC5zaGlmdEtleSkmJnRoaXMuaXNfc2VsZWN0ZWQoZSk/dGhpcy5kZXNlbGVjdF9ub2RlKGUsITEsdCk6KHRoaXMuZGVzZWxlY3RfYWxsKCEwKSx0aGlzLnNlbGVjdF9ub2RlKGUsITEsITEsdCksdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLmdldF9ub2RlKGUpKTt0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZV9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZShlKSxldmVudDp0fSl9LGhvdmVyX25vZGU6ZnVuY3Rpb24oZSl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZSwhMCkpfHwhZS5sZW5ndGh8fGUuY2hpbGRyZW4oXCIuanN0cmVlLWhvdmVyZWRcIikubGVuZ3RoKXJldHVybiExO3ZhciB0PXRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLGk9dGhpcy5lbGVtZW50O3QmJnQubGVuZ3RoJiZ0aGlzLmRlaG92ZXJfbm9kZSh0KSxlLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtaG92ZXJlZFwiKSx0aGlzLnRyaWdnZXIoXCJob3Zlcl9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZShlKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixlWzBdLmlkKX0sMCl9LGRlaG92ZXJfbm9kZTpmdW5jdGlvbihlKXtpZighKGU9dGhpcy5nZXRfbm9kZShlLCEwKSl8fCFlLmxlbmd0aHx8IWUuY2hpbGRyZW4oXCIuanN0cmVlLWhvdmVyZWRcIikubGVuZ3RoKXJldHVybiExO2UuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1ob3ZlcmVkXCIpLHRoaXMudHJpZ2dlcihcImRlaG92ZXJfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZSl9KX0sc2VsZWN0X25vZGU6ZnVuY3Rpb24oZSx0LGkscil7dmFyIHMsYSxuLG87aWYoUy5pc0FycmF5KGUpKXtmb3IoYT0wLG49KGU9ZS5zbGljZSgpKS5sZW5ndGg7YTxuO2ErKyl0aGlzLnNlbGVjdF9ub2RlKGVbYV0sdCxpLHIpO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpcmV0dXJuITE7cz10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuc2VsZWN0ZWR8fChlLnN0YXRlLnNlbGVjdGVkPSEwLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5wdXNoKGUuaWQpLGl8fChzPXRoaXMuX29wZW5fdG8oZSkpLHMmJnMubGVuZ3RoJiZzLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2xpY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJzZWxlY3Rfbm9kZVwiLHtub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50OnJ9KSx0fHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcInNlbGVjdF9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDpyfSkpfSxkZXNlbGVjdF9ub2RlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgcixzLGE7aWYoUy5pc0FycmF5KGUpKXtmb3Iocj0wLHM9KGU9ZS5zbGljZSgpKS5sZW5ndGg7cjxzO3IrKyl0aGlzLmRlc2VsZWN0X25vZGUoZVtyXSx0LGkpO3JldHVybiEwfWlmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpcmV0dXJuITE7YT10aGlzLmdldF9ub2RlKGUsITApLGUuc3RhdGUuc2VsZWN0ZWQmJihlLnN0YXRlLnNlbGVjdGVkPSExLHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1TLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZS5pZCksYS5sZW5ndGgmJmEuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLHRoaXMudHJpZ2dlcihcImRlc2VsZWN0X25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDppfSksdHx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJkZXNlbGVjdF9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDppfSkpfSxzZWxlY3RfYWxsOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoW10pLGkscjtmb3IodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPXRoaXMuX21vZGVsLmRhdGFbUy5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZC5jb25jYXQoKSxpPTAscj10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoO2k8cjtpKyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV1dLnN0YXRlLnNlbGVjdGVkPSEwKTt0aGlzLnJlZHJhdyghMCksdGhpcy50cmlnZ2VyKFwic2VsZWN0X2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KSxlfHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcInNlbGVjdF9hbGxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsb2xkX3NlbGVjdGlvbjp0fSl9LGRlc2VsZWN0X2FsbDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKSxpLHI7Zm9yKGk9MCxyPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGg7aTxyO2krKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0mJih0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtpXV0uc3RhdGUuc2VsZWN0ZWQ9ITEpO3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1bXSx0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtY2xpY2tlZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLnBhcmVudCgpLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLHRoaXMudHJpZ2dlcihcImRlc2VsZWN0X2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsbm9kZTp0fSksZXx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJkZXNlbGVjdF9hbGxcIixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsb2xkX3NlbGVjdGlvbjp0fSl9LGlzX3NlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdCkmJmUuc3RhdGUuc2VsZWN0ZWR9LGdldF9zZWxlY3RlZDpmdW5jdGlvbihlKXtyZXR1cm4gZT9TLm1hcCh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsUy5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0sdGhpcykpOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpfSxnZXRfdG9wX3NlbGVjdGVkOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0X3NlbGVjdGVkKCEwKSxpPXt9LHIscyxhLG47Zm9yKHI9MCxzPXQubGVuZ3RoO3I8cztyKyspaVt0W3JdLmlkXT10W3JdO2ZvcihyPTAscz10Lmxlbmd0aDtyPHM7cisrKWZvcihhPTAsbj10W3JdLmNoaWxkcmVuX2QubGVuZ3RoO2E8bjthKyspaVt0W3JdLmNoaWxkcmVuX2RbYV1dJiZkZWxldGUgaVt0W3JdLmNoaWxkcmVuX2RbYV1dO2ZvcihyIGluIHQ9W10saSlpLmhhc093blByb3BlcnR5KHIpJiZ0LnB1c2gocik7cmV0dXJuIGU/Uy5tYXAodCxTLnByb3h5KGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldF9ub2RlKGUpfSx0aGlzKSk6dH0sZ2V0X2JvdHRvbV9zZWxlY3RlZDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldF9zZWxlY3RlZCghMCksaT1bXSxyLHM7Zm9yKHI9MCxzPXQubGVuZ3RoO3I8cztyKyspdFtyXS5jaGlsZHJlbi5sZW5ndGh8fGkucHVzaCh0W3JdLmlkKTtyZXR1cm4gZT9TLm1hcChpLFMucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LHRoaXMpKTppfSxnZXRfc3RhdGU6ZnVuY3Rpb24oKXt2YXIgZT17Y29yZTp7b3BlbjpbXSxsb2FkZWQ6W10sc2Nyb2xsOntsZWZ0OnRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KCksdG9wOnRoaXMuZWxlbWVudC5zY3JvbGxUb3AoKX0sc2VsZWN0ZWQ6W119fSx0O2Zvcih0IGluIHRoaXMuX21vZGVsLmRhdGEpdGhpcy5fbW9kZWwuZGF0YS5oYXNPd25Qcm9wZXJ0eSh0KSYmdCE9PVMuanN0cmVlLnJvb3QmJih0aGlzLl9tb2RlbC5kYXRhW3RdLnN0YXRlLmxvYWRlZCYmdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmZS5jb3JlLmxvYWRlZC5wdXNoKHQpLHRoaXMuX21vZGVsLmRhdGFbdF0uc3RhdGUub3BlbmVkJiZlLmNvcmUub3Blbi5wdXNoKHQpLHRoaXMuX21vZGVsLmRhdGFbdF0uc3RhdGUuc2VsZWN0ZWQmJmUuY29yZS5zZWxlY3RlZC5wdXNoKHQpKTtyZXR1cm4gZX0sc2V0X3N0YXRlOmZ1bmN0aW9uKHQsaSl7aWYodCl7aWYodC5jb3JlJiZ0LmNvcmUuc2VsZWN0ZWQmJnQuY29yZS5pbml0aWFsX3NlbGVjdGlvbj09PUUmJih0LmNvcmUuaW5pdGlhbF9zZWxlY3Rpb249dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSkuc29ydCgpLmpvaW4oXCIsXCIpKSx0LmNvcmUpe3ZhciBlLHIscyxhLG47aWYodC5jb3JlLmxvYWRlZClyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmUy5pc0FycmF5KHQuY29yZS5sb2FkZWQpJiZ0LmNvcmUubG9hZGVkLmxlbmd0aD90aGlzLl9sb2FkX25vZGVzKHQuY29yZS5sb2FkZWQsZnVuY3Rpb24oZSl7ZGVsZXRlIHQuY29yZS5sb2FkZWQsdGhpcy5zZXRfc3RhdGUodCxpKX0pOihkZWxldGUgdC5jb3JlLmxvYWRlZCx0aGlzLnNldF9zdGF0ZSh0LGkpKSwhMTtpZih0LmNvcmUub3BlbilyZXR1cm4gUy5pc0FycmF5KHQuY29yZS5vcGVuKSYmdC5jb3JlLm9wZW4ubGVuZ3RoP3RoaXMuX2xvYWRfbm9kZXModC5jb3JlLm9wZW4sZnVuY3Rpb24oZSl7dGhpcy5vcGVuX25vZGUoZSwhMSwwKSxkZWxldGUgdC5jb3JlLm9wZW4sdGhpcy5zZXRfc3RhdGUodCxpKX0pOihkZWxldGUgdC5jb3JlLm9wZW4sdGhpcy5zZXRfc3RhdGUodCxpKSksITE7aWYodC5jb3JlLnNjcm9sbClyZXR1cm4gdC5jb3JlLnNjcm9sbCYmdC5jb3JlLnNjcm9sbC5sZWZ0IT09RSYmdGhpcy5lbGVtZW50LnNjcm9sbExlZnQodC5jb3JlLnNjcm9sbC5sZWZ0KSx0LmNvcmUuc2Nyb2xsJiZ0LmNvcmUuc2Nyb2xsLnRvcCE9PUUmJnRoaXMuZWxlbWVudC5zY3JvbGxUb3AodC5jb3JlLnNjcm9sbC50b3ApLGRlbGV0ZSB0LmNvcmUuc2Nyb2xsLHRoaXMuc2V0X3N0YXRlKHQsaSksITE7aWYodC5jb3JlLnNlbGVjdGVkKXJldHVybiBhPXRoaXMsdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uIT09RSYmdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uIT09dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSkuc29ydCgpLmpvaW4oXCIsXCIpfHwodGhpcy5kZXNlbGVjdF9hbGwoKSxTLmVhY2godC5jb3JlLnNlbGVjdGVkLGZ1bmN0aW9uKGUsdCl7YS5zZWxlY3Rfbm9kZSh0LCExLCEwKX0pKSxkZWxldGUgdC5jb3JlLmluaXRpYWxfc2VsZWN0aW9uLGRlbGV0ZSB0LmNvcmUuc2VsZWN0ZWQsdGhpcy5zZXRfc3RhdGUodCxpKSwhMTtmb3IobiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJlwiY29yZVwiIT09biYmLTE9PT1TLmluQXJyYXkobix0aGlzLnNldHRpbmdzLnBsdWdpbnMpJiZkZWxldGUgdFtuXTtpZihTLmlzRW1wdHlPYmplY3QodC5jb3JlKSlyZXR1cm4gZGVsZXRlIHQuY29yZSx0aGlzLnNldF9zdGF0ZSh0LGkpLCExfXJldHVybiFTLmlzRW1wdHlPYmplY3QodCl8fCh0PW51bGwsaSYmaS5jYWxsKHRoaXMpLHRoaXMudHJpZ2dlcihcInNldF9zdGF0ZVwiKSwhMSl9cmV0dXJuITF9LHJlZnJlc2g6ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhLmNvcmUuc3RhdGU9ITA9PT10P3t9OnRoaXMuZ2V0X3N0YXRlKCksdCYmUy5pc0Z1bmN0aW9uKHQpJiYodGhpcy5fZGF0YS5jb3JlLnN0YXRlPXQuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5zdGF0ZSkpLHRoaXMuX2NudD0wLHRoaXMuX21vZGVsLmRhdGE9e30sdGhpcy5fbW9kZWwuZGF0YVtTLmpzdHJlZS5yb290XT17aWQ6Uy5qc3RyZWUucm9vdCxwYXJlbnQ6bnVsbCxwYXJlbnRzOltdLGNoaWxkcmVuOltdLGNoaWxkcmVuX2Q6W10sc3RhdGU6e2xvYWRlZDohMX19LHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1bXSx0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPW51bGwsdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9bnVsbDt2YXIgaT10aGlzLmdldF9jb250YWluZXJfdWwoKVswXS5jbGFzc05hbWU7ZXx8KHRoaXMuZWxlbWVudC5odG1sKFwiPHVsIGNsYXNzPSdcIitpK1wiJyByb2xlPSdncm91cCc+PGxpIGNsYXNzPSdqc3RyZWUtaW5pdGlhbC1ub2RlIGpzdHJlZS1sb2FkaW5nIGpzdHJlZS1sZWFmIGpzdHJlZS1sYXN0JyByb2xlPSd0cmVlaXRlbScgaWQ9J2pcIit0aGlzLl9pZCtcIl9sb2FkaW5nJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLW9jbCc+PC9pPjxhIGNsYXNzPSdqc3RyZWUtYW5jaG9yJyBocmVmPScjJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLXRoZW1laWNvbi1oaWRkZW4nPjwvaT5cIit0aGlzLmdldF9zdHJpbmcoXCJMb2FkaW5nIC4uLlwiKStcIjwvYT48L2xpPjwvdWw+XCIpLHRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsXCJqXCIrdGhpcy5faWQrXCJfbG9hZGluZ1wiKSksdGhpcy5sb2FkX25vZGUoUy5qc3RyZWUucm9vdCxmdW5jdGlvbihlLHQpe3QmJih0aGlzLmdldF9jb250YWluZXJfdWwoKVswXS5jbGFzc05hbWU9aSx0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKSYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0aGlzLl9maXJzdENoaWxkKHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpWzBdKS5pZCksdGhpcy5zZXRfc3RhdGUoUy5leHRlbmQoITAse30sdGhpcy5fZGF0YS5jb3JlLnN0YXRlKSxmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihcInJlZnJlc2hcIil9KSksdGhpcy5fZGF0YS5jb3JlLnN0YXRlPW51bGx9KX0scmVmcmVzaF9ub2RlOmZ1bmN0aW9uKHQpe2lmKCEodD10aGlzLmdldF9ub2RlKHQpKXx8dC5pZD09PVMuanN0cmVlLnJvb3QpcmV0dXJuITE7dmFyIGk9W10sZT1bXSxyPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5jb25jYXQoW10pO2UucHVzaCh0LmlkKSwhMD09PXQuc3RhdGUub3BlbmVkJiZpLnB1c2godC5pZCksdGhpcy5nZXRfbm9kZSh0LCEwKS5maW5kKFwiLmpzdHJlZS1vcGVuXCIpLmVhY2goZnVuY3Rpb24oKXtlLnB1c2godGhpcy5pZCksaS5wdXNoKHRoaXMuaWQpfSksdGhpcy5fbG9hZF9ub2RlcyhlLFMucHJveHkoZnVuY3Rpb24oZSl7dGhpcy5vcGVuX25vZGUoaSwhMSwwKSx0aGlzLnNlbGVjdF9ub2RlKHIpLHRoaXMudHJpZ2dlcihcInJlZnJlc2hfbm9kZVwiLHtub2RlOnQsbm9kZXM6ZX0pfSx0aGlzKSwhMSwhMCl9LHNldF9pZDpmdW5jdGlvbihlLHQpe2lmKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpcmV0dXJuITE7dmFyIGkscixzPXRoaXMuX21vZGVsLmRhdGEsYT1lLmlkO2Zvcih0PXQudG9TdHJpbmcoKSxzW2UucGFyZW50XS5jaGlsZHJlbltTLmluQXJyYXkoZS5pZCxzW2UucGFyZW50XS5jaGlsZHJlbildPXQsaT0wLHI9ZS5wYXJlbnRzLmxlbmd0aDtpPHI7aSsrKXNbZS5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kW1MuaW5BcnJheShlLmlkLHNbZS5wYXJlbnRzW2ldXS5jaGlsZHJlbl9kKV09dDtmb3IoaT0wLHI9ZS5jaGlsZHJlbi5sZW5ndGg7aTxyO2krKylzW2UuY2hpbGRyZW5baV1dLnBhcmVudD10O2ZvcihpPTAscj1lLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspc1tlLmNoaWxkcmVuX2RbaV1dLnBhcmVudHNbUy5pbkFycmF5KGUuaWQsc1tlLmNoaWxkcmVuX2RbaV1dLnBhcmVudHMpXT10O3JldHVybi0xIT09KGk9Uy5pbkFycmF5KGUuaWQsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkKSkmJih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbaV09dCksKGk9dGhpcy5nZXRfbm9kZShlLmlkLCEwKSkmJihpLmF0dHIoXCJpZFwiLHQpLHRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpPT09ZS5pZCYmdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIix0KSksZGVsZXRlIHNbZS5pZF0sZS5pZD10LHNbZS5saV9hdHRyLmlkPXRdPWUsdGhpcy50cmlnZ2VyKFwic2V0X2lkXCIse25vZGU6ZSxuZXc6ZS5pZCxvbGQ6YX0pLCEwfSxnZXRfdGV4dDpmdW5jdGlvbihlKXtyZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpJiZlLnRleHR9LHNldF90ZXh0OmZ1bmN0aW9uKGUsdCl7dmFyIGkscjtpZihTLmlzQXJyYXkoZSkpe2ZvcihpPTAscj0oZT1lLnNsaWNlKCkpLmxlbmd0aDtpPHI7aSsrKXRoaXMuc2V0X3RleHQoZVtpXSx0KTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpJiYoZS50ZXh0PXQsdGhpcy5nZXRfbm9kZShlLCEwKS5sZW5ndGgmJnRoaXMucmVkcmF3X25vZGUoZS5pZCksdGhpcy50cmlnZ2VyKFwic2V0X3RleHRcIix7b2JqOmUsdGV4dDp0fSksITApfSxnZXRfanNvbjpmdW5jdGlvbihlLHQsaSl7aWYoIShlPXRoaXMuZ2V0X25vZGUoZXx8Uy5qc3RyZWUucm9vdCkpKXJldHVybiExO3QmJnQuZmxhdCYmIWkmJihpPVtdKTt2YXIgcj17aWQ6ZS5pZCx0ZXh0OmUudGV4dCxpY29uOnRoaXMuZ2V0X2ljb24oZSksbGlfYXR0cjpTLmV4dGVuZCghMCx7fSxlLmxpX2F0dHIpLGFfYXR0cjpTLmV4dGVuZCghMCx7fSxlLmFfYXR0ciksc3RhdGU6e30sZGF0YTooIXR8fCF0Lm5vX2RhdGEpJiZTLmV4dGVuZCghMCxTLmlzQXJyYXkoZS5kYXRhKT9bXTp7fSxlLmRhdGEpfSxzLGE7aWYodCYmdC5mbGF0P3IucGFyZW50PWUucGFyZW50OnIuY2hpbGRyZW49W10sdCYmdC5ub19zdGF0ZSlkZWxldGUgci5zdGF0ZTtlbHNlIGZvcihzIGluIGUuc3RhdGUpZS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShzKSYmKHIuc3RhdGVbc109ZS5zdGF0ZVtzXSk7aWYodCYmdC5ub19saV9hdHRyJiZkZWxldGUgci5saV9hdHRyLHQmJnQubm9fYV9hdHRyJiZkZWxldGUgci5hX2F0dHIsdCYmdC5ub19pZCYmKGRlbGV0ZSByLmlkLHIubGlfYXR0ciYmci5saV9hdHRyLmlkJiZkZWxldGUgci5saV9hdHRyLmlkLHIuYV9hdHRyJiZyLmFfYXR0ci5pZCYmZGVsZXRlIHIuYV9hdHRyLmlkKSx0JiZ0LmZsYXQmJmUuaWQhPT1TLmpzdHJlZS5yb290JiZpLnB1c2gociksIXR8fCF0Lm5vX2NoaWxkcmVuKWZvcihzPTAsYT1lLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKXQmJnQuZmxhdD90aGlzLmdldF9qc29uKGUuY2hpbGRyZW5bc10sdCxpKTpyLmNoaWxkcmVuLnB1c2godGhpcy5nZXRfanNvbihlLmNoaWxkcmVuW3NdLHQpKTtyZXR1cm4gdCYmdC5mbGF0P2k6ZS5pZD09PVMuanN0cmVlLnJvb3Q/ci5jaGlsZHJlbjpyfSxjcmVhdGVfbm9kZTpmdW5jdGlvbihlLHQsaSxyLHMpe2lmKG51bGw9PT1lJiYoZT1TLmpzdHJlZS5yb290KSwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuITE7aWYoIShpPWk9PT1FP1wibGFzdFwiOmkpLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIXMmJiF0aGlzLmlzX2xvYWRlZChlKSlyZXR1cm4gdGhpcy5sb2FkX25vZGUoZSxmdW5jdGlvbigpe3RoaXMuY3JlYXRlX25vZGUoZSx0LGksciwhMCl9KTt2YXIgYSxuLG8sZDtzd2l0Y2godHx8KHQ9e3RleHQ6dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIil9KSwodD1cInN0cmluZ1wiPT10eXBlb2YgdD97dGV4dDp0fTpTLmV4dGVuZCghMCx7fSx0KSkudGV4dD09PUUmJih0LnRleHQ9dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIikpLGUuaWQ9PT1TLmpzdHJlZS5yb290JiYoXCJiZWZvcmVcIj09PWkmJihpPVwiZmlyc3RcIiksXCJhZnRlclwiPT09aSYmKGk9XCJsYXN0XCIpKSxpKXtjYXNlXCJiZWZvcmVcIjphPXRoaXMuZ2V0X25vZGUoZS5wYXJlbnQpLGk9Uy5pbkFycmF5KGUuaWQsYS5jaGlsZHJlbiksZT1hO2JyZWFrO2Nhc2VcImFmdGVyXCI6YT10aGlzLmdldF9ub2RlKGUucGFyZW50KSxpPVMuaW5BcnJheShlLmlkLGEuY2hpbGRyZW4pKzEsZT1hO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6aT0wO2JyZWFrO2Nhc2VcImxhc3RcIjppPWUuY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6aXx8KGk9MCl9aWYoaT5lLmNoaWxkcmVuLmxlbmd0aCYmKGk9ZS5jaGlsZHJlbi5sZW5ndGgpLHQuaWR8fCh0LmlkPSEwKSwhdGhpcy5jaGVjayhcImNyZWF0ZV9ub2RlXCIsdCxlLGkpKXJldHVybiB0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSwhMTtpZighMD09PXQuaWQmJmRlbGV0ZSB0LmlkLCEodD10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2pzb24odCxlLmlkLGUucGFyZW50cy5jb25jYXQoKSkpKXJldHVybiExO2ZvcihhPXRoaXMuZ2V0X25vZGUodCksKG49W10pLnB1c2godCksbj1uLmNvbmNhdChhLmNoaWxkcmVuX2QpLHRoaXMudHJpZ2dlcihcIm1vZGVsXCIse25vZGVzOm4scGFyZW50OmUuaWR9KSxlLmNoaWxkcmVuX2Q9ZS5jaGlsZHJlbl9kLmNvbmNhdChuKSxvPTAsZD1lLnBhcmVudHMubGVuZ3RoO288ZDtvKyspdGhpcy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbb11dLmNoaWxkcmVuX2Q9dGhpcy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbb11dLmNoaWxkcmVuX2QuY29uY2F0KG4pO2Zvcih0PWEsYT1bXSxvPTAsZD1lLmNoaWxkcmVuLmxlbmd0aDtvPGQ7bysrKWFbaTw9bz9vKzE6b109ZS5jaGlsZHJlbltvXTtyZXR1cm4gYVtpXT10LmlkLGUuY2hpbGRyZW49YSx0aGlzLnJlZHJhd19ub2RlKGUsITApLHRoaXMudHJpZ2dlcihcImNyZWF0ZV9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZSh0KSxwYXJlbnQ6ZS5pZCxwb3NpdGlvbjppfSksciYmci5jYWxsKHRoaXMsdGhpcy5nZXRfbm9kZSh0KSksdC5pZH0scmVuYW1lX25vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgaSxyLHM7aWYoUy5pc0FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnJlbmFtZV9ub2RlKGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KSYmKHM9ZS50ZXh0LHRoaXMuY2hlY2soXCJyZW5hbWVfbm9kZVwiLGUsdGhpcy5nZXRfcGFyZW50KGUpLHQpPyh0aGlzLnNldF90ZXh0KGUsdCksdGhpcy50cmlnZ2VyKFwicmVuYW1lX25vZGVcIix7bm9kZTplLHRleHQ6dCxvbGQ6c30pLCEwKToodGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITEpKX0sZGVsZXRlX25vZGU6ZnVuY3Rpb24oZSl7dmFyIHQsaSxyLHMsYSxuLG8sZCxjLGwsaCxfO2lmKFMuaXNBcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5kZWxldGVfbm9kZShlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KXJldHVybiExO2lmKHI9dGhpcy5nZXRfbm9kZShlLnBhcmVudCkscz1TLmluQXJyYXkoZS5pZCxyLmNoaWxkcmVuKSxsPSExLCF0aGlzLmNoZWNrKFwiZGVsZXRlX25vZGVcIixlLHIscykpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2ZvcigtMSE9PXMmJihyLmNoaWxkcmVuPVMudmFrYXRhLmFycmF5X3JlbW92ZShyLmNoaWxkcmVuLHMpKSwoYT1lLmNoaWxkcmVuX2QuY29uY2F0KFtdKSkucHVzaChlLmlkKSxuPTAsbz1lLnBhcmVudHMubGVuZ3RoO248bztuKyspdGhpcy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbbl1dLmNoaWxkcmVuX2Q9Uy52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX21vZGVsLmRhdGFbZS5wYXJlbnRzW25dXS5jaGlsZHJlbl9kLGZ1bmN0aW9uKGUpe3JldHVybi0xPT09Uy5pbkFycmF5KGUsYSl9KTtmb3IoZD0wLGM9YS5sZW5ndGg7ZDxjO2QrKylpZih0aGlzLl9tb2RlbC5kYXRhW2FbZF1dLnN0YXRlLnNlbGVjdGVkKXtsPSEwO2JyZWFrfWZvcihsJiYodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPVMudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1TLmluQXJyYXkoZSxhKX0pKSx0aGlzLnRyaWdnZXIoXCJkZWxldGVfbm9kZVwiLHtub2RlOmUscGFyZW50OnIuaWR9KSxsJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImRlbGV0ZV9ub2RlXCIsbm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxwYXJlbnQ6ci5pZH0pLGQ9MCxjPWEubGVuZ3RoO2Q8YztkKyspZGVsZXRlIHRoaXMuX21vZGVsLmRhdGFbYVtkXV07cmV0dXJuLTEhPT1TLmluQXJyYXkodGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQsYSkmJih0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1udWxsLGg9dGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcCxfPXRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0LHIuaWQ9PT1TLmpzdHJlZS5yb290P3RoaXMuX21vZGVsLmRhdGFbUy5qc3RyZWUucm9vdF0uY2hpbGRyZW5bMF0mJnRoaXMuZ2V0X25vZGUodGhpcy5fbW9kZWwuZGF0YVtTLmpzdHJlZS5yb290XS5jaGlsZHJlblswXSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5mb2N1cygpOnRoaXMuZ2V0X25vZGUociwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5mb2N1cygpLHRoaXMuZWxlbWVudFswXS5zY3JvbGxUb3A9aCx0aGlzLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdD1fKSx0aGlzLnJlZHJhd19ub2RlKHIsITApLCEwfSxjaGVjazpmdW5jdGlvbihlLHQsaSxyLHMpe3Q9dCYmdC5pZD90OnRoaXMuZ2V0X25vZGUodCksaT1pJiZpLmlkP2k6dGhpcy5nZXRfbm9kZShpKTt2YXIgYT1lLm1hdGNoKC9ebW92ZV9ub2RlfGNvcHlfbm9kZXxjcmVhdGVfbm9kZSQvaSk/aTp0LG49dGhpcy5zZXR0aW5ncy5jb3JlLmNoZWNrX2NhbGxiYWNrO3JldHVyblwibW92ZV9ub2RlXCIhPT1lJiZcImNvcHlfbm9kZVwiIT09ZXx8cyYmcy5pc19tdWx0aXx8dC5pZCE9PWkuaWQmJihcIm1vdmVfbm9kZVwiIT09ZXx8Uy5pbkFycmF5KHQuaWQsaS5jaGlsZHJlbikhPT1yKSYmLTE9PT1TLmluQXJyYXkoaS5pZCx0LmNoaWxkcmVuX2QpPyhhJiZhLmRhdGEmJihhPWEuZGF0YSksYSYmYS5mdW5jdGlvbnMmJighMT09PWEuZnVuY3Rpb25zW2VdfHwhMD09PWEuZnVuY3Rpb25zW2VdKT8oITE9PT1hLmZ1bmN0aW9uc1tlXSYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wMlwiLHJlYXNvbjpcIk5vZGUgZGF0YSBwcmV2ZW50cyBmdW5jdGlvbjogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pLGEuZnVuY3Rpb25zW2VdKTohKCExPT09bnx8Uy5pc0Z1bmN0aW9uKG4pJiYhMT09PW4uY2FsbCh0aGlzLGUsdCxpLHIscyl8fG4mJiExPT09bltlXSl8fCEodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzAzXCIscmVhc29uOlwiVXNlciBjb25maWcgZm9yIGNvcmUuY2hlY2tfY2FsbGJhY2sgcHJldmVudHMgZnVuY3Rpb246IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQpJiZpLmlkfSl9KSk6ISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDFcIixyZWFzb246XCJNb3ZpbmcgcGFyZW50IGluc2lkZSBjaGlsZFwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSl9LGxhc3RfZXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3J9LG1vdmVfbm9kZTpmdW5jdGlvbihlLHQsaSxyLHMsYSxuKXt2YXIgbyxkLGMsbCxoLF8sdSxnLGYscCxtLHYsaix5O2lmKHQ9dGhpcy5nZXRfbm9kZSh0KSxpPWk9PT1FPzA6aSwhdClyZXR1cm4hMTtpZighaS50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJiFzJiYhdGhpcy5pc19sb2FkZWQodCkpcmV0dXJuIHRoaXMubG9hZF9ub2RlKHQsZnVuY3Rpb24oKXt0aGlzLm1vdmVfbm9kZShlLHQsaSxyLCEwLCExLG4pfSk7aWYoUy5pc0FycmF5KGUpKXtpZigxIT09ZS5sZW5ndGgpe2ZvcihvPTAsZD1lLmxlbmd0aDtvPGQ7bysrKShmPXRoaXMubW92ZV9ub2RlKGVbb10sdCxpLHIscywhMSxuKSkmJih0PWYsaT1cImFmdGVyXCIpO3JldHVybiB0aGlzLnJlZHJhdygpLCEwfWU9ZVswXX1pZighKGU9ZSYmZS5pZD9lOnRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtpZihjPShlLnBhcmVudHx8Uy5qc3RyZWUucm9vdCkudG9TdHJpbmcoKSxoPWkudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiZ0LmlkIT09Uy5qc3RyZWUucm9vdD90aGlzLmdldF9ub2RlKHQucGFyZW50KTp0LHU9IShfPW58fCh0aGlzLl9tb2RlbC5kYXRhW2UuaWRdP3RoaXM6Uy5qc3RyZWUucmVmZXJlbmNlKGUuaWQpKSl8fCFfLl9pZHx8dGhpcy5faWQhPT1fLl9pZCxsPV8mJl8uX2lkJiZjJiZfLl9tb2RlbC5kYXRhW2NdJiZfLl9tb2RlbC5kYXRhW2NdLmNoaWxkcmVuP1MuaW5BcnJheShlLmlkLF8uX21vZGVsLmRhdGFbY10uY2hpbGRyZW4pOi0xLF8mJl8uX2lkJiYoZT1fLl9tb2RlbC5kYXRhW2UuaWRdKSx1KXJldHVybiEhKGY9dGhpcy5jb3B5X25vZGUoZSx0LGkscixzLCExLG4pKSYmKF8mJl8uZGVsZXRlX25vZGUoZSksZik7c3dpdGNoKHQuaWQ9PT1TLmpzdHJlZS5yb290JiYoXCJiZWZvcmVcIj09PWkmJihpPVwiZmlyc3RcIiksXCJhZnRlclwiPT09aSYmKGk9XCJsYXN0XCIpKSxpKXtjYXNlXCJiZWZvcmVcIjppPVMuaW5BcnJheSh0LmlkLGguY2hpbGRyZW4pO2JyZWFrO2Nhc2VcImFmdGVyXCI6aT1TLmluQXJyYXkodC5pZCxoLmNoaWxkcmVuKSsxO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6aT0wO2JyZWFrO2Nhc2VcImxhc3RcIjppPWguY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6aXx8KGk9MCl9aWYoaT5oLmNoaWxkcmVuLmxlbmd0aCYmKGk9aC5jaGlsZHJlbi5sZW5ndGgpLCF0aGlzLmNoZWNrKFwibW92ZV9ub2RlXCIsZSxoLGkse2NvcmU6ITAsb3JpZ2luOm4saXNfbXVsdGk6XyYmXy5faWQmJl8uX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohX3x8IV8uX2lkfSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKGUucGFyZW50PT09aC5pZCl7Zm9yKGc9aC5jaGlsZHJlbi5jb25jYXQoKSwtMSE9PShmPVMuaW5BcnJheShlLmlkLGcpKSYmKGc9Uy52YWthdGEuYXJyYXlfcmVtb3ZlKGcsZiksZjxpJiZpLS0pLGY9W10scD0wLG09Zy5sZW5ndGg7cDxtO3ArKylmW2k8PXA/cCsxOnBdPWdbcF07ZltpXT1lLmlkLGguY2hpbGRyZW49Zix0aGlzLl9ub2RlX2NoYW5nZWQoaC5pZCksdGhpcy5yZWRyYXcoaC5pZD09PVMuanN0cmVlLnJvb3QpfWVsc2V7Zm9yKChmPWUuY2hpbGRyZW5fZC5jb25jYXQoKSkucHVzaChlLmlkKSxwPTAsbT1lLnBhcmVudHMubGVuZ3RoO3A8bTtwKyspe2ZvcihnPVtdLHY9MCxqPSh5PV8uX21vZGVsLmRhdGFbZS5wYXJlbnRzW3BdXS5jaGlsZHJlbl9kKS5sZW5ndGg7djxqO3YrKyktMT09PVMuaW5BcnJheSh5W3ZdLGYpJiZnLnB1c2goeVt2XSk7Xy5fbW9kZWwuZGF0YVtlLnBhcmVudHNbcF1dLmNoaWxkcmVuX2Q9Z31mb3IoXy5fbW9kZWwuZGF0YVtjXS5jaGlsZHJlbj1TLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbShfLl9tb2RlbC5kYXRhW2NdLmNoaWxkcmVuLGUuaWQpLHA9MCxtPWgucGFyZW50cy5sZW5ndGg7cDxtO3ArKyl0aGlzLl9tb2RlbC5kYXRhW2gucGFyZW50c1twXV0uY2hpbGRyZW5fZD10aGlzLl9tb2RlbC5kYXRhW2gucGFyZW50c1twXV0uY2hpbGRyZW5fZC5jb25jYXQoZik7Zm9yKGc9W10scD0wLG09aC5jaGlsZHJlbi5sZW5ndGg7cDxtO3ArKylnW2k8PXA/cCsxOnBdPWguY2hpbGRyZW5bcF07Zm9yKGdbaV09ZS5pZCxoLmNoaWxkcmVuPWcsaC5jaGlsZHJlbl9kLnB1c2goZS5pZCksaC5jaGlsZHJlbl9kPWguY2hpbGRyZW5fZC5jb25jYXQoZS5jaGlsZHJlbl9kKSxlLnBhcmVudD1oLmlkLChmPWgucGFyZW50cy5jb25jYXQoKSkudW5zaGlmdChoLmlkKSx5PWUucGFyZW50cy5sZW5ndGgsZj0oZS5wYXJlbnRzPWYpLmNvbmNhdCgpLHA9MCxtPWUuY2hpbGRyZW5fZC5sZW5ndGg7cDxtO3ArKyl0aGlzLl9tb2RlbC5kYXRhW2UuY2hpbGRyZW5fZFtwXV0ucGFyZW50cz10aGlzLl9tb2RlbC5kYXRhW2UuY2hpbGRyZW5fZFtwXV0ucGFyZW50cy5zbGljZSgwLC0xKnkpLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMuX21vZGVsLmRhdGFbZS5jaGlsZHJlbl9kW3BdXS5wYXJlbnRzLGYpO2MhPT1TLmpzdHJlZS5yb290JiZoLmlkIT09Uy5qc3RyZWUucm9vdHx8KHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwKSx0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhd3x8KHRoaXMuX25vZGVfY2hhbmdlZChjKSx0aGlzLl9ub2RlX2NoYW5nZWQoaC5pZCkpLGF8fHRoaXMucmVkcmF3KCl9cmV0dXJuIHImJnIuY2FsbCh0aGlzLGUsaCxpKSx0aGlzLnRyaWdnZXIoXCJtb3ZlX25vZGVcIix7bm9kZTplLHBhcmVudDpoLmlkLHBvc2l0aW9uOmksb2xkX3BhcmVudDpjLG9sZF9wb3NpdGlvbjpsLGlzX211bHRpOl8mJl8uX2lkJiZfLl9pZCE9PXRoaXMuX2lkLGlzX2ZvcmVpZ246IV98fCFfLl9pZCxvbGRfaW5zdGFuY2U6XyxuZXdfaW5zdGFuY2U6dGhpc30pLGUuaWR9LGNvcHlfbm9kZTpmdW5jdGlvbihlLHQsaSxyLHMsYSxuKXt2YXIgbyxkLGMsbCxoLF8sdSxnLGYscCxtO2lmKHQ9dGhpcy5nZXRfbm9kZSh0KSxpPWk9PT1FPzA6aSwhdClyZXR1cm4hMTtpZighaS50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJiFzJiYhdGhpcy5pc19sb2FkZWQodCkpcmV0dXJuIHRoaXMubG9hZF9ub2RlKHQsZnVuY3Rpb24oKXt0aGlzLmNvcHlfbm9kZShlLHQsaSxyLCEwLCExLG4pfSk7aWYoUy5pc0FycmF5KGUpKXtpZigxIT09ZS5sZW5ndGgpe2ZvcihvPTAsZD1lLmxlbmd0aDtvPGQ7bysrKShsPXRoaXMuY29weV9ub2RlKGVbb10sdCxpLHIscywhMCxuKSkmJih0PWwsaT1cImFmdGVyXCIpO3JldHVybiB0aGlzLnJlZHJhdygpLCEwfWU9ZVswXX1pZighKGU9ZSYmZS5pZD9lOnRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtzd2l0Y2goZz0oZS5wYXJlbnR8fFMuanN0cmVlLnJvb3QpLnRvU3RyaW5nKCksZj1pLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmdC5pZCE9PVMuanN0cmVlLnJvb3Q/dGhpcy5nZXRfbm9kZSh0LnBhcmVudCk6dCxtPSEocD1ufHwodGhpcy5fbW9kZWwuZGF0YVtlLmlkXT90aGlzOlMuanN0cmVlLnJlZmVyZW5jZShlLmlkKSkpfHwhcC5faWR8fHRoaXMuX2lkIT09cC5faWQscCYmcC5faWQmJihlPXAuX21vZGVsLmRhdGFbZS5pZF0pLHQuaWQ9PT1TLmpzdHJlZS5yb290JiYoXCJiZWZvcmVcIj09PWkmJihpPVwiZmlyc3RcIiksXCJhZnRlclwiPT09aSYmKGk9XCJsYXN0XCIpKSxpKXtjYXNlXCJiZWZvcmVcIjppPVMuaW5BcnJheSh0LmlkLGYuY2hpbGRyZW4pO2JyZWFrO2Nhc2VcImFmdGVyXCI6aT1TLmluQXJyYXkodC5pZCxmLmNoaWxkcmVuKSsxO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6aT0wO2JyZWFrO2Nhc2VcImxhc3RcIjppPWYuY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6aXx8KGk9MCl9aWYoaT5mLmNoaWxkcmVuLmxlbmd0aCYmKGk9Zi5jaGlsZHJlbi5sZW5ndGgpLCF0aGlzLmNoZWNrKFwiY29weV9ub2RlXCIsZSxmLGkse2NvcmU6ITAsb3JpZ2luOm4saXNfbXVsdGk6cCYmcC5faWQmJnAuX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohcHx8IXAuX2lkfSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKCEodT1wP3AuZ2V0X2pzb24oZSx7bm9faWQ6ITAsbm9fZGF0YTohMCxub19zdGF0ZTohMH0pOmUpKXJldHVybiExO2lmKCEwPT09dS5pZCYmZGVsZXRlIHUuaWQsISh1PXRoaXMuX3BhcnNlX21vZGVsX2Zyb21fanNvbih1LGYuaWQsZi5wYXJlbnRzLmNvbmNhdCgpKSkpcmV0dXJuITE7Zm9yKGw9dGhpcy5nZXRfbm9kZSh1KSxlJiZlLnN0YXRlJiYhMT09PWUuc3RhdGUubG9hZGVkJiYobC5zdGF0ZS5sb2FkZWQ9ITEpLChjPVtdKS5wdXNoKHUpLGM9Yy5jb25jYXQobC5jaGlsZHJlbl9kKSx0aGlzLnRyaWdnZXIoXCJtb2RlbFwiLHtub2RlczpjLHBhcmVudDpmLmlkfSksaD0wLF89Zi5wYXJlbnRzLmxlbmd0aDtoPF87aCsrKXRoaXMuX21vZGVsLmRhdGFbZi5wYXJlbnRzW2hdXS5jaGlsZHJlbl9kPXRoaXMuX21vZGVsLmRhdGFbZi5wYXJlbnRzW2hdXS5jaGlsZHJlbl9kLmNvbmNhdChjKTtmb3IoYz1bXSxoPTAsXz1mLmNoaWxkcmVuLmxlbmd0aDtoPF87aCsrKWNbaTw9aD9oKzE6aF09Zi5jaGlsZHJlbltoXTtyZXR1cm4gY1tpXT1sLmlkLGYuY2hpbGRyZW49YyxmLmNoaWxkcmVuX2QucHVzaChsLmlkKSxmLmNoaWxkcmVuX2Q9Zi5jaGlsZHJlbl9kLmNvbmNhdChsLmNoaWxkcmVuX2QpLGYuaWQ9PT1TLmpzdHJlZS5yb290JiYodGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITApLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3fHx0aGlzLl9ub2RlX2NoYW5nZWQoZi5pZCksYXx8dGhpcy5yZWRyYXcoZi5pZD09PVMuanN0cmVlLnJvb3QpLHImJnIuY2FsbCh0aGlzLGwsZixpKSx0aGlzLnRyaWdnZXIoXCJjb3B5X25vZGVcIix7bm9kZTpsLG9yaWdpbmFsOmUscGFyZW50OmYuaWQscG9zaXRpb246aSxvbGRfcGFyZW50Omcsb2xkX3Bvc2l0aW9uOnAmJnAuX2lkJiZnJiZwLl9tb2RlbC5kYXRhW2ddJiZwLl9tb2RlbC5kYXRhW2ddLmNoaWxkcmVuP1MuaW5BcnJheShlLmlkLHAuX21vZGVsLmRhdGFbZ10uY2hpbGRyZW4pOi0xLGlzX211bHRpOnAmJnAuX2lkJiZwLl9pZCE9PXRoaXMuX2lkLGlzX2ZvcmVpZ246IXB8fCFwLl9pZCxvbGRfaW5zdGFuY2U6cCxuZXdfaW5zdGFuY2U6dGhpc30pLGwuaWR9LGN1dDpmdW5jdGlvbihlKXtpZihlfHwoZT10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KCkpLFMuaXNBcnJheShlKXx8KGU9W2VdKSwhZS5sZW5ndGgpcmV0dXJuITE7dmFyIHQ9W10saSxyLHM7Zm9yKHI9MCxzPWUubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5nZXRfbm9kZShlW3JdKSkmJmkuaWQmJmkuaWQhPT1TLmpzdHJlZS5yb290JiZ0LnB1c2goaSk7aWYoIXQubGVuZ3RoKXJldHVybiExO2E9dCxuPVwibW92ZV9ub2RlXCIsKG89dGhpcykudHJpZ2dlcihcImN1dFwiLHtub2RlOmV9KX0sY29weTpmdW5jdGlvbihlKXtpZihlfHwoZT10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KCkpLFMuaXNBcnJheShlKXx8KGU9W2VdKSwhZS5sZW5ndGgpcmV0dXJuITE7dmFyIHQ9W10saSxyLHM7Zm9yKHI9MCxzPWUubGVuZ3RoO3I8cztyKyspKGk9dGhpcy5nZXRfbm9kZShlW3JdKSkmJmkuaWQmJmkuaWQhPT1TLmpzdHJlZS5yb290JiZ0LnB1c2goaSk7aWYoIXQubGVuZ3RoKXJldHVybiExO2E9dCxuPVwiY29weV9ub2RlXCIsKG89dGhpcykudHJpZ2dlcihcImNvcHlcIix7bm9kZTplfSl9LGdldF9idWZmZXI6ZnVuY3Rpb24oKXtyZXR1cm57bW9kZTpuLG5vZGU6YSxpbnN0Om99fSxjYW5fcGFzdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMSE9PW4mJiExIT09YX0scGFzdGU6ZnVuY3Rpb24oZSx0KXtpZighKChlPXRoaXMuZ2V0X25vZGUoZSkpJiZuJiZuLm1hdGNoKC9eKGNvcHlfbm9kZXxtb3ZlX25vZGUpJC8pJiZhKSlyZXR1cm4hMTt0aGlzW25dKGEsZSx0LCExLCExLCExLG8pJiZ0aGlzLnRyaWdnZXIoXCJwYXN0ZVwiLHtwYXJlbnQ6ZS5pZCxub2RlOmEsbW9kZTpufSksbz1uPWE9ITF9LGNsZWFyX2J1ZmZlcjpmdW5jdGlvbigpe289bj1hPSExLHRoaXMudHJpZ2dlcihcImNsZWFyX2J1ZmZlclwiKX0sZWRpdDpmdW5jdGlvbihhLGUsbil7dmFyIHQsaSxvLGQsYyxsLGgscixfLHU9ITE7cmV0dXJuISEoYT10aGlzLmdldF9ub2RlKGEpKSYmKHRoaXMuY2hlY2soXCJlZGl0XCIsYSx0aGlzLmdldF9wYXJlbnQoYSkpPyhfPWEsZT1cInN0cmluZ1wiPT10eXBlb2YgZT9lOmEudGV4dCx0aGlzLnNldF90ZXh0KGEsXCJcIiksYT10aGlzLl9vcGVuX3RvKGEpLF8udGV4dD1lLHQ9dGhpcy5fZGF0YS5jb3JlLnJ0bCxpPXRoaXMuZWxlbWVudC53aWR0aCgpLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPV8uaWQsbz1hLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZm9jdXMoKSxkPVMoXCI8c3Bhbj5cIiksYz1lLGw9UyhcIjxkaXYgLz5cIix7Y3NzOntwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiLTIwMHB4XCIsbGVmdDp0P1wiMHB4XCI6XCItMTAwMHB4XCIsdmlzaWJpbGl0eTpcImhpZGRlblwifX0pLmFwcGVuZFRvKGsuYm9keSksaD1TKFwiPGlucHV0IC8+XCIse3ZhbHVlOmMsY2xhc3M6XCJqc3RyZWUtcmVuYW1lLWlucHV0XCIsY3NzOntwYWRkaW5nOlwiMFwiLGJvcmRlcjpcIjFweCBzb2xpZCBzaWx2ZXJcIixcImJveC1zaXppbmdcIjpcImJvcmRlci1ib3hcIixkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsaGVpZ2h0OnRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQrXCJweFwiLGxpbmVIZWlnaHQ6dGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCtcInB4XCIsd2lkdGg6XCIxNTBweFwifSxibHVyOlMucHJveHkoZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCk7dmFyIHQsaT1kLmNoaWxkcmVuKFwiLmpzdHJlZS1yZW5hbWUtaW5wdXRcIikudmFsKCkscj10aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCxzO1wiXCI9PT1pJiYoaT1jKSxsLnJlbW92ZSgpLGQucmVwbGFjZVdpdGgobyksZC5yZW1vdmUoKSxjPXI/YzpTKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKFMucGFyc2VIVE1MKGMpKS5odG1sKCksYT10aGlzLmdldF9ub2RlKGEpLHRoaXMuc2V0X3RleHQoYSxjKSwocz0hIXRoaXMucmVuYW1lX25vZGUoYSxyP1MoXCI8ZGl2PjwvZGl2PlwiKS50ZXh0KGkpLnRleHQoKTpTKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKFMucGFyc2VIVE1MKGkpKS5odG1sKCkpKXx8dGhpcy5zZXRfdGV4dChhLGMpLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPV8uaWQsc2V0VGltZW91dChTLnByb3h5KGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRfbm9kZShfLmlkLCEwKTtlLmxlbmd0aCYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPV8uaWQsZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZvY3VzKCkpfSx0aGlzKSwwKSxuJiZuLmNhbGwodGhpcyxfLHMsdSksaD1udWxsfSx0aGlzKSxrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PWUud2hpY2g7Mjc9PT10JiYodT0hMCx0aGlzLnZhbHVlPWMpLDI3IT09dCYmMTMhPT10JiYzNyE9PXQmJjM4IT09dCYmMzkhPT10JiY0MCE9PXQmJjMyIT09dHx8ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwyNyE9PXQmJjEzIT09dHx8KGUucHJldmVudERlZmF1bHQoKSx0aGlzLmJsdXIoKSl9LGNsaWNrOmZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9LG1vdXNlZG93bjpmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSxrZXl1cDpmdW5jdGlvbihlKXtoLndpZHRoKE1hdGgubWluKGwudGV4dChcInBXXCIrdGhpcy52YWx1ZSkud2lkdGgoKSxpKSl9LGtleXByZXNzOmZ1bmN0aW9uKGUpe2lmKDEzPT09ZS53aGljaClyZXR1cm4hMX19KSxyPXtmb250RmFtaWx5Om8uY3NzKFwiZm9udEZhbWlseVwiKXx8XCJcIixmb250U2l6ZTpvLmNzcyhcImZvbnRTaXplXCIpfHxcIlwiLGZvbnRXZWlnaHQ6by5jc3MoXCJmb250V2VpZ2h0XCIpfHxcIlwiLGZvbnRTdHlsZTpvLmNzcyhcImZvbnRTdHlsZVwiKXx8XCJcIixmb250U3RyZXRjaDpvLmNzcyhcImZvbnRTdHJldGNoXCIpfHxcIlwiLGZvbnRWYXJpYW50Om8uY3NzKFwiZm9udFZhcmlhbnRcIil8fFwiXCIsbGV0dGVyU3BhY2luZzpvLmNzcyhcImxldHRlclNwYWNpbmdcIil8fFwiXCIsd29yZFNwYWNpbmc6by5jc3MoXCJ3b3JkU3BhY2luZ1wiKXx8XCJcIn0sZC5hdHRyKFwiY2xhc3NcIixvLmF0dHIoXCJjbGFzc1wiKSkuYXBwZW5kKG8uY29udGVudHMoKS5jbG9uZSgpKS5hcHBlbmQoaCksby5yZXBsYWNlV2l0aChkKSxsLmNzcyhyKSxoLmNzcyhyKS53aWR0aChNYXRoLm1pbihsLnRleHQoXCJwV1wiK2hbMF0udmFsdWUpLndpZHRoKCksaSkpWzBdLnNlbGVjdCgpLHZvaWQgUyhrKS5vbmUoXCJtb3VzZWRvd24uanN0cmVlIHRvdWNoc3RhcnQuanN0cmVlIGRuZF9zdGFydC52YWthdGFcIixmdW5jdGlvbihlKXtoJiZlLnRhcmdldCE9PWgmJlMoaCkuYmx1cigpfSkpOih0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSwhMSkpfSxzZXRfdGhlbWU6ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4hMTtpZighMD09PXQpe3ZhciBpPXRoaXMuc2V0dGluZ3MuY29yZS50aGVtZXMuZGlyO2l8fChpPVMuanN0cmVlLnBhdGgrXCIvdGhlbWVzXCIpLHQ9aStcIi9cIitlK1wiL3N0eWxlLmNzc1wifXQmJi0xPT09Uy5pbkFycmF5KHQscikmJihTKFwiaGVhZFwiKS5hcHBlbmQoJzxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiJyt0KydcIiB0eXBlPVwidGV4dC9jc3NcIiAvPicpLHIucHVzaCh0KSksdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lKSx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWU9ZSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtXCIrZSksdGhpcy5lbGVtZW50W3RoaXMuc2V0dGluZ3MuY29yZS50aGVtZXMucmVzcG9uc2l2ZT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzdHJlZS1cIitlK1wiLXJlc3BvbnNpdmVcIiksdGhpcy50cmlnZ2VyKFwic2V0X3RoZW1lXCIse3RoZW1lOmV9KX0sZ2V0X3RoZW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZX0sc2V0X3RoZW1lX3ZhcmlhbnQ6ZnVuY3Rpb24oZSl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50JiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lK1wiLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudCksKHRoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudD1lKSYmdGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZStcIi1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQpfSxnZXRfdGhlbWVfdmFyaWFudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnR9LHNob3dfc3RyaXBlczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1zdHJpcGVkXCIpLHRoaXMudHJpZ2dlcihcInNob3dfc3RyaXBlc1wiKX0saGlkZV9zdHJpcGVzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLXN0cmlwZWRcIiksdGhpcy50cmlnZ2VyKFwiaGlkZV9zdHJpcGVzXCIpfSx0b2dnbGVfc3RyaXBlczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz90aGlzLmhpZGVfc3RyaXBlcygpOnRoaXMuc2hvd19zdHJpcGVzKCl9LHNob3dfZG90czpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1kb3RzXCIpLHRoaXMudHJpZ2dlcihcInNob3dfZG90c1wiKX0saGlkZV9kb3RzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5kb3RzPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWRvdHNcIiksdGhpcy50cmlnZ2VyKFwiaGlkZV9kb3RzXCIpfSx0b2dnbGVfZG90czpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz90aGlzLmhpZGVfZG90cygpOnRoaXMuc2hvd19kb3RzKCl9LHNob3dfaWNvbnM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW5vLWljb25zXCIpLHRoaXMudHJpZ2dlcihcInNob3dfaWNvbnNcIil9LGhpZGVfaWNvbnM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWljb25zXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfaWNvbnNcIil9LHRvZ2dsZV9pY29uczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuaWNvbnM/dGhpcy5oaWRlX2ljb25zKCk6dGhpcy5zaG93X2ljb25zKCl9LHNob3dfZWxsaXBzaXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLWVsbGlwc2lzXCIpLHRoaXMudHJpZ2dlcihcInNob3dfZWxsaXBzaXNcIil9LGhpZGVfZWxsaXBzaXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLWVsbGlwc2lzXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfZWxsaXBzaXNcIil9LHRvZ2dsZV9lbGxpcHNpczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZWxsaXBzaXM/dGhpcy5oaWRlX2VsbGlwc2lzKCk6dGhpcy5zaG93X2VsbGlwc2lzKCl9LHNldF9pY29uOmZ1bmN0aW9uKGUsdCl7dmFyIGkscixzLGE7aWYoUy5pc0FycmF5KGUpKXtmb3IoaT0wLHI9KGU9ZS5zbGljZSgpKS5sZW5ndGg7aTxyO2krKyl0aGlzLnNldF9pY29uKGVbaV0sdCk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KSYmKGE9ZS5pY29uLGUuaWNvbj0hMD09PXR8fG51bGw9PT10fHx0PT09RXx8XCJcIj09PXR8fHQscz10aGlzLmdldF9ub2RlKGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKSwhMT09PXQ/KHMucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWN1c3RvbSBcIithKS5jc3MoXCJiYWNrZ3JvdW5kXCIsXCJcIikucmVtb3ZlQXR0cihcInJlbFwiKSx0aGlzLmhpZGVfaWNvbihlKSk6KCEwPT09dHx8bnVsbD09PXR8fHQ9PT1FfHxcIlwiPT09dD9zLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b20gXCIrYSkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLnJlbW92ZUF0dHIoXCJyZWxcIik6LTE9PT10LmluZGV4T2YoXCIvXCIpJiYtMT09PXQuaW5kZXhPZihcIi5cIik/KHMucmVtb3ZlQ2xhc3MoYSkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLHMuYWRkQ2xhc3ModCtcIiBqc3RyZWUtdGhlbWVpY29uLWN1c3RvbVwiKS5hdHRyKFwicmVsXCIsdCkpOihzLnJlbW92ZUNsYXNzKGEpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKSxzLmFkZENsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikuY3NzKFwiYmFja2dyb3VuZFwiLFwidXJsKCdcIit0K1wiJykgY2VudGVyIGNlbnRlciBuby1yZXBlYXRcIikuYXR0cihcInJlbFwiLHQpKSwhMT09PWEmJnRoaXMuc2hvd19pY29uKGUpKSwhMCl9LGdldF9pY29uOmZ1bmN0aW9uKGUpe3JldHVybiEoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdCkmJmUuaWNvbn0saGlkZV9pY29uOmZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoUy5pc0FycmF5KGUpKXtmb3IodD0wLGk9KGU9ZS5zbGljZSgpKS5sZW5ndGg7dDxpO3QrKyl0aGlzLmhpZGVfaWNvbihlW3RdKTtyZXR1cm4hMH1yZXR1cm4hKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZT09PVMuanN0cmVlLnJvb3QpJiYoZS5pY29uPSExLHRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLmFkZENsYXNzKFwianN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIiksITApfSxzaG93X2ljb246ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO2lmKFMuaXNBcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5zaG93X2ljb24oZVt0XSk7cmV0dXJuITB9cmV0dXJuISghKGU9dGhpcy5nZXRfbm9kZShlKSl8fGU9PT1TLmpzdHJlZS5yb290KSYmKHI9dGhpcy5nZXRfbm9kZShlLCEwKSxlLmljb249IXIubGVuZ3RofHxyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLXRoZW1laWNvblwiKS5hdHRyKFwicmVsXCIpLGUuaWNvbnx8KGUuaWNvbj0hMCksci5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKSwhMCl9fSxTLnZha2F0YT17fSxTLnZha2F0YS5hdHRyaWJ1dGVzPWZ1bmN0aW9uKGUsaSl7ZT1TKGUpWzBdO3ZhciByPWk/e306W107cmV0dXJuIGUmJmUuYXR0cmlidXRlcyYmUy5lYWNoKGUuYXR0cmlidXRlcyxmdW5jdGlvbihlLHQpey0xPT09Uy5pbkFycmF5KHQubmFtZS50b0xvd2VyQ2FzZSgpLFtcInN0eWxlXCIsXCJjb250ZW50ZWRpdGFibGVcIixcImhhc2ZvY3VzXCIsXCJ0YWJpbmRleFwiXSkmJm51bGwhPT10LnZhbHVlJiZcIlwiIT09Uy50cmltKHQudmFsdWUpJiYoaT9yW3QubmFtZV09dC52YWx1ZTpyLnB1c2godC5uYW1lKSl9KSxyfSxTLnZha2F0YS5hcnJheV91bmlxdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9W10saSxyLHMsYT17fTtmb3IoaT0wLHM9ZS5sZW5ndGg7aTxzO2krKylhW2VbaV1dPT09RSYmKHQucHVzaChlW2ldKSxhW2VbaV1dPSEwKTtyZXR1cm4gdH0sUy52YWthdGEuYXJyYXlfcmVtb3ZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3BsaWNlKHQsMSksZX0sUy52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW09ZnVuY3Rpb24oZSx0KXt2YXIgaT1TLmluQXJyYXkodCxlKTtyZXR1cm4tMSE9PWk/Uy52YWthdGEuYXJyYXlfcmVtb3ZlKGUsaSk6ZX0sUy52YWthdGEuYXJyYXlfZmlsdGVyPWZ1bmN0aW9uKGUsdCxpLHIscyl7aWYoZS5maWx0ZXIpcmV0dXJuIGUuZmlsdGVyKHQsaSk7Zm9yKHMgaW4gcj1bXSxlKX5+cytcIlwiPT1zK1wiXCImJjA8PXMmJnQuY2FsbChpLGVbc10sK3MsZSkmJnIucHVzaChlW3NdKTtyZXR1cm4gcn0sUy5qc3RyZWUucGx1Z2lucy5jaGFuZ2VkPWZ1bmN0aW9uKGUsYSl7dmFyIG49W107dGhpcy50cmlnZ2VyPWZ1bmN0aW9uKGUsdCl7dmFyIGkscjtpZih0fHwodD17fSksXCJjaGFuZ2VkXCI9PT1lLnJlcGxhY2UoXCIuanN0cmVlXCIsXCJcIikpe3QuY2hhbmdlZD17c2VsZWN0ZWQ6W10sZGVzZWxlY3RlZDpbXX07dmFyIHM9e307Zm9yKGk9MCxyPW4ubGVuZ3RoO2k8cjtpKyspc1tuW2ldXT0xO2ZvcihpPTAscj10LnNlbGVjdGVkLmxlbmd0aDtpPHI7aSsrKXNbdC5zZWxlY3RlZFtpXV0/c1t0LnNlbGVjdGVkW2ldXT0yOnQuY2hhbmdlZC5zZWxlY3RlZC5wdXNoKHQuc2VsZWN0ZWRbaV0pO2ZvcihpPTAscj1uLmxlbmd0aDtpPHI7aSsrKTE9PT1zW25baV1dJiZ0LmNoYW5nZWQuZGVzZWxlY3RlZC5wdXNoKG5baV0pO249dC5zZWxlY3RlZC5zbGljZSgpfWEudHJpZ2dlci5jYWxsKHRoaXMsZSx0KX0sdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG49W10sYS5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O3ZhciBjPWsuY3JlYXRlRWxlbWVudChcIklcIiksXyx1LGcsZCxsLGgsZixpO2MuY2xhc3NOYW1lPVwianN0cmVlLWljb24ganN0cmVlLWNoZWNrYm94XCIsYy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksUy5qc3RyZWUuZGVmYXVsdHMuY2hlY2tib3g9e3Zpc2libGU6ITAsdGhyZWVfc3RhdGU6ITAsd2hvbGVfbm9kZTohMCxrZWVwX3NlbGVjdGVkX3N0eWxlOiEwLGNhc2NhZGU6XCJcIix0aWVfc2VsZWN0aW9uOiEwLGNhc2NhZGVfdG9fZGlzYWJsZWQ6ITAsY2FzY2FkZV90b19oaWRkZW46ITB9LFMuanN0cmVlLnBsdWdpbnMuY2hlY2tib3g9ZnVuY3Rpb24oZSxkKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtkLmJpbmQuY2FsbCh0aGlzKSx0aGlzLl9kYXRhLmNoZWNrYm94LnV0bz0hMSx0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPVtdLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGhyZWVfc3RhdGUmJih0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGU9XCJ1cCtkb3duK3VuZGV0ZXJtaW5lZFwiKSx0aGlzLmVsZW1lbnQub24oXCJpbml0LmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNoZWNrYm94LnZpc2libGU9dGhpcy5zZXR0aW5ncy5jaGVja2JveC52aXNpYmxlLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gua2VlcF9zZWxlY3RlZF9zdHlsZXx8dGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLWNoZWNrYm94LW5vLWNsaWNrZWRcIiksdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtc2VsZWN0aW9uXCIpfSx0aGlzKSkub24oXCJsb2FkaW5nLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oKXt0aGlzW3RoaXMuX2RhdGEuY2hlY2tib3gudmlzaWJsZT9cInNob3dfY2hlY2tib3hlc1wiOlwiaGlkZV9jaGVja2JveGVzXCJdKCl9LHRoaXMpKSwtMSE9PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidW5kZXRlcm1pbmVkXCIpJiZ0aGlzLmVsZW1lbnQub24oXCJjaGFuZ2VkLmpzdHJlZSB1bmNoZWNrX25vZGUuanN0cmVlIGNoZWNrX25vZGUuanN0cmVlIHVuY2hlY2tfYWxsLmpzdHJlZSBjaGVja19hbGwuanN0cmVlIG1vdmVfbm9kZS5qc3RyZWUgY29weV9ub2RlLmpzdHJlZSByZWRyYXcuanN0cmVlIG9wZW5fbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jaGVja2JveC51dG8mJmNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byksdGhpcy5fZGF0YS5jaGVja2JveC51dG89c2V0VGltZW91dChTLnByb3h5KHRoaXMuX3VuZGV0ZXJtaW5lZCx0aGlzKSw1MCl9LHRoaXMpKSx0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb258fHRoaXMuZWxlbWVudC5vbihcIm1vZGVsLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9tb2RlbC5kYXRhLHI9aVt0LnBhcmVudF0scz10Lm5vZGVzLGEsbjtmb3IoYT0wLG49cy5sZW5ndGg7YTxuO2ErKylpW3NbYV1dLnN0YXRlLmNoZWNrZWQ9aVtzW2FdXS5zdGF0ZS5jaGVja2VkfHxpW3NbYV1dLm9yaWdpbmFsJiZpW3NbYV1dLm9yaWdpbmFsLnN0YXRlJiZpW3NbYV1dLm9yaWdpbmFsLnN0YXRlLmNoZWNrZWQsaVtzW2FdXS5zdGF0ZS5jaGVja2VkJiZ0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2goc1thXSl9LHRoaXMpKSwtMT09PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidXBcIikmJi0xPT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJkb3duXCIpfHx0aGlzLmVsZW1lbnQub24oXCJtb2RlbC5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyPWlbdC5wYXJlbnRdLHM9dC5ub2RlcyxhPVtdLG4sbyxkLGMsbCxoLF89dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLHU9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uO2lmKC0xIT09Xy5pbmRleE9mKFwiZG93blwiKSlpZihyLnN0YXRlW3U/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKG89MCxkPXMubGVuZ3RoO288ZDtvKyspaVtzW29dXS5zdGF0ZVt1P1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITA7dGhpcy5fZGF0YVt1P1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ9dGhpcy5fZGF0YVt1P1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQuY29uY2F0KHMpfWVsc2UgZm9yKG89MCxkPXMubGVuZ3RoO288ZDtvKyspaWYoaVtzW29dXS5zdGF0ZVt1P1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl0pe2ZvcihjPTAsbD1pW3Nbb11dLmNoaWxkcmVuX2QubGVuZ3RoO2M8bDtjKyspaVtpW3Nbb11dLmNoaWxkcmVuX2RbY11dLnN0YXRlW3U/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMDt0aGlzLl9kYXRhW3U/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD10aGlzLl9kYXRhW3U/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5jb25jYXQoaVtzW29dXS5jaGlsZHJlbl9kKX1pZigtMSE9PV8uaW5kZXhPZihcInVwXCIpKXtmb3Iobz0wLGQ9ci5jaGlsZHJlbl9kLmxlbmd0aDtvPGQ7bysrKWlbci5jaGlsZHJlbl9kW29dXS5jaGlsZHJlbi5sZW5ndGh8fGEucHVzaChpW3IuY2hpbGRyZW5fZFtvXV0ucGFyZW50KTtmb3IoYz0wLGw9KGE9Uy52YWthdGEuYXJyYXlfdW5pcXVlKGEpKS5sZW5ndGg7YzxsO2MrKyl7cj1pW2FbY11dO3doaWxlKHImJnIuaWQhPT1TLmpzdHJlZS5yb290KXtmb3Iobz1uPTAsZD1yLmNoaWxkcmVuLmxlbmd0aDtvPGQ7bysrKW4rPWlbci5jaGlsZHJlbltvXV0uc3RhdGVbdT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKG4hPT1kKWJyZWFrO3Iuc3RhdGVbdT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLHRoaXMuX2RhdGFbdT9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLnB1c2goci5pZCksKGg9dGhpcy5nZXRfbm9kZShyLCEwKSkmJmgubGVuZ3RoJiZoLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3ModT9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxyPXRoaXMuZ2V0X25vZGUoci5wYXJlbnQpfX19dGhpcy5fZGF0YVt1P1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ9Uy52YWthdGEuYXJyYXlfdW5pcXVlKHRoaXMuX2RhdGFbdT9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkKX0sdGhpcykpLm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj9cInNlbGVjdF9ub2RlLmpzdHJlZVwiOlwiY2hlY2tfbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPXQubm9kZSxzPXRoaXMuX21vZGVsLmRhdGEsYT10aGlzLmdldF9ub2RlKHIucGFyZW50KSxuLG8sZCxjLGw9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGg9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLF89e30sdT10aGlzLl9kYXRhW2g/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZDtmb3Iobj0wLG89dS5sZW5ndGg7bjxvO24rKylfW3Vbbl1dPSEwO2lmKC0xIT09bC5pbmRleE9mKFwiZG93blwiKSl7dmFyIGc9dGhpcy5fY2FzY2FkZV9uZXdfY2hlY2tlZF9zdGF0ZShyLmlkLCEwKSxmPXIuY2hpbGRyZW5fZC5jb25jYXQoci5pZCk7Zm9yKG49MCxvPWYubGVuZ3RoO248bztuKyspLTE8Zy5pbmRleE9mKGZbbl0pP19bZltuXV09ITA6ZGVsZXRlIF9bZltuXV19aWYoLTEhPT1sLmluZGV4T2YoXCJ1cFwiKSl3aGlsZShhJiZhLmlkIT09Uy5qc3RyZWUucm9vdCl7Zm9yKG49ZD0wLG89YS5jaGlsZHJlbi5sZW5ndGg7bjxvO24rKylkKz1zW2EuY2hpbGRyZW5bbl1dLnN0YXRlW2g/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZihkIT09bylicmVhazthLnN0YXRlW2g/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCxfW2EuaWRdPSEwLChjPXRoaXMuZ2V0X25vZGUoYSwhMCkpJiZjLmxlbmd0aCYmYy5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKGg/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksYT10aGlzLmdldF9ub2RlKGEucGFyZW50KX1mb3IobiBpbiB1PVtdLF8pXy5oYXNPd25Qcm9wZXJ0eShuKSYmdS5wdXNoKG4pO3RoaXMuX2RhdGFbaD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPXV9LHRoaXMpKS5vbih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/XCJkZXNlbGVjdF9hbGwuanN0cmVlXCI6XCJ1bmNoZWNrX2FsbC5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5nZXRfbm9kZShTLmpzdHJlZS5yb290KSxyPXRoaXMuX21vZGVsLmRhdGEscyxhLG47Zm9yKHM9MCxhPWkuY2hpbGRyZW5fZC5sZW5ndGg7czxhO3MrKykobj1yW2kuY2hpbGRyZW5fZFtzXV0pJiZuLm9yaWdpbmFsJiZuLm9yaWdpbmFsLnN0YXRlJiZuLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmKG4ub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkPSExKX0sdGhpcykpLm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj9cImRlc2VsZWN0X25vZGUuanN0cmVlXCI6XCJ1bmNoZWNrX25vZGUuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMscj10Lm5vZGUscz10aGlzLmdldF9ub2RlKHIsITApLGEsbixvLGQ9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGM9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLGw9dGhpcy5fZGF0YVtjP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQsaD17fSxfPVtdLHU9ci5jaGlsZHJlbl9kLmNvbmNhdChyLmlkKTtpZigtMSE9PWQuaW5kZXhPZihcImRvd25cIikpe3ZhciBnPXRoaXMuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUoci5pZCwhMSk7bD1sLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4tMT09PXUuaW5kZXhPZihlKXx8LTE8Zy5pbmRleE9mKGUpfSl9aWYoLTEhPT1kLmluZGV4T2YoXCJ1cFwiKSYmLTE9PT1sLmluZGV4T2Yoci5pZCkpe2ZvcihhPTAsbj1yLnBhcmVudHMubGVuZ3RoO2E8bjthKyspKG89dGhpcy5fbW9kZWwuZGF0YVtyLnBhcmVudHNbYV1dKS5zdGF0ZVtjP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITEsbyYmby5vcmlnaW5hbCYmby5vcmlnaW5hbC5zdGF0ZSYmby5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihvLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD0hMSksKG89dGhpcy5nZXRfbm9kZShyLnBhcmVudHNbYV0sITApKSYmby5sZW5ndGgmJm8uYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhjP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpO2w9bC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1yLnBhcmVudHMuaW5kZXhPZihlKX0pfXRoaXMuX2RhdGFbYz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPWx9LHRoaXMpKSwtMSE9PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidXBcIikmJnRoaXMuZWxlbWVudC5vbihcImRlbGV0ZV9ub2RlLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmdldF9ub2RlKHQucGFyZW50KSxyPXRoaXMuX21vZGVsLmRhdGEscyxhLG4sbyxkPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjt3aGlsZShpJiZpLmlkIT09Uy5qc3RyZWUucm9vdCYmIWkuc3RhdGVbZD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3Iocz1uPTAsYT1pLmNoaWxkcmVuLmxlbmd0aDtzPGE7cysrKW4rPXJbaS5jaGlsZHJlbltzXV0uc3RhdGVbZD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdO2lmKCEoMDxhJiZuPT09YSkpYnJlYWs7aS5zdGF0ZVtkP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITAsdGhpcy5fZGF0YVtkP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQucHVzaChpLmlkKSwobz10aGlzLmdldF9ub2RlKGksITApKSYmby5sZW5ndGgmJm8uYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhkP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpLGk9dGhpcy5nZXRfbm9kZShpLnBhcmVudCl9fSx0aGlzKSkub24oXCJtb3ZlX25vZGUuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3ZhciBpPXQuaXNfbXVsdGkscj10Lm9sZF9wYXJlbnQscz10aGlzLmdldF9ub2RlKHQucGFyZW50KSxhPXRoaXMuX21vZGVsLmRhdGEsbixvLGQsYyxsLGg9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uO2lmKCFpKXtuPXRoaXMuZ2V0X25vZGUocik7d2hpbGUobiYmbi5pZCE9PVMuanN0cmVlLnJvb3QmJiFuLnN0YXRlW2g/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKGQ9bz0wLGM9bi5jaGlsZHJlbi5sZW5ndGg7ZDxjO2QrKylvKz1hW24uY2hpbGRyZW5bZF1dLnN0YXRlW2g/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZighKDA8YyYmbz09PWMpKWJyZWFrO24uc3RhdGVbaD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwLHRoaXMuX2RhdGFbaD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLnB1c2gobi5pZCksKGw9dGhpcy5nZXRfbm9kZShuLCEwKSkmJmwubGVuZ3RoJiZsLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoaD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSxuPXRoaXMuZ2V0X25vZGUobi5wYXJlbnQpfX1uPXM7d2hpbGUobiYmbi5pZCE9PVMuanN0cmVlLnJvb3Qpe2ZvcihkPW89MCxjPW4uY2hpbGRyZW4ubGVuZ3RoO2Q8YztkKyspbys9YVtuLmNoaWxkcmVuW2RdXS5zdGF0ZVtoP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYobz09PWMpbi5zdGF0ZVtoP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fChuLnN0YXRlW2g/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW2g/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKG4uaWQpLChsPXRoaXMuZ2V0X25vZGUobiwhMCkpJiZsLmxlbmd0aCYmbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKGg/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIikpO2Vsc2V7aWYoIW4uc3RhdGVbaD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKWJyZWFrO24uc3RhdGVbaD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLHRoaXMuX2RhdGFbaD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPVMudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGFbaD9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLG4uaWQpLChsPXRoaXMuZ2V0X25vZGUobiwhMCkpJiZsLmxlbmd0aCYmbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKGg/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIil9bj10aGlzLmdldF9ub2RlKG4ucGFyZW50KX19LHRoaXMpKX0sdGhpcy5nZXRfdW5kZXRlcm1pbmVkPWZ1bmN0aW9uKGUpe2lmKC0xPT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1bmRldGVybWluZWRcIikpcmV0dXJuW107dmFyIGkscixzLGEsbj17fSxvPXRoaXMuX21vZGVsLmRhdGEsdD10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sZD10aGlzLl9kYXRhW3Q/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxjPVtdLGw9dGhpcyxoPVtdO2ZvcihpPTAscj1kLmxlbmd0aDtpPHI7aSsrKWlmKG9bZFtpXV0mJm9bZFtpXV0ucGFyZW50cylmb3Iocz0wLGE9b1tkW2ldXS5wYXJlbnRzLmxlbmd0aDtzPGE7cysrKXtpZihuW29bZFtpXV0ucGFyZW50c1tzXV0hPT1FKWJyZWFrO29bZFtpXV0ucGFyZW50c1tzXSE9PVMuanN0cmVlLnJvb3QmJihuW29bZFtpXV0ucGFyZW50c1tzXV09ITAsYy5wdXNoKG9bZFtpXV0ucGFyZW50c1tzXSkpfWZvcih0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtY2xvc2VkXCIpLm5vdChcIjpoYXMoLmpzdHJlZS1jaGlsZHJlbilcIikuZWFjaChmdW5jdGlvbigpe3ZhciBlPWwuZ2V0X25vZGUodGhpcyksdDtpZihlKWlmKGUuc3RhdGUubG9hZGVkKXtmb3IoaT0wLHI9ZS5jaGlsZHJlbl9kLmxlbmd0aDtpPHI7aSsrKWlmKCEodD1vW2UuY2hpbGRyZW5fZFtpXV0pLnN0YXRlLmxvYWRlZCYmdC5vcmlnaW5hbCYmdC5vcmlnaW5hbC5zdGF0ZSYmdC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJiEwPT09dC5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQpZm9yKG5bdC5pZF09PT1FJiZ0LmlkIT09Uy5qc3RyZWUucm9vdCYmKG5bdC5pZF09ITAsYy5wdXNoKHQuaWQpKSxzPTAsYT10LnBhcmVudHMubGVuZ3RoO3M8YTtzKyspblt0LnBhcmVudHNbc11dPT09RSYmdC5wYXJlbnRzW3NdIT09Uy5qc3RyZWUucm9vdCYmKG5bdC5wYXJlbnRzW3NdXT0hMCxjLnB1c2godC5wYXJlbnRzW3NdKSl9ZWxzZSBpZihlLm9yaWdpbmFsJiZlLm9yaWdpbmFsLnN0YXRlJiZlLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmITA9PT1lLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZClmb3IobltlLmlkXT09PUUmJmUuaWQhPT1TLmpzdHJlZS5yb290JiYobltlLmlkXT0hMCxjLnB1c2goZS5pZCkpLHM9MCxhPWUucGFyZW50cy5sZW5ndGg7czxhO3MrKyluW2UucGFyZW50c1tzXV09PT1FJiZlLnBhcmVudHNbc10hPT1TLmpzdHJlZS5yb290JiYobltlLnBhcmVudHNbc11dPSEwLGMucHVzaChlLnBhcmVudHNbc10pKX0pLGk9MCxyPWMubGVuZ3RoO2k8cjtpKyspb1tjW2ldXS5zdGF0ZVt0P1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fGgucHVzaChlP29bY1tpXV06Y1tpXSk7cmV0dXJuIGh9LHRoaXMuX3VuZGV0ZXJtaW5lZD1mdW5jdGlvbigpe2lmKG51bGwhPT10aGlzLmVsZW1lbnQpe3ZhciBlPXRoaXMuZ2V0X3VuZGV0ZXJtaW5lZCghMSksdCxpLHI7Zm9yKHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS11bmRldGVybWluZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtdW5kZXRlcm1pbmVkXCIpLHQ9MCxpPWUubGVuZ3RoO3Q8aTt0KyspKHI9dGhpcy5nZXRfbm9kZShlW3RdLCEwKSkmJnIubGVuZ3RoJiZyLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuY2hpbGRyZW4oXCIuanN0cmVlLWNoZWNrYm94XCIpLmFkZENsYXNzKFwianN0cmVlLXVuZGV0ZXJtaW5lZFwiKX19LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7aWYoZT1kLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIHMsYSxuPW51bGwsbz1udWxsO2ZvcihzPTAsYT1lLmNoaWxkTm9kZXMubGVuZ3RoO3M8YTtzKyspaWYoZS5jaGlsZE5vZGVzW3NdJiZlLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lJiYtMSE9PWUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUuaW5kZXhPZihcImpzdHJlZS1hbmNob3JcIikpe249ZS5jaGlsZE5vZGVzW3NdO2JyZWFrfW4mJighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiZ0aGlzLl9tb2RlbC5kYXRhW2UuaWRdLnN0YXRlLmNoZWNrZWQmJihuLmNsYXNzTmFtZSs9XCIganN0cmVlLWNoZWNrZWRcIiksbz1jLmNsb25lTm9kZSghMSksdGhpcy5fbW9kZWwuZGF0YVtlLmlkXS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCYmKG8uY2xhc3NOYW1lKz1cIiBqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksbi5pbnNlcnRCZWZvcmUobyxuLmNoaWxkTm9kZXNbMF0pKX1yZXR1cm4gaXx8LTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVuZGV0ZXJtaW5lZFwiKXx8KHRoaXMuX2RhdGEuY2hlY2tib3gudXRvJiZjbGVhclRpbWVvdXQodGhpcy5fZGF0YS5jaGVja2JveC51dG8pLHRoaXMuX2RhdGEuY2hlY2tib3gudXRvPXNldFRpbWVvdXQoUy5wcm94eSh0aGlzLl91bmRldGVybWluZWQsdGhpcyksNTApKSxlfSx0aGlzLnNob3dfY2hlY2tib3hlcz1mdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuY2hlY2tib3hlcz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1jaGVja2JveGVzXCIpfSx0aGlzLmhpZGVfY2hlY2tib3hlcz1mdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuY2hlY2tib3hlcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1jaGVja2JveGVzXCIpfSx0aGlzLnRvZ2dsZV9jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzP3RoaXMuaGlkZV9jaGVja2JveGVzKCk6dGhpcy5zaG93X2NoZWNrYm94ZXMoKX0sdGhpcy5pc191bmRldGVybWluZWQ9ZnVuY3Rpb24oZSl7ZT10aGlzLmdldF9ub2RlKGUpO3ZhciB0PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSxpLHIscz10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sYT10aGlzLl9kYXRhW3M/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCxuPXRoaXMuX21vZGVsLmRhdGE7aWYoIWV8fCEwPT09ZS5zdGF0ZVtzP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fC0xPT09dC5pbmRleE9mKFwidW5kZXRlcm1pbmVkXCIpfHwtMT09PXQuaW5kZXhPZihcImRvd25cIikmJi0xPT09dC5pbmRleE9mKFwidXBcIikpcmV0dXJuITE7aWYoIWUuc3RhdGUubG9hZGVkJiYhMD09PWUub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKXJldHVybiEwO2ZvcihpPTAscj1lLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspaWYoLTEhPT1TLmluQXJyYXkoZS5jaGlsZHJlbl9kW2ldLGEpfHwhbltlLmNoaWxkcmVuX2RbaV1dLnN0YXRlLmxvYWRlZCYmbltlLmNoaWxkcmVuX2RbaV1dLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZClyZXR1cm4hMDtyZXR1cm4hMX0sdGhpcy5kaXNhYmxlX2NoZWNrYm94PWZ1bmN0aW9uKGUpe3ZhciB0LGkscjtpZihTLmlzQXJyYXkoZSkpe2Zvcih0PTAsaT0oZT1lLnNsaWNlKCkpLmxlbmd0aDt0PGk7dCsrKXRoaXMuZGlzYWJsZV9jaGVja2JveChlW3RdKTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KXJldHVybiExO3I9dGhpcy5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkfHwoZS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZD0hMCxyJiZyLmxlbmd0aCYmci5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGVja2JveFwiKS5hZGRDbGFzcyhcImpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKSx0aGlzLnRyaWdnZXIoXCJkaXNhYmxlX2NoZWNrYm94XCIse25vZGU6ZX0pKX0sdGhpcy5lbmFibGVfY2hlY2tib3g9ZnVuY3Rpb24oZSl7dmFyIHQsaSxyO2lmKFMuaXNBcnJheShlKSl7Zm9yKHQ9MCxpPShlPWUuc2xpY2UoKSkubGVuZ3RoO3Q8aTt0KyspdGhpcy5lbmFibGVfY2hlY2tib3goZVt0XSk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtyPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZCYmKGUuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQ9ITEsciYmci5sZW5ndGgmJnIuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksdGhpcy50cmlnZ2VyKFwiZW5hYmxlX2NoZWNrYm94XCIse25vZGU6ZX0pKX0sdGhpcy5hY3RpdmF0ZV9ub2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIVModC50YXJnZXQpLmhhc0NsYXNzKFwianN0cmVlLWNoZWNrYm94LWRpc2FibGVkXCIpJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC53aG9sZV9ub2RlfHxTKHQudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveFwiKSkmJih0LmN0cmxLZXk9ITApLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8IXRoaXMuc2V0dGluZ3MuY2hlY2tib3gud2hvbGVfbm9kZSYmIVModC50YXJnZXQpLmhhc0NsYXNzKFwianN0cmVlLWNoZWNrYm94XCIpP2QuYWN0aXZhdGVfbm9kZS5jYWxsKHRoaXMsZSx0KTohdGhpcy5pc19kaXNhYmxlZChlKSYmKHRoaXMuaXNfY2hlY2tlZChlKT90aGlzLnVuY2hlY2tfbm9kZShlLHQpOnRoaXMuY2hlY2tfbm9kZShlLHQpLHZvaWQgdGhpcy50cmlnZ2VyKFwiYWN0aXZhdGVfbm9kZVwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZSl9KSkpfSx0aGlzLl9jYXNjYWRlX25ld19jaGVja2VkX3N0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcyxyPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixzPXRoaXMuX21vZGVsLmRhdGFbZV0sYT1bXSxuPVtdLG8sZCxjO2lmKCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGVfdG9fZGlzYWJsZWQmJnMuc3RhdGUuZGlzYWJsZWR8fCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGVfdG9faGlkZGVuJiZzLnN0YXRlLmhpZGRlbiljPXRoaXMuZ2V0X2NoZWNrZWRfZGVzY2VuZGFudHMoZSkscy5zdGF0ZVtyP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl0mJmMucHVzaChzLmlkKSxhPWEuY29uY2F0KGMpO2Vsc2V7aWYocy5jaGlsZHJlbilmb3Iobz0wLGQ9cy5jaGlsZHJlbi5sZW5ndGg7bzxkO28rKyl7dmFyIGw9cy5jaGlsZHJlbltvXTtjPWkuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUobCx0KSxhPWEuY29uY2F0KGMpLC0xPGMuaW5kZXhPZihsKSYmbi5wdXNoKGwpfXZhciBoPWkuZ2V0X25vZGUocywhMCksXz0wPG4ubGVuZ3RoJiZuLmxlbmd0aDxzLmNoaWxkcmVuLmxlbmd0aDtzLm9yaWdpbmFsJiZzLm9yaWdpbmFsLnN0YXRlJiZzLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmKHMub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkPV8pLF8/KHMuc3RhdGVbcj9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLGguYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhyP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpKTp0JiZuLmxlbmd0aD09PXMuY2hpbGRyZW4ubGVuZ3RoPyhzLnN0YXRlW3I/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT10LGEucHVzaChzLmlkKSxoLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3Mocj9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSk6KHMuc3RhdGVbcj9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLGguYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhyP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpKX1yZXR1cm4gYX0sdGhpcy5nZXRfY2hlY2tlZF9kZXNjZW5kYW50cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dC5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLHI7cmV0dXJuIHQuX21vZGVsLmRhdGFbZV0uY2hpbGRyZW5fZC5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX21vZGVsLmRhdGFbZV0uc3RhdGVbaT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdfSl9LHRoaXMuY2hlY2tfbm9kZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5zZWxlY3Rfbm9kZShlLCExLCEwLHQpO3ZhciBpLHIscyxhO2lmKFMuaXNBcnJheShlKSl7Zm9yKHI9MCxzPShlPWUuc2xpY2UoKSkubGVuZ3RoO3I8cztyKyspdGhpcy5jaGVja19ub2RlKGVbcl0sdCk7cmV0dXJuITB9aWYoIShlPXRoaXMuZ2V0X25vZGUoZSkpfHxlLmlkPT09Uy5qc3RyZWUucm9vdClyZXR1cm4hMTtpPXRoaXMuZ2V0X25vZGUoZSwhMCksZS5zdGF0ZS5jaGVja2VkfHwoZS5zdGF0ZS5jaGVja2VkPSEwLHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQucHVzaChlLmlkKSxpJiZpLmxlbmd0aCYmaS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWNoZWNrZWRcIiksdGhpcy50cmlnZ2VyKFwiY2hlY2tfbm9kZVwiLHtub2RlOmUsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxldmVudDp0fSkpfSx0aGlzLnVuY2hlY2tfbm9kZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5kZXNlbGVjdF9ub2RlKGUsITEsdCk7dmFyIGkscixzO2lmKFMuaXNBcnJheShlKSl7Zm9yKGk9MCxyPShlPWUuc2xpY2UoKSkubGVuZ3RoO2k8cjtpKyspdGhpcy51bmNoZWNrX25vZGUoZVtpXSx0KTtyZXR1cm4hMH1pZighKGU9dGhpcy5nZXRfbm9kZShlKSl8fGUuaWQ9PT1TLmpzdHJlZS5yb290KXJldHVybiExO3M9dGhpcy5nZXRfbm9kZShlLCEwKSxlLnN0YXRlLmNoZWNrZWQmJihlLnN0YXRlLmNoZWNrZWQ9ITEsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1TLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGUuaWQpLHMubGVuZ3RoJiZzLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJ1bmNoZWNrX25vZGVcIix7bm9kZTplLHNlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZXZlbnQ6dH0pKX0sdGhpcy5jaGVja19hbGw9ZnVuY3Rpb24oKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuc2VsZWN0X2FsbCgpO3ZhciBlPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQuY29uY2F0KFtdKSx0LGk7Zm9yKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9dGhpcy5fbW9kZWwuZGF0YVtTLmpzdHJlZS5yb290XS5jaGlsZHJlbl9kLmNvbmNhdCgpLHQ9MCxpPXRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQubGVuZ3RoO3Q8aTt0KyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW3RdXSYmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFt0XV0uc3RhdGUuY2hlY2tlZD0hMCk7dGhpcy5yZWRyYXcoITApLHRoaXMudHJpZ2dlcihcImNoZWNrX2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkfSl9LHRoaXMudW5jaGVja19hbGw9ZnVuY3Rpb24oKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZGVzZWxlY3RfYWxsKCk7dmFyIGU9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5jb25jYXQoW10pLHQsaTtmb3IodD0wLGk9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5sZW5ndGg7dDxpO3QrKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbdF1dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW3RdXS5zdGF0ZS5jaGVja2VkPSExKTt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPVtdLHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1jaGVja2VkXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNoZWNrZWRcIiksdGhpcy50cmlnZ2VyKFwidW5jaGVja19hbGxcIix7c2VsZWN0ZWQ6dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxub2RlOmV9KX0sdGhpcy5pc19jaGVja2VkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24/dGhpcy5pc19zZWxlY3RlZChlKTohKCEoZT10aGlzLmdldF9ub2RlKGUpKXx8ZS5pZD09PVMuanN0cmVlLnJvb3QpJiZlLnN0YXRlLmNoZWNrZWR9LHRoaXMuZ2V0X2NoZWNrZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj90aGlzLmdldF9zZWxlY3RlZChlKTplP1MubWFwKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsUy5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0sdGhpcykpOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWR9LHRoaXMuZ2V0X3RvcF9jaGVja2VkPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5nZXRfdG9wX3NlbGVjdGVkKGUpO3ZhciB0PXRoaXMuZ2V0X2NoZWNrZWQoITApLGk9e30scixzLGEsbjtmb3Iocj0wLHM9dC5sZW5ndGg7cjxzO3IrKylpW3Rbcl0uaWRdPXRbcl07Zm9yKHI9MCxzPXQubGVuZ3RoO3I8cztyKyspZm9yKGE9MCxuPXRbcl0uY2hpbGRyZW5fZC5sZW5ndGg7YTxuO2ErKylpW3Rbcl0uY2hpbGRyZW5fZFthXV0mJmRlbGV0ZSBpW3Rbcl0uY2hpbGRyZW5fZFthXV07Zm9yKHIgaW4gdD1bXSxpKWkuaGFzT3duUHJvcGVydHkocikmJnQucHVzaChyKTtyZXR1cm4gZT9TLm1hcCh0LFMucHJveHkoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoZSl9LHRoaXMpKTp0fSx0aGlzLmdldF9ib3R0b21fY2hlY2tlZD1mdW5jdGlvbihlKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZ2V0X2JvdHRvbV9zZWxlY3RlZChlKTt2YXIgdD10aGlzLmdldF9jaGVja2VkKCEwKSxpPVtdLHIscztmb3Iocj0wLHM9dC5sZW5ndGg7cjxzO3IrKyl0W3JdLmNoaWxkcmVuLmxlbmd0aHx8aS5wdXNoKHRbcl0uaWQpO3JldHVybiBlP1MubWFwKGksUy5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShlKX0sdGhpcykpOml9LHRoaXMubG9hZF9ub2RlPWZ1bmN0aW9uKGUsdCl7dmFyIGkscixzLGEsbixvO2lmKCFTLmlzQXJyYXkoZSkmJiF0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJihvPXRoaXMuZ2V0X25vZGUoZSkpJiZvLnN0YXRlLmxvYWRlZClmb3IoaT0wLHI9by5jaGlsZHJlbl9kLmxlbmd0aDtpPHI7aSsrKXRoaXMuX21vZGVsLmRhdGFbby5jaGlsZHJlbl9kW2ldXS5zdGF0ZS5jaGVja2VkJiYobj0hMCx0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkPVMudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsby5jaGlsZHJlbl9kW2ldKSk7cmV0dXJuIGQubG9hZF9ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdGhpcy5nZXRfc3RhdGU9ZnVuY3Rpb24oKXt2YXIgZT1kLmdldF9zdGF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8KGUuY2hlY2tib3g9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5zbGljZSgpKSxlfSx0aGlzLnNldF9zdGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBpPWQuc2V0X3N0YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihpJiZlLmNoZWNrYm94KXtpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXt0aGlzLnVuY2hlY2tfYWxsKCk7dmFyIHI9dGhpcztTLmVhY2goZS5jaGVja2JveCxmdW5jdGlvbihlLHQpe3IuY2hlY2tfbm9kZSh0KX0pfXJldHVybiBkZWxldGUgZS5jaGVja2JveCx0aGlzLnNldF9zdGF0ZShlLHQpLCExfXJldHVybiBpfSx0aGlzLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1bXSksZC5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LFMuanN0cmVlLmRlZmF1bHRzLmNvbmRpdGlvbmFsc2VsZWN0PWZ1bmN0aW9uKCl7cmV0dXJuITB9LFMuanN0cmVlLnBsdWdpbnMuY29uZGl0aW9uYWxzZWxlY3Q9ZnVuY3Rpb24oZSxpKXt0aGlzLmFjdGl2YXRlX25vZGU9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnNldHRpbmdzLmNvbmRpdGlvbmFsc2VsZWN0LmNhbGwodGhpcyx0aGlzLmdldF9ub2RlKGUpLHQpKXJldHVybiBpLmFjdGl2YXRlX25vZGUuY2FsbCh0aGlzLGUsdCl9fSxTLmpzdHJlZS5kZWZhdWx0cy5jb250ZXh0bWVudT17c2VsZWN0X25vZGU6ITAsc2hvd19hdF9ub2RlOiEwLGl0ZW1zOmZ1bmN0aW9uKGUsdCl7cmV0dXJue2NyZWF0ZTp7c2VwYXJhdG9yX2JlZm9yZTohMSxzZXBhcmF0b3JfYWZ0ZXI6ITAsX2Rpc2FibGVkOiExLGxhYmVsOlwiQ3JlYXRlXCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciBpPVMuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksdD1pLmdldF9ub2RlKGUucmVmZXJlbmNlKTtpLmNyZWF0ZV9ub2RlKHQse30sXCJsYXN0XCIsZnVuY3Rpb24odCl7dHJ5e2kuZWRpdCh0KX1jYXRjaChlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5lZGl0KHQpfSwwKX19KX19LHJlbmFtZTp7c2VwYXJhdG9yX2JlZm9yZTohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsX2Rpc2FibGVkOiExLGxhYmVsOlwiUmVuYW1lXCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PVMuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksaT10LmdldF9ub2RlKGUucmVmZXJlbmNlKTt0LmVkaXQoaSl9fSxyZW1vdmU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsaWNvbjohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsX2Rpc2FibGVkOiExLGxhYmVsOlwiRGVsZXRlXCIsYWN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0PVMuanN0cmVlLnJlZmVyZW5jZShlLnJlZmVyZW5jZSksaT10LmdldF9ub2RlKGUucmVmZXJlbmNlKTt0LmlzX3NlbGVjdGVkKGkpP3QuZGVsZXRlX25vZGUodC5nZXRfc2VsZWN0ZWQoKSk6dC5kZWxldGVfbm9kZShpKX19LGNjcDp7c2VwYXJhdG9yX2JlZm9yZTohMCxpY29uOiExLHNlcGFyYXRvcl9hZnRlcjohMSxsYWJlbDpcIkVkaXRcIixhY3Rpb246ITEsc3VibWVudTp7Y3V0OntzZXBhcmF0b3JfYmVmb3JlOiExLHNlcGFyYXRvcl9hZnRlcjohMSxsYWJlbDpcIkN1dFwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1TLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGk9dC5nZXRfbm9kZShlLnJlZmVyZW5jZSk7dC5pc19zZWxlY3RlZChpKT90LmN1dCh0LmdldF90b3Bfc2VsZWN0ZWQoKSk6dC5jdXQoaSl9fSxjb3B5OntzZXBhcmF0b3JfYmVmb3JlOiExLGljb246ITEsc2VwYXJhdG9yX2FmdGVyOiExLGxhYmVsOlwiQ29weVwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1TLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGk9dC5nZXRfbm9kZShlLnJlZmVyZW5jZSk7dC5pc19zZWxlY3RlZChpKT90LmNvcHkodC5nZXRfdG9wX3NlbGVjdGVkKCkpOnQuY29weShpKX19LHBhc3RlOntzZXBhcmF0b3JfYmVmb3JlOiExLGljb246ITEsX2Rpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiFTLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLmNhbl9wYXN0ZSgpfSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJQYXN0ZVwiLGFjdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1TLmpzdHJlZS5yZWZlcmVuY2UoZS5yZWZlcmVuY2UpLGk9dC5nZXRfbm9kZShlLnJlZmVyZW5jZSk7dC5wYXN0ZShpKX19fX19fX0sUy5qc3RyZWUucGx1Z2lucy5jb250ZXh0bWVudT1mdW5jdGlvbihlLGEpe3RoaXMuYmluZD1mdW5jdGlvbigpe2EuYmluZC5jYWxsKHRoaXMpO3ZhciBpPTAscj1udWxsLHQsczt0aGlzLmVsZW1lbnQub24oXCJpbml0LmpzdHJlZSBsb2FkaW5nLmpzdHJlZSByZWFkeS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtY29udGV4dG1lbnVcIil9LHRoaXMpKS5vbihcImNvbnRleHRtZW51LmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7XCJpbnB1dFwiIT09ZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGk9ZS5jdHJsS2V5PytuZXcgRGF0ZTowLCh0fHxyKSYmKGk9K25ldyBEYXRlKzFlNCksciYmY2xlYXJUaW1lb3V0KHIpLHRoaXMuaXNfbG9hZGluZyhlLmN1cnJlbnRUYXJnZXQpfHx0aGlzLnNob3dfY29udGV4dG1lbnUoZS5jdXJyZW50VGFyZ2V0LGUucGFnZVgsZS5wYWdlWSxlKSl9LHRoaXMpKS5vbihcImNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixTLnByb3h5KGZ1bmN0aW9uKGUpe3RoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZSYmKCFpfHwyNTA8K25ldyBEYXRlLWkpJiZTLnZha2F0YS5jb250ZXh0LmhpZGUoKSxpPTB9LHRoaXMpKS5vbihcInRvdWNoc3RhcnQuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGUpe2Uub3JpZ2luYWxFdmVudCYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJih0PWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYLHM9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkscj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UyhlLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoXCJjb250ZXh0bWVudVwiLCEwKX0sNzUwKSl9KS5vbihcInRvdWNobW92ZS52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSl7ciYmZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKDEwPE1hdGguYWJzKHQtZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgpfHwxMDxNYXRoLmFicyhzLWUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKSkmJihjbGVhclRpbWVvdXQociksUy52YWthdGEuY29udGV4dC5oaWRlKCkpfSkub24oXCJ0b3VjaGVuZC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSl7ciYmY2xlYXJUaW1lb3V0KHIpfSksUyhrKS5vbihcImNvbnRleHRfaGlkZS52YWthdGEuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3RoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZT0hMSxTKHQucmVmZXJlbmNlKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jb250ZXh0XCIpfSx0aGlzKSl9LHRoaXMudGVhcmRvd249ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvbnRleHRtZW51LnZpc2libGUmJlMudmFrYXRhLmNvbnRleHQuaGlkZSgpLGEudGVhcmRvd24uY2FsbCh0aGlzKX0sdGhpcy5zaG93X2NvbnRleHRtZW51PWZ1bmN0aW9uKHQsaSxyLGUpe2lmKCEodD10aGlzLmdldF9ub2RlKHQpKXx8dC5pZD09PVMuanN0cmVlLnJvb3QpcmV0dXJuITE7dmFyIHM9dGhpcy5zZXR0aW5ncy5jb250ZXh0bWVudSxhLG49dGhpcy5nZXRfbm9kZSh0LCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLG89ITEsZD0hMTsocy5zaG93X2F0X25vZGV8fGk9PT1FfHxyPT09RSkmJihvPW4ub2Zmc2V0KCksaT1vLmxlZnQscj1vLnRvcCt0aGlzLl9kYXRhLmNvcmUubGlfaGVpZ2h0KSx0aGlzLnNldHRpbmdzLmNvbnRleHRtZW51LnNlbGVjdF9ub2RlJiYhdGhpcy5pc19zZWxlY3RlZCh0KSYmdGhpcy5hY3RpdmF0ZV9ub2RlKHQsZSksZD1zLml0ZW1zLFMuaXNGdW5jdGlvbihkKSYmKGQ9ZC5jYWxsKHRoaXMsdCxTLnByb3h5KGZ1bmN0aW9uKGUpe3RoaXMuX3Nob3dfY29udGV4dG1lbnUodCxpLHIsZSl9LHRoaXMpKSksUy5pc1BsYWluT2JqZWN0KGQpJiZ0aGlzLl9zaG93X2NvbnRleHRtZW51KHQsaSxyLGQpfSx0aGlzLl9zaG93X2NvbnRleHRtZW51PWZ1bmN0aW9uKGUsdCxpLHIpe3ZhciBzLGE9dGhpcy5nZXRfbm9kZShlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpO1Moaykub25lKFwiY29udGV4dF9zaG93LnZha2F0YS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dmFyIGk9XCJqc3RyZWUtY29udGV4dG1lbnUganN0cmVlLVwiK3RoaXMuZ2V0X3RoZW1lKCkrXCItY29udGV4dG1lbnVcIjtTKHQuZWxlbWVudCkuYWRkQ2xhc3MoaSksYS5hZGRDbGFzcyhcImpzdHJlZS1jb250ZXh0XCIpfSx0aGlzKSksdGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlPSEwLFMudmFrYXRhLmNvbnRleHQuc2hvdyhhLHt4OnQseTppfSxyKSx0aGlzLnRyaWdnZXIoXCJzaG93X2NvbnRleHRtZW51XCIse25vZGU6ZSx4OnQseTppfSl9fSxnPXtlbGVtZW50OnU9ITEscmVmZXJlbmNlOiExLHBvc2l0aW9uX3g6MCxwb3NpdGlvbl95OjAsaXRlbXM6W10saHRtbDpcIlwiLGlzX3Zpc2libGU6ITF9LChfPVMpLnZha2F0YS5jb250ZXh0PXtzZXR0aW5nczp7aGlkZV9vbm1vdXNlbGVhdmU6MCxpY29uczohMH0sX3RyaWdnZXI6ZnVuY3Rpb24oZSl7XyhrKS50cmlnZ2VySGFuZGxlcihcImNvbnRleHRfXCIrZStcIi52YWthdGFcIix7cmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50LHBvc2l0aW9uOnt4OmcucG9zaXRpb25feCx5OmcucG9zaXRpb25feX19KX0sX2V4ZWN1dGU6ZnVuY3Rpb24oZSl7cmV0dXJuISghKGU9Zy5pdGVtc1tlXSl8fGUuX2Rpc2FibGVkJiYoIV8uaXNGdW5jdGlvbihlLl9kaXNhYmxlZCl8fGUuX2Rpc2FibGVkKHtpdGVtOmUscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50fSkpfHwhZS5hY3Rpb24pJiZlLmFjdGlvbi5jYWxsKG51bGwse2l0ZW06ZSxyZWZlcmVuY2U6Zy5yZWZlcmVuY2UsZWxlbWVudDpnLmVsZW1lbnQscG9zaXRpb246e3g6Zy5wb3NpdGlvbl94LHk6Zy5wb3NpdGlvbl95fX0pfSxfcGFyc2U6ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4hMTt0fHwoZy5odG1sPVwiXCIsZy5pdGVtcz1bXSk7dmFyIGk9XCJcIixyPSExLHM7cmV0dXJuIHQmJihpKz1cIjx1bD5cIiksXy5lYWNoKGUsZnVuY3Rpb24oZSx0KXtpZighdClyZXR1cm4hMDtnLml0ZW1zLnB1c2godCksIXImJnQuc2VwYXJhdG9yX2JlZm9yZSYmKGkrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhfLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J3N0eWxlPVwibWFyZ2luLWxlZnQ6MHB4O1wiJykrXCI+JiMxNjA7PC9hPjwvbGk+XCIpLHI9ITEsaSs9XCI8bGkgY2xhc3M9J1wiKyh0Ll9jbGFzc3x8XCJcIikrKCEwPT09dC5fZGlzYWJsZWR8fF8uaXNGdW5jdGlvbih0Ll9kaXNhYmxlZCkmJnQuX2Rpc2FibGVkKHtpdGVtOnQscmVmZXJlbmNlOmcucmVmZXJlbmNlLGVsZW1lbnQ6Zy5lbGVtZW50fSk/XCIgdmFrYXRhLWNvbnRleHRtZW51LWRpc2FibGVkIFwiOlwiXCIpK1wiJyBcIisodC5zaG9ydGN1dD9cIiBkYXRhLXNob3J0Y3V0PSdcIit0LnNob3J0Y3V0K1wiJyBcIjpcIlwiKStcIj5cIixpKz1cIjxhIGhyZWY9JyMnIHJlbD0nXCIrKGcuaXRlbXMubGVuZ3RoLTEpK1wiJyBcIisodC50aXRsZT9cInRpdGxlPSdcIit0LnRpdGxlK1wiJ1wiOlwiXCIpK1wiPlwiLF8udmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaWNvbnMmJihpKz1cIjxpIFwiLHQuaWNvbiYmKC0xIT09dC5pY29uLmluZGV4T2YoXCIvXCIpfHwtMSE9PXQuaWNvbi5pbmRleE9mKFwiLlwiKT9pKz1cIiBzdHlsZT0nYmFja2dyb3VuZDp1cmwoXFxcIlwiK3QuaWNvbitcIlxcXCIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0JyBcIjppKz1cIiBjbGFzcz0nXCIrdC5pY29uK1wiJyBcIiksaSs9XCI+PC9pPjxzcGFuIGNsYXNzPSd2YWthdGEtY29udGV4dG1lbnUtc2VwJz4mIzE2MDs8L3NwYW4+XCIpLGkrPShfLmlzRnVuY3Rpb24odC5sYWJlbCk/dC5sYWJlbCh7aXRlbTplLHJlZmVyZW5jZTpnLnJlZmVyZW5jZSxlbGVtZW50OmcuZWxlbWVudH0pOnQubGFiZWwpKyh0LnNob3J0Y3V0PycgPHNwYW4gY2xhc3M9XCJ2YWthdGEtY29udGV4dG1lbnUtc2hvcnRjdXQgdmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0LScrdC5zaG9ydGN1dCsnXCI+JysodC5zaG9ydGN1dF9sYWJlbHx8XCJcIikrXCI8L3NwYW4+XCI6XCJcIikrXCI8L2E+XCIsdC5zdWJtZW51JiYocz1fLnZha2F0YS5jb250ZXh0Ll9wYXJzZSh0LnN1Ym1lbnUsITApKSYmKGkrPXMpLGkrPVwiPC9saT5cIix0LnNlcGFyYXRvcl9hZnRlciYmKGkrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhfLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J3N0eWxlPVwibWFyZ2luLWxlZnQ6MHB4O1wiJykrXCI+JiMxNjA7PC9hPjwvbGk+XCIscj0hMCl9KSxpPWkucmVwbGFjZSgvPGxpIGNsYXNzXFw9J3Zha2F0YS1jb250ZXh0LXNlcGFyYXRvcidcXD48XFwvbGlcXD4kLyxcIlwiKSx0JiYoaSs9XCI8L3VsPlwiKSx0fHwoZy5odG1sPWksXy52YWthdGEuY29udGV4dC5fdHJpZ2dlcihcInBhcnNlXCIpKSwxMDxpLmxlbmd0aCYmaX0sX3Nob3dfc3VibWVudTpmdW5jdGlvbihlKXtpZigoZT1fKGUpKS5sZW5ndGgmJmUuY2hpbGRyZW4oXCJ1bFwiKS5sZW5ndGgpe3ZhciB0PWUuY2hpbGRyZW4oXCJ1bFwiKSxpPWUub2Zmc2V0KCkubGVmdCxyPWkrZS5vdXRlcldpZHRoKCkscz1lLm9mZnNldCgpLnRvcCxhPXQud2lkdGgoKSxuPXQuaGVpZ2h0KCksbz1fKHdpbmRvdykud2lkdGgoKStfKHdpbmRvdykuc2Nyb2xsTGVmdCgpLGQ9Xyh3aW5kb3cpLmhlaWdodCgpK18od2luZG93KS5zY3JvbGxUb3AoKTt1P2Vbci0oYSsxMCtlLm91dGVyV2lkdGgoKSk8MD9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcInZha2F0YS1jb250ZXh0LWxlZnRcIik6ZVtvPHIrYSYmby1yPGk/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJ2YWthdGEtY29udGV4dC1yaWdodFwiKSxkPHMrbisxMCYmdC5jc3MoXCJib3R0b21cIixcIi0xcHhcIiksZS5oYXNDbGFzcyhcInZha2F0YS1jb250ZXh0LXJpZ2h0XCIpP2k8YSYmdC5jc3MoXCJtYXJnaW4tcmlnaHRcIixpLWEpOm8tcjxhJiZ0LmNzcyhcIm1hcmdpbi1sZWZ0XCIsby1yLWEpLHQuc2hvdygpfX0sc2hvdzpmdW5jdGlvbihlLHQsaSl7dmFyIHIscyxhLG4sbyxkLGMsbCxoPSEwO3N3aXRjaChnLmVsZW1lbnQmJmcuZWxlbWVudC5sZW5ndGgmJmcuZWxlbWVudC53aWR0aChcIlwiKSwhMCl7Y2FzZSF0JiYhZTpyZXR1cm4hMTtjYXNlISF0JiYhIWU6Zy5yZWZlcmVuY2U9ZSxnLnBvc2l0aW9uX3g9dC54LGcucG9zaXRpb25feT10Lnk7YnJlYWs7Y2FzZSF0JiYhIWU6cj0oZy5yZWZlcmVuY2U9ZSkub2Zmc2V0KCksZy5wb3NpdGlvbl94PXIubGVmdCtlLm91dGVySGVpZ2h0KCksZy5wb3NpdGlvbl95PXIudG9wO2JyZWFrO2Nhc2UhIXQmJiFlOmcucG9zaXRpb25feD10LngsZy5wb3NpdGlvbl95PXQueX1lJiYhaSYmXyhlKS5kYXRhKFwidmFrYXRhX2NvbnRleHRtZW51XCIpJiYoaT1fKGUpLmRhdGEoXCJ2YWthdGFfY29udGV4dG1lbnVcIikpLF8udmFrYXRhLmNvbnRleHQuX3BhcnNlKGkpJiZnLmVsZW1lbnQuaHRtbChnLmh0bWwpLGcuaXRlbXMubGVuZ3RoJiYoZy5lbGVtZW50LmFwcGVuZFRvKGsuYm9keSkscz1nLmVsZW1lbnQsYT1nLnBvc2l0aW9uX3gsbj1nLnBvc2l0aW9uX3ksbz1zLndpZHRoKCksZD1zLmhlaWdodCgpLGM9Xyh3aW5kb3cpLndpZHRoKCkrXyh3aW5kb3cpLnNjcm9sbExlZnQoKSxsPV8od2luZG93KS5oZWlnaHQoKStfKHdpbmRvdykuc2Nyb2xsVG9wKCksdSYmKGEtPXMub3V0ZXJXaWR0aCgpLV8oZSkub3V0ZXJXaWR0aCgpKTxfKHdpbmRvdykuc2Nyb2xsTGVmdCgpKzIwJiYoYT1fKHdpbmRvdykuc2Nyb2xsTGVmdCgpKzIwKSxjPGErbysyMCYmKGE9Yy0obysyMCkpLGw8bitkKzIwJiYobj1sLShkKzIwKSksZy5lbGVtZW50LmNzcyh7bGVmdDphLHRvcDpufSkuc2hvdygpLmZpbmQoXCJhXCIpLmZpcnN0KCkuZm9jdXMoKS5wYXJlbnQoKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLGcuaXNfdmlzaWJsZT0hMCxfLnZha2F0YS5jb250ZXh0Ll90cmlnZ2VyKFwic2hvd1wiKSl9LGhpZGU6ZnVuY3Rpb24oKXtnLmlzX3Zpc2libGUmJihnLmVsZW1lbnQuaGlkZSgpLmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCkuZmluZChcIjpmb2N1c1wiKS5ibHVyKCkuZW5kKCkuZGV0YWNoKCksZy5pc192aXNpYmxlPSExLF8udmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJoaWRlXCIpKX19LF8oZnVuY3Rpb24oKXt1PVwicnRsXCI9PT1fKGsuYm9keSkuY3NzKFwiZGlyZWN0aW9uXCIpO3ZhciBpPSExO2cuZWxlbWVudD1fKFwiPHVsIGNsYXNzPSd2YWthdGEtY29udGV4dCc+PC91bD5cIiksZy5lbGVtZW50Lm9uKFwibW91c2VlbnRlclwiLFwibGlcIixmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLF8uY29udGFpbnModGhpcyxlLnJlbGF0ZWRUYXJnZXQpfHwoaSYmY2xlYXJUaW1lb3V0KGkpLGcuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuZW5kKCksXyh0aGlzKS5zaWJsaW5ncygpLmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCkuZW5kKCkucGFyZW50c1VudGlsKFwiLnZha2F0YS1jb250ZXh0XCIsXCJsaVwiKS5hZGRCYWNrKCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKSxfLnZha2F0YS5jb250ZXh0Ll9zaG93X3N1Ym1lbnUodGhpcykpfSkub24oXCJtb3VzZWxlYXZlXCIsXCJsaVwiLGZ1bmN0aW9uKGUpe18uY29udGFpbnModGhpcyxlLnJlbGF0ZWRUYXJnZXQpfHxfKHRoaXMpLmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikuYWRkQmFjaygpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIil9KS5vbihcIm1vdXNlbGVhdmVcIixmdW5jdGlvbihlKXt2YXIgdDtfKHRoaXMpLmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKSxfLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmhpZGVfb25tb3VzZWxlYXZlJiYoaT1zZXRUaW1lb3V0KCh0PXRoaXMsZnVuY3Rpb24oKXtfLnZha2F0YS5jb250ZXh0LmhpZGUoKX0pLF8udmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaGlkZV9vbm1vdXNlbGVhdmUpKX0pLm9uKFwiY2xpY2tcIixcImFcIixmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksXyh0aGlzKS5ibHVyKCkucGFyZW50KCkuaGFzQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1kaXNhYmxlZFwiKXx8ITE9PT1fLnZha2F0YS5jb250ZXh0Ll9leGVjdXRlKF8odGhpcykuYXR0cihcInJlbFwiKSl8fF8udmFrYXRhLmNvbnRleHQuaGlkZSgpfSkub24oXCJrZXlkb3duXCIsXCJhXCIsZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDtzd2l0Y2goZS53aGljaCl7Y2FzZSAxMzpjYXNlIDMyOmUudHlwZT1cImNsaWNrXCIsZS5wcmV2ZW50RGVmYXVsdCgpLF8oZS5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKGUpO2JyZWFrO2Nhc2UgMzc6Zy5pc192aXNpYmxlJiYoZy5lbGVtZW50LmZpbmQoXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikubGFzdCgpLmNsb3Nlc3QoXCJsaVwiKS5maXJzdCgpLmZpbmQoXCJ1bFwiKS5oaWRlKCkuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmVuZCgpLmVuZCgpLmNoaWxkcmVuKFwiYVwiKS5mb2N1cygpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDM4OmcuaXNfdmlzaWJsZSYmKCh0PWcuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikucHJldkFsbChcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpKS5sZW5ndGh8fCh0PWcuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmxhc3QoKSksdC5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmNoaWxkcmVuKFwiYVwiKS5mb2N1cygpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDM5OmcuaXNfdmlzaWJsZSYmKGcuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmxhc3QoKS5jaGlsZHJlbihcInVsXCIpLnNob3coKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikuZm9jdXMoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSA0MDpnLmlzX3Zpc2libGUmJigodD1nLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLm5leHRBbGwoXCJsaTpub3QoLnZha2F0YS1jb250ZXh0LXNlcGFyYXRvcilcIikuZmlyc3QoKSkubGVuZ3RofHwodD1nLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpKSx0LmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuY2hpbGRyZW4oXCJhXCIpLmZvY3VzKCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCkpO2JyZWFrO2Nhc2UgMjc6Xy52YWthdGEuY29udGV4dC5oaWRlKCksZS5wcmV2ZW50RGVmYXVsdCgpfX0pLm9uKFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD1nLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dG1lbnUtc2hvcnRjdXQtXCIrZS53aGljaCkucGFyZW50KCk7dC5wYXJlbnQoKS5ub3QoXCIudmFrYXRhLWNvbnRleHQtZGlzYWJsZWRcIikmJnQuY2xpY2soKX0pLF8oaykub24oXCJtb3VzZWRvd24udmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe2cuaXNfdmlzaWJsZSYmZy5lbGVtZW50WzBdIT09ZS50YXJnZXQmJiFfLmNvbnRhaW5zKGcuZWxlbWVudFswXSxlLnRhcmdldCkmJl8udmFrYXRhLmNvbnRleHQuaGlkZSgpfSkub24oXCJjb250ZXh0X3Nob3cudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7Zy5lbGVtZW50LmZpbmQoXCJsaTpoYXModWwpXCIpLmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LXBhcmVudFwiKSx1JiZnLmVsZW1lbnQuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ydGxcIikuY3NzKFwiZGlyZWN0aW9uXCIsXCJydGxcIiksZy5lbGVtZW50LmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCl9KX0pLFMuanN0cmVlLmRlZmF1bHRzLmRuZD17Y29weTohMCxvcGVuX3RpbWVvdXQ6NTAwLGlzX2RyYWdnYWJsZTohMCxjaGVja193aGlsZV9kcmFnZ2luZzohMCxhbHdheXNfY29weTohMSxpbnNpZGVfcG9zOjAsZHJhZ19zZWxlY3Rpb246ITAsdG91Y2g6ITAsbGFyZ2VfZHJvcF90YXJnZXQ6ITEsbGFyZ2VfZHJhZ190YXJnZXQ6ITEsdXNlX2h0bWw1OiExfSxTLmpzdHJlZS5wbHVnaW5zLmRuZD1mdW5jdGlvbihlLG8pe3RoaXMuaW5pdD1mdW5jdGlvbihlLHQpe28uaW5pdC5jYWxsKHRoaXMsZSx0KSx0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDU9dGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1JiZcImRyYWdnYWJsZVwiaW4gay5jcmVhdGVFbGVtZW50KFwic3BhblwiKX0sdGhpcy5iaW5kPWZ1bmN0aW9uKCl7by5iaW5kLmNhbGwodGhpcyksdGhpcy5lbGVtZW50Lm9uKHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNT9cImRyYWdzdGFydC5qc3RyZWVcIjpcIm1vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWVcIix0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldD9cIi5qc3RyZWUtbm9kZVwiOlwiLmpzdHJlZS1hbmNob3JcIixTLnByb3h5KGZ1bmN0aW9uKGUpe2lmKHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0JiZTKGUudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpWzBdIT09ZS5jdXJyZW50VGFyZ2V0KXJldHVybiEwO2lmKFwidG91Y2hzdGFydFwiPT09ZS50eXBlJiYoIXRoaXMuc2V0dGluZ3MuZG5kLnRvdWNofHxcInNlbGVjdGVkXCI9PT10aGlzLnNldHRpbmdzLmRuZC50b3VjaCYmIVMoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuaGFzQ2xhc3MoXCJqc3RyZWUtY2xpY2tlZFwiKSkpcmV0dXJuITA7dmFyIHQ9dGhpcy5nZXRfbm9kZShlLnRhcmdldCksaT10aGlzLmlzX3NlbGVjdGVkKHQpJiZ0aGlzLnNldHRpbmdzLmRuZC5kcmFnX3NlbGVjdGlvbj90aGlzLmdldF90b3Bfc2VsZWN0ZWQoKS5sZW5ndGg6MSxyPTE8aT9pK1wiIFwiK3RoaXMuZ2V0X3N0cmluZyhcIm5vZGVzXCIpOnRoaXMuZ2V0X3RleHQoZS5jdXJyZW50VGFyZ2V0KTtpZih0aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCYmKHI9Uy52YWthdGEuaHRtbC5lc2NhcGUocikpLHQmJnQuaWQmJnQuaWQhPT1TLmpzdHJlZS5yb290JiYoMT09PWUud2hpY2h8fFwidG91Y2hzdGFydFwiPT09ZS50eXBlfHxcImRyYWdzdGFydFwiPT09ZS50eXBlKSYmKCEwPT09dGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlfHxTLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlKSYmdGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlLmNhbGwodGhpcywxPGk/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCEwKTpbdF0sZSkpKXtpZihkPXtqc3RyZWU6ITAsb3JpZ2luOnRoaXMsb2JqOnRoaXMuZ2V0X25vZGUodCwhMCksbm9kZXM6MTxpP3RoaXMuZ2V0X3RvcF9zZWxlY3RlZCgpOlt0LmlkXX0sbD1lLmN1cnJlbnRUYXJnZXQsIXRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSlyZXR1cm4gdGhpcy5lbGVtZW50LnRyaWdnZXIoXCJtb3VzZWRvd24uanN0cmVlXCIpLFMudmFrYXRhLmRuZC5zdGFydChlLGQsJzxkaXYgaWQ9XCJqc3RyZWUtZG5kXCIgY2xhc3M9XCJqc3RyZWUtJyt0aGlzLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIit0aGlzLmdldF90aGVtZSgpK1wiLVwiK3RoaXMuZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisodGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKydcIj48aSBjbGFzcz1cImpzdHJlZS1pY29uIGpzdHJlZS1lclwiPjwvaT4nK3IrJzxpbnMgY2xhc3M9XCJqc3RyZWUtY29weVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPis8L2lucz48L2Rpdj4nKTtTLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdGFydFwiLGUse2hlbHBlcjpTKCksZWxlbWVudDpsLGRhdGE6ZH0pfX0sdGhpcykpLHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSYmdGhpcy5lbGVtZW50Lm9uKFwiZHJhZ292ZXIuanN0cmVlXCIsZnVuY3Rpb24oZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKSxTLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJtb3ZlXCIsZSx7aGVscGVyOlMoKSxlbGVtZW50OmwsZGF0YTpkfSksITF9KS5vbihcImRyb3AuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlKXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLFMudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0b3BcIixlLHtoZWxwZXI6UygpLGVsZW1lbnQ6bCxkYXRhOmR9KSwhMX0sdGhpcykpfSx0aGlzLnJlZHJhd19ub2RlPWZ1bmN0aW9uKGUsdCxpLHIpe2lmKChlPW8ucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSYmdGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1KWlmKHRoaXMuc2V0dGluZ3MuZG5kLmxhcmdlX2RyYWdfdGFyZ2V0KWUuc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsITApO2Vsc2V7dmFyIHMsYSxuPW51bGw7Zm9yKHM9MCxhPWUuY2hpbGROb2Rlcy5sZW5ndGg7czxhO3MrKylpZihlLmNoaWxkTm9kZXNbc10mJmUuY2hpbGROb2Rlc1tzXS5jbGFzc05hbWUmJi0xIT09ZS5jaGlsZE5vZGVzW3NdLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWFuY2hvclwiKSl7bj1lLmNoaWxkTm9kZXNbc107YnJlYWt9biYmbi5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwhMCl9cmV0dXJuIGV9fSxTKGZ1bmN0aW9uKCl7dmFyIEM9ITEsQT0hMSxUPSExLE49ITEsTz1TKCc8ZGl2IGlkPVwianN0cmVlLW1hcmtlclwiPiYjMTYwOzwvZGl2PicpLmhpZGUoKTtTKGspLm9uKFwiZHJhZ292ZXIudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGUpe2wmJlMudmFrYXRhLmRuZC5fdHJpZ2dlcihcIm1vdmVcIixlLHtoZWxwZXI6UygpLGVsZW1lbnQ6bCxkYXRhOmR9KX0pLm9uKFwiZHJvcC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSl7bCYmKFMudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0b3BcIixlLHtoZWxwZXI6UygpLGVsZW1lbnQ6bCxkYXRhOmR9KSxkPWw9bnVsbCl9KS5vbihcImRuZF9zdGFydC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtUPUM9ITEsdCYmdC5kYXRhJiZ0LmRhdGEuanN0cmVlJiZPLmFwcGVuZFRvKGsuYm9keSl9KS5vbihcImRuZF9tb3ZlLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHMpe3ZhciBhPXMuZXZlbnQudGFyZ2V0IT09VC50YXJnZXQ7aWYoTiYmKHMuZXZlbnQmJlwiZHJhZ292ZXJcIj09PXMuZXZlbnQudHlwZSYmIWF8fGNsZWFyVGltZW91dChOKSkscyYmcy5kYXRhJiZzLmRhdGEuanN0cmVlJiYoIXMuZXZlbnQudGFyZ2V0LmlkfHxcImpzdHJlZS1tYXJrZXJcIiE9PXMuZXZlbnQudGFyZ2V0LmlkKSl7VD1zLmV2ZW50O3ZhciBuPVMuanN0cmVlLnJlZmVyZW5jZShzLmV2ZW50LnRhcmdldCksbz0hMSxkPSExLHQ9ITEsaSxjLGwsaCxfLHUsZyxmLHAsbSx2LGoseSxrLHgsYix3O2lmKG4mJm4uX2RhdGEmJm4uX2RhdGEuZG5kKWlmKE8uYXR0cihcImNsYXNzXCIsXCJqc3RyZWUtXCIrbi5nZXRfdGhlbWUoKSsobi5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKSxiPXMuZGF0YS5vcmlnaW4mJihzLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5hbHdheXNfY29weXx8cy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuY29weSYmKHMuZXZlbnQubWV0YUtleXx8cy5ldmVudC5jdHJsS2V5KSkscy5oZWxwZXIuY2hpbGRyZW4oKS5hdHRyKFwiY2xhc3NcIixcImpzdHJlZS1cIituLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIituLmdldF90aGVtZSgpK1wiLVwiK24uZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisobi5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKS5maW5kKFwiLmpzdHJlZS1jb3B5XCIpLmZpcnN0KClbYj9cInNob3dcIjpcImhpZGVcIl0oKSxzLmV2ZW50LnRhcmdldCE9PW4uZWxlbWVudFswXSYmcy5ldmVudC50YXJnZXQhPT1uLmdldF9jb250YWluZXJfdWwoKVswXXx8MCE9PW4uZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKCkubGVuZ3RoKXtpZigobz1uLnNldHRpbmdzLmRuZC5sYXJnZV9kcm9wX3RhcmdldD9TKHMuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIik6UyhzLmV2ZW50LnRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtYW5jaG9yXCIpKSYmby5sZW5ndGgmJm8ucGFyZW50KCkuaXMoXCIuanN0cmVlLWNsb3NlZCwgLmpzdHJlZS1vcGVuLCAuanN0cmVlLWxlYWZcIikmJihkPW8ub2Zmc2V0KCksdD0ocy5ldmVudC5wYWdlWSE9PUU/cy5ldmVudC5wYWdlWTpzLmV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVkpLWQudG9wLGg9by5vdXRlckhlaWdodCgpLGc9dDxoLzM/W1wiYlwiLFwiaVwiLFwiYVwiXTpoLWgvMzx0P1tcImFcIixcImlcIixcImJcIl06aC8yPHQ/W1wiaVwiLFwiYVwiLFwiYlwiXTpbXCJpXCIsXCJiXCIsXCJhXCJdLFMuZWFjaChnLGZ1bmN0aW9uKGUsdCl7c3dpdGNoKHQpe2Nhc2VcImJcIjpjPWQubGVmdC02LGw9ZC50b3AsXz1uLmdldF9wYXJlbnQobyksdT1vLnBhcmVudCgpLmluZGV4KCk7YnJlYWs7Y2FzZVwiaVwiOms9bi5zZXR0aW5ncy5kbmQuaW5zaWRlX3Bvcyx4PW4uZ2V0X25vZGUoby5wYXJlbnQoKSksYz1kLmxlZnQtMixsPWQudG9wK2gvMisxLF89eC5pZCx1PVwiZmlyc3RcIj09PWs/MDpcImxhc3RcIj09PWs/eC5jaGlsZHJlbi5sZW5ndGg6TWF0aC5taW4oayx4LmNoaWxkcmVuLmxlbmd0aCk7YnJlYWs7Y2FzZVwiYVwiOmM9ZC5sZWZ0LTYsbD1kLnRvcCtoLF89bi5nZXRfcGFyZW50KG8pLHU9by5wYXJlbnQoKS5pbmRleCgpKzF9Zm9yKGY9ITAscD0wLG09cy5kYXRhLm5vZGVzLmxlbmd0aDtwPG07cCsrKWlmKHY9cy5kYXRhLm9yaWdpbiYmKHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHxzLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYocy5ldmVudC5tZXRhS2V5fHxzLmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCIsaj11LFwibW92ZV9ub2RlXCI9PT12JiZcImFcIj09PXQmJnMuZGF0YS5vcmlnaW4mJnMuZGF0YS5vcmlnaW49PT1uJiZfPT09bi5nZXRfcGFyZW50KHMuZGF0YS5ub2Rlc1twXSkmJih5PW4uZ2V0X25vZGUoXyksaj5TLmluQXJyYXkocy5kYXRhLm5vZGVzW3BdLHkuY2hpbGRyZW4pJiYoai09MSkpLCEoZj1mJiYobiYmbi5zZXR0aW5ncyYmbi5zZXR0aW5ncy5kbmQmJiExPT09bi5zZXR0aW5ncy5kbmQuY2hlY2tfd2hpbGVfZHJhZ2dpbmd8fG4uY2hlY2sodixzLmRhdGEub3JpZ2luJiZzLmRhdGEub3JpZ2luIT09bj9zLmRhdGEub3JpZ2luLmdldF9ub2RlKHMuZGF0YS5ub2Rlc1twXSk6cy5kYXRhLm5vZGVzW3BdLF8saix7ZG5kOiEwLHJlZjpuLmdldF9ub2RlKG8ucGFyZW50KCkpLHBvczp0LG9yaWdpbjpzLmRhdGEub3JpZ2luLGlzX211bHRpOnMuZGF0YS5vcmlnaW4mJnMuZGF0YS5vcmlnaW4hPT1uLGlzX2ZvcmVpZ246IXMuZGF0YS5vcmlnaW59KSkpKXtuJiZuLmxhc3RfZXJyb3ImJihBPW4ubGFzdF9lcnJvcigpKTticmVha312YXIgaSxyO2lmKFwiaVwiPT09dCYmby5wYXJlbnQoKS5pcyhcIi5qc3RyZWUtY2xvc2VkXCIpJiZuLnNldHRpbmdzLmRuZC5vcGVuX3RpbWVvdXQmJihzLmV2ZW50JiZcImRyYWdvdmVyXCI9PT1zLmV2ZW50LnR5cGUmJiFhfHwoTiYmY2xlYXJUaW1lb3V0KE4pLE49c2V0VGltZW91dCgoaT1uLHI9byxmdW5jdGlvbigpe2kub3Blbl9ub2RlKHIpfSksbi5zZXR0aW5ncy5kbmQub3Blbl90aW1lb3V0KSkpLGYpcmV0dXJuKHc9bi5nZXRfbm9kZShfLCEwKSkuaGFzQ2xhc3MoXCIuanN0cmVlLWRuZC1wYXJlbnRcIil8fChTKFwiLmpzdHJlZS1kbmQtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIiksdy5hZGRDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpKSxDPXtpbnM6bixwYXI6Xyxwb3M6XCJpXCIhPT10fHxcImxhc3RcIiE9PWt8fDAhPT11fHxuLmlzX2xvYWRlZCh4KT91OlwibGFzdFwifSxPLmNzcyh7bGVmdDpjK1wicHhcIix0b3A6bCtcInB4XCJ9KS5zaG93KCkscy5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5maXJzdCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLWVyXCIpLmFkZENsYXNzKFwianN0cmVlLW9rXCIpLHMuZXZlbnQub3JpZ2luYWxFdmVudCYmcy5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciYmKHMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1iP1wiY29weVwiOlwibW92ZVwiKSxBPXt9LCEoZz0hMCl9KSwhMD09PWcpKXJldHVybn1lbHNle2ZvcihmPSEwLHA9MCxtPXMuZGF0YS5ub2Rlcy5sZW5ndGg7cDxtO3ArKylpZighKGY9ZiYmbi5jaGVjayhzLmRhdGEub3JpZ2luJiYocy5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHMuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihzLmV2ZW50Lm1ldGFLZXl8fHMuZXZlbnQuY3RybEtleSkpP1wiY29weV9ub2RlXCI6XCJtb3ZlX25vZGVcIixzLmRhdGEub3JpZ2luJiZzLmRhdGEub3JpZ2luIT09bj9zLmRhdGEub3JpZ2luLmdldF9ub2RlKHMuZGF0YS5ub2Rlc1twXSk6cy5kYXRhLm5vZGVzW3BdLFMuanN0cmVlLnJvb3QsXCJsYXN0XCIse2RuZDohMCxyZWY6bi5nZXRfbm9kZShTLmpzdHJlZS5yb290KSxwb3M6XCJpXCIsb3JpZ2luOnMuZGF0YS5vcmlnaW4saXNfbXVsdGk6cy5kYXRhLm9yaWdpbiYmcy5kYXRhLm9yaWdpbiE9PW4saXNfZm9yZWlnbjohcy5kYXRhLm9yaWdpbn0pKSlicmVhaztpZihmKXJldHVybiBDPXtpbnM6bixwYXI6Uy5qc3RyZWUucm9vdCxwb3M6XCJsYXN0XCJ9LE8uaGlkZSgpLHMuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikuZmlyc3QoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lclwiKS5hZGRDbGFzcyhcImpzdHJlZS1va1wiKSx2b2lkKHMuZXZlbnQub3JpZ2luYWxFdmVudCYmcy5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciYmKHMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1iP1wiY29weVwiOlwibW92ZVwiKSl9UyhcIi5qc3RyZWUtZG5kLXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpLEM9ITEscy5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1va1wiKS5hZGRDbGFzcyhcImpzdHJlZS1lclwiKSxzLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJnMuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIsTy5oaWRlKCl9fSkub24oXCJkbmRfc2Nyb2xsLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihlLHQpe3QmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSYmKE8uaGlkZSgpLFQ9Qz0hMSx0LmhlbHBlci5maW5kKFwiLmpzdHJlZS1pY29uXCIpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb2tcIikuYWRkQ2xhc3MoXCJqc3RyZWUtZXJcIikpfSkub24oXCJkbmRfc3RvcC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oZSx0KXtpZihTKFwiLmpzdHJlZS1kbmQtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIiksTiYmY2xlYXJUaW1lb3V0KE4pLHQmJnQuZGF0YSYmdC5kYXRhLmpzdHJlZSl7Ty5oaWRlKCkuZGV0YWNoKCk7dmFyIGkscixzPVtdO2lmKEMpe2ZvcihpPTAscj10LmRhdGEubm9kZXMubGVuZ3RoO2k8cjtpKyspc1tpXT10LmRhdGEub3JpZ2luP3QuZGF0YS5vcmlnaW4uZ2V0X25vZGUodC5kYXRhLm5vZGVzW2ldKTp0LmRhdGEubm9kZXNbaV07Qy5pbnNbdC5kYXRhLm9yaWdpbiYmKHQuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHx0LmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYodC5ldmVudC5tZXRhS2V5fHx0LmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCJdKHMsQy5wYXIsQy5wb3MsITEsITEsITEsdC5kYXRhLm9yaWdpbil9ZWxzZShpPVModC5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlXCIpKS5sZW5ndGgmJkEmJkEuZXJyb3ImJlwiY2hlY2tcIj09PUEuZXJyb3ImJihpPWkuanN0cmVlKCEwKSkmJmkuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsQSk7Qz1UPSExfX0pLm9uKFwia2V5dXAuanN0cmVlIGtleWRvd24uanN0cmVlXCIsZnVuY3Rpb24oZSx0KXsodD1TLnZha2F0YS5kbmQuX2dldCgpKSYmdC5kYXRhJiZ0LmRhdGEuanN0cmVlJiYoXCJrZXl1cFwiPT09ZS50eXBlJiYyNz09PWUud2hpY2g/KE4mJmNsZWFyVGltZW91dChOKSxOPVQ9QT1DPSExLE8uaGlkZSgpLmRldGFjaCgpLFMudmFrYXRhLmRuZC5fY2xlYW4oKSk6KHQuaGVscGVyLmZpbmQoXCIuanN0cmVlLWNvcHlcIikuZmlyc3QoKVt0LmRhdGEub3JpZ2luJiYodC5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fHQuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihlLm1ldGFLZXl8fGUuY3RybEtleSkpP1wic2hvd1wiOlwiaGlkZVwiXSgpLFQmJihULm1ldGFLZXk9ZS5tZXRhS2V5LFQuY3RybEtleT1lLmN0cmxLZXksUy52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLFQpKSkpfSl9KSxmPXtlbGVtZW50OiEoKGg9UykudmFrYXRhLmh0bWw9e2RpdjpoKFwiPGRpdiAvPlwiKSxlc2NhcGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGgudmFrYXRhLmh0bWwuZGl2LnRleHQoZSkuaHRtbCgpfSxzdHJpcDpmdW5jdGlvbihlKXtyZXR1cm4gaC52YWthdGEuaHRtbC5kaXYuZW1wdHkoKS5hcHBlbmQoaC5wYXJzZUhUTUwoZSkpLnRleHQoKX19KSx0YXJnZXQ6ITEsaXNfZG93bjohMSxpc19kcmFnOiExLGhlbHBlcjohMSxoZWxwZXJfdzowLGRhdGE6ITEsaW5pdF94OjAsaW5pdF95OjAsc2Nyb2xsX2w6MCxzY3JvbGxfdDowLHNjcm9sbF9lOiExLHNjcm9sbF9pOiExLGlzX3RvdWNoOiExfSxoLnZha2F0YS5kbmQ9e3NldHRpbmdzOntzY3JvbGxfc3BlZWQ6MTAsc2Nyb2xsX3Byb3hpbWl0eToyMCxoZWxwZXJfbGVmdDo1LGhlbHBlcl90b3A6MTAsdGhyZXNob2xkOjUsdGhyZXNob2xkX3RvdWNoOjEwfSxfdHJpZ2dlcjpmdW5jdGlvbihlLHQsaSl7aT09PUUmJihpPWgudmFrYXRhLmRuZC5fZ2V0KCkpLGkuZXZlbnQ9dCxoKGspLnRyaWdnZXJIYW5kbGVyKFwiZG5kX1wiK2UrXCIudmFrYXRhXCIsaSl9LF9nZXQ6ZnVuY3Rpb24oKXtyZXR1cm57ZGF0YTpmLmRhdGEsZWxlbWVudDpmLmVsZW1lbnQsaGVscGVyOmYuaGVscGVyfX0sX2NsZWFuOmZ1bmN0aW9uKCl7Zi5oZWxwZXImJmYuaGVscGVyLnJlbW92ZSgpLGYuc2Nyb2xsX2kmJihjbGVhckludGVydmFsKGYuc2Nyb2xsX2kpLGYuc2Nyb2xsX2k9ITEpLGY9e2VsZW1lbnQ6ITEsdGFyZ2V0OiExLGlzX2Rvd246ITEsaXNfZHJhZzohMSxoZWxwZXI6ITEsaGVscGVyX3c6MCxkYXRhOiExLGluaXRfeDowLGluaXRfeTowLHNjcm9sbF9sOjAsc2Nyb2xsX3Q6MCxzY3JvbGxfZTohMSxzY3JvbGxfaTohMSxpc190b3VjaDohMX0saChrKS5vZmYoXCJtb3VzZW1vdmUudmFrYXRhLmpzdHJlZSB0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLGgudmFrYXRhLmRuZC5kcmFnKSxoKGspLm9mZihcIm1vdXNldXAudmFrYXRhLmpzdHJlZSB0b3VjaGVuZC52YWthdGEuanN0cmVlXCIsaC52YWthdGEuZG5kLnN0b3ApfSxfc2Nyb2xsOmZ1bmN0aW9uKGUpe2lmKCFmLnNjcm9sbF9lfHwhZi5zY3JvbGxfbCYmIWYuc2Nyb2xsX3QpcmV0dXJuIGYuc2Nyb2xsX2kmJihjbGVhckludGVydmFsKGYuc2Nyb2xsX2kpLGYuc2Nyb2xsX2k9ITEpLCExO2lmKCFmLnNjcm9sbF9pKXJldHVybiBmLnNjcm9sbF9pPXNldEludGVydmFsKGgudmFrYXRhLmRuZC5fc2Nyb2xsLDEwMCksITE7aWYoITA9PT1lKXJldHVybiExO3ZhciB0PWYuc2Nyb2xsX2Uuc2Nyb2xsVG9wKCksaT1mLnNjcm9sbF9lLnNjcm9sbExlZnQoKTtmLnNjcm9sbF9lLnNjcm9sbFRvcCh0K2Yuc2Nyb2xsX3QqaC52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9zcGVlZCksZi5zY3JvbGxfZS5zY3JvbGxMZWZ0KGkrZi5zY3JvbGxfbCpoLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3NwZWVkKSx0PT09Zi5zY3JvbGxfZS5zY3JvbGxUb3AoKSYmaT09PWYuc2Nyb2xsX2Uuc2Nyb2xsTGVmdCgpfHxoLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzY3JvbGxcIixmLnNjcm9sbF9lKX0sc3RhcnQ6ZnVuY3Rpb24oZSx0LGkpe1widG91Y2hzdGFydFwiPT09ZS50eXBlJiZlLm9yaWdpbmFsRXZlbnQmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyYmZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdJiYoZS5wYWdlWD1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgsZS5wYWdlWT1lLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVksZS50YXJnZXQ9ay5lbGVtZW50RnJvbVBvaW50KGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQsZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLXdpbmRvdy5wYWdlWU9mZnNldCkpLGYuaXNfZHJhZyYmaC52YWthdGEuZG5kLnN0b3Aoe30pO3RyeXtlLmN1cnJlbnRUYXJnZXQudW5zZWxlY3RhYmxlPVwib25cIixlLmN1cnJlbnRUYXJnZXQub25zZWxlY3RzdGFydD1mdW5jdGlvbigpe3JldHVybiExfSxlLmN1cnJlbnRUYXJnZXQuc3R5bGUmJihlLmN1cnJlbnRUYXJnZXQuc3R5bGUudG91Y2hBY3Rpb249XCJub25lXCIsZS5jdXJyZW50VGFyZ2V0LnN0eWxlLm1zVG91Y2hBY3Rpb249XCJub25lXCIsZS5jdXJyZW50VGFyZ2V0LnN0eWxlLk1velVzZXJTZWxlY3Q9XCJub25lXCIpfWNhdGNoKGUpe31yZXR1cm4gZi5pbml0X3g9ZS5wYWdlWCxmLmluaXRfeT1lLnBhZ2VZLGYuZGF0YT10LGYuaXNfZG93bj0hMCxmLmVsZW1lbnQ9ZS5jdXJyZW50VGFyZ2V0LGYudGFyZ2V0PWUudGFyZ2V0LGYuaXNfdG91Y2g9XCJ0b3VjaHN0YXJ0XCI9PT1lLnR5cGUsITEhPT1pJiYoZi5oZWxwZXI9aChcIjxkaXYgaWQ9J3Zha2F0YS1kbmQnPjwvZGl2PlwiKS5odG1sKGkpLmNzcyh7ZGlzcGxheTpcImJsb2NrXCIsbWFyZ2luOlwiMFwiLHBhZGRpbmc6XCIwXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpcIi0yMDAwcHhcIixsaW5lSGVpZ2h0OlwiMTZweFwiLHpJbmRleDpcIjEwMDAwXCJ9KSksaChrKS5vbihcIm1vdXNlbW92ZS52YWthdGEuanN0cmVlIHRvdWNobW92ZS52YWthdGEuanN0cmVlXCIsaC52YWthdGEuZG5kLmRyYWcpLGgoaykub24oXCJtb3VzZXVwLnZha2F0YS5qc3RyZWUgdG91Y2hlbmQudmFrYXRhLmpzdHJlZVwiLGgudmFrYXRhLmRuZC5zdG9wKSwhMX0sZHJhZzpmdW5jdGlvbihpKXtpZihcInRvdWNobW92ZVwiPT09aS50eXBlJiZpLm9yaWdpbmFsRXZlbnQmJmkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyYmaS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdJiYoaS5wYWdlWD1pLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgsaS5wYWdlWT1pLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVksaS50YXJnZXQ9ay5lbGVtZW50RnJvbVBvaW50KGkub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQsaS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLXdpbmRvdy5wYWdlWU9mZnNldCkpLGYuaXNfZG93bil7aWYoIWYuaXNfZHJhZyl7aWYoIShNYXRoLmFicyhpLnBhZ2VYLWYuaW5pdF94KT4oZi5pc190b3VjaD9oLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkX3RvdWNoOmgudmFrYXRhLmRuZC5zZXR0aW5ncy50aHJlc2hvbGQpfHxNYXRoLmFicyhpLnBhZ2VZLWYuaW5pdF95KT4oZi5pc190b3VjaD9oLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkX3RvdWNoOmgudmFrYXRhLmRuZC5zZXR0aW5ncy50aHJlc2hvbGQpKSlyZXR1cm47Zi5oZWxwZXImJihmLmhlbHBlci5hcHBlbmRUbyhrLmJvZHkpLGYuaGVscGVyX3c9Zi5oZWxwZXIub3V0ZXJXaWR0aCgpKSxmLmlzX2RyYWc9ITAsaChmLnRhcmdldCkub25lKFwiY2xpY2sudmFrYXRhXCIsITEpLGgudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0YXJ0XCIsaSl9dmFyIGU9ITEsdD0hMSxyPSExLHM9ITEsYT0hMSxuPSExLG89ITEsZD0hMSxjPSExLGw9ITE7cmV0dXJuIGYuc2Nyb2xsX3Q9MCxmLnNjcm9sbF9sPTAsZi5zY3JvbGxfZT0hMSxoKGgoaS50YXJnZXQpLnBhcmVudHNVbnRpbChcImJvZHlcIikuYWRkQmFjaygpLmdldCgpLnJldmVyc2UoKSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuL15hdXRvfHNjcm9sbCQvLnRlc3QoaCh0aGlzKS5jc3MoXCJvdmVyZmxvd1wiKSkmJih0aGlzLnNjcm9sbEhlaWdodD50aGlzLm9mZnNldEhlaWdodHx8dGhpcy5zY3JvbGxXaWR0aD50aGlzLm9mZnNldFdpZHRoKX0pLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1oKHRoaXMpLHQ9ZS5vZmZzZXQoKTtpZih0aGlzLnNjcm9sbEhlaWdodD50aGlzLm9mZnNldEhlaWdodCYmKHQudG9wK2UuaGVpZ2h0KCktaS5wYWdlWTxoLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKGYuc2Nyb2xsX3Q9MSksaS5wYWdlWS10LnRvcDxoLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKGYuc2Nyb2xsX3Q9LTEpKSx0aGlzLnNjcm9sbFdpZHRoPnRoaXMub2Zmc2V0V2lkdGgmJih0LmxlZnQrZS53aWR0aCgpLWkucGFnZVg8aC52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihmLnNjcm9sbF9sPTEpLGkucGFnZVgtdC5sZWZ0PGgudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYoZi5zY3JvbGxfbD0tMSkpLGYuc2Nyb2xsX3R8fGYuc2Nyb2xsX2wpcmV0dXJuIGYuc2Nyb2xsX2U9aCh0aGlzKSwhMX0pLGYuc2Nyb2xsX2V8fChlPWgoayksdD1oKHdpbmRvdykscj1lLmhlaWdodCgpLHM9dC5oZWlnaHQoKSxhPWUud2lkdGgoKSxuPXQud2lkdGgoKSxvPWUuc2Nyb2xsVG9wKCksZD1lLnNjcm9sbExlZnQoKSxzPHImJmkucGFnZVktbzxoLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKGYuc2Nyb2xsX3Q9LTEpLHM8ciYmcy0oaS5wYWdlWS1vKTxoLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKGYuc2Nyb2xsX3Q9MSksbjxhJiZpLnBhZ2VYLWQ8aC52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihmLnNjcm9sbF9sPS0xKSxuPGEmJm4tKGkucGFnZVgtZCk8aC52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihmLnNjcm9sbF9sPTEpLChmLnNjcm9sbF90fHxmLnNjcm9sbF9sKSYmKGYuc2Nyb2xsX2U9ZSkpLGYuc2Nyb2xsX2UmJmgudmFrYXRhLmRuZC5fc2Nyb2xsKCEwKSxmLmhlbHBlciYmKGM9cGFyc2VJbnQoaS5wYWdlWStoLnZha2F0YS5kbmQuc2V0dGluZ3MuaGVscGVyX3RvcCwxMCksbD1wYXJzZUludChpLnBhZ2VYK2gudmFrYXRhLmRuZC5zZXR0aW5ncy5oZWxwZXJfbGVmdCwxMCksciYmcjxjKzI1JiYoYz1yLTUwKSxhJiZsK2YuaGVscGVyX3c+YSYmKGw9YS0oZi5oZWxwZXJfdysyKSksZi5oZWxwZXIuY3NzKHtsZWZ0OmwrXCJweFwiLHRvcDpjK1wicHhcIn0pKSxoLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJtb3ZlXCIsaSksITF9fSxzdG9wOmZ1bmN0aW9uKGUpe2lmKFwidG91Y2hlbmRcIj09PWUudHlwZSYmZS5vcmlnaW5hbEV2ZW50JiZlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGUucGFnZVg9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGUucGFnZVk9ZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGUudGFyZ2V0PWsuZWxlbWVudEZyb21Qb2ludChlLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGUub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxmLmlzX2RyYWcpZS50YXJnZXQhPT1mLnRhcmdldCYmaChmLnRhcmdldCkub2ZmKFwiY2xpY2sudmFrYXRhXCIpLGgudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0b3BcIixlKTtlbHNlIGlmKFwidG91Y2hlbmRcIj09PWUudHlwZSYmZS50YXJnZXQ9PT1mLnRhcmdldCl7dmFyIHQ9c2V0VGltZW91dChmdW5jdGlvbigpe2goZS50YXJnZXQpLmNsaWNrKCl9LDEwMCk7aChlLnRhcmdldCkub25lKFwiY2xpY2tcIixmdW5jdGlvbigpe3QmJmNsZWFyVGltZW91dCh0KX0pfXJldHVybiBoLnZha2F0YS5kbmQuX2NsZWFuKCksITF9fSxTLmpzdHJlZS5kZWZhdWx0cy5tYXNzbG9hZD1udWxsLFMuanN0cmVlLnBsdWdpbnMubWFzc2xvYWQ9ZnVuY3Rpb24oZSxoKXt0aGlzLmluaXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhLm1hc3Nsb2FkPXt9LGguaW5pdC5jYWxsKHRoaXMsZSx0KX0sdGhpcy5fbG9hZF9ub2Rlcz1mdW5jdGlvbihhLG4sbyxkKXt2YXIgZT10aGlzLnNldHRpbmdzLm1hc3Nsb2FkLHQ9SlNPTi5zdHJpbmdpZnkoYSksaT1bXSxyPXRoaXMuX21vZGVsLmRhdGEscyxjLGw7aWYoIW8pe2ZvcihzPTAsYz1hLmxlbmd0aDtzPGM7cysrKXJbYVtzXV0mJihyW2Fbc11dLnN0YXRlLmxvYWRlZHx8clthW3NdXS5zdGF0ZS5mYWlsZWQpJiYhZHx8KGkucHVzaChhW3NdKSwobD10aGlzLmdldF9ub2RlKGFbc10sITApKSYmbC5sZW5ndGgmJmwuYWRkQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITApKTtpZih0aGlzLl9kYXRhLm1hc3Nsb2FkPXt9LGkubGVuZ3RoKXtpZihTLmlzRnVuY3Rpb24oZSkpcmV0dXJuIGUuY2FsbCh0aGlzLGksUy5wcm94eShmdW5jdGlvbihlKXt2YXIgdCxpO2lmKGUpZm9yKHQgaW4gZSllLmhhc093blByb3BlcnR5KHQpJiYodGhpcy5fZGF0YS5tYXNzbG9hZFt0XT1lW3RdKTtmb3IodD0wLGk9YS5sZW5ndGg7dDxpO3QrKykobD10aGlzLmdldF9ub2RlKGFbdF0sITApKSYmbC5sZW5ndGgmJmwucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITEpO2guX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixvLGQpfSx0aGlzKSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUudXJsKXJldHVybiBlPVMuZXh0ZW5kKCEwLHt9LGUpLFMuaXNGdW5jdGlvbihlLnVybCkmJihlLnVybD1lLnVybC5jYWxsKHRoaXMsaSkpLFMuaXNGdW5jdGlvbihlLmRhdGEpJiYoZS5kYXRhPWUuZGF0YS5jYWxsKHRoaXMsaSkpLFMuYWpheChlKS5kb25lKFMucHJveHkoZnVuY3Rpb24oZSx0LGkpe3ZhciByLHM7aWYoZSlmb3IociBpbiBlKWUuaGFzT3duUHJvcGVydHkocikmJih0aGlzLl9kYXRhLm1hc3Nsb2FkW3JdPWVbcl0pO2ZvcihyPTAscz1hLmxlbmd0aDtyPHM7cisrKShsPXRoaXMuZ2V0X25vZGUoYVtyXSwhMCkpJiZsLmxlbmd0aCYmbC5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSk7aC5fbG9hZF9ub2Rlcy5jYWxsKHRoaXMsYSxuLG8sZCl9LHRoaXMpKS5mYWlsKFMucHJveHkoZnVuY3Rpb24oZSl7aC5fbG9hZF9ub2Rlcy5jYWxsKHRoaXMsYSxuLG8sZCl9LHRoaXMpKX19cmV0dXJuIGguX2xvYWRfbm9kZXMuY2FsbCh0aGlzLGEsbixvLGQpfSx0aGlzLl9sb2FkX25vZGU9ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9kYXRhLm1hc3Nsb2FkW2UuaWRdLHI9bnVsbCxzO3JldHVybiBpPyhyPXRoaXNbXCJzdHJpbmdcIj09dHlwZW9mIGk/XCJfYXBwZW5kX2h0bWxfZGF0YVwiOlwiX2FwcGVuZF9qc29uX2RhdGFcIl0oZSxcInN0cmluZ1wiPT10eXBlb2YgaT9TKFMucGFyc2VIVE1MKGkpKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMyE9PXRoaXMubm9kZVR5cGV9KTppLGZ1bmN0aW9uKGUpe3QuY2FsbCh0aGlzLGUpfSksKHM9dGhpcy5nZXRfbm9kZShlLmlkLCEwKSkmJnMubGVuZ3RoJiZzLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKSxkZWxldGUgdGhpcy5fZGF0YS5tYXNzbG9hZFtlLmlkXSxyKTpoLl9sb2FkX25vZGUuY2FsbCh0aGlzLGUsdCl9fSxTLmpzdHJlZS5kZWZhdWx0cy5zZWFyY2g9e2FqYXg6ITEsZnV6enk6ITEsY2FzZV9zZW5zaXRpdmU6ITEsc2hvd19vbmx5X21hdGNoZXM6ITEsc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW46ITEsY2xvc2Vfb3BlbmVkX29uY2xlYXI6ITAsc2VhcmNoX2xlYXZlc19vbmx5OiExLHNlYXJjaF9jYWxsYmFjazohMX0sUy5qc3RyZWUucGx1Z2lucy5zZWFyY2g9ZnVuY3Rpb24oZSxvKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtvLmJpbmQuY2FsbCh0aGlzKSx0aGlzLl9kYXRhLnNlYXJjaC5zdHI9XCJcIix0aGlzLl9kYXRhLnNlYXJjaC5kb209UygpLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1bXSx0aGlzLl9kYXRhLnNlYXJjaC5vcG49W10sdGhpcy5fZGF0YS5zZWFyY2guc29tPSExLHRoaXMuX2RhdGEuc2VhcmNoLnNtYz0hMSx0aGlzLl9kYXRhLnNlYXJjaC5oZG49W10sdGhpcy5lbGVtZW50Lm9uKFwic2VhcmNoLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9kYXRhLnNlYXJjaC5zb20mJnQucmVzLmxlbmd0aCl7dmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyLHMsYT1bXSxuLG87Zm9yKHI9MCxzPXQucmVzLmxlbmd0aDtyPHM7cisrKWlmKGlbdC5yZXNbcl1dJiYhaVt0LnJlc1tyXV0uc3RhdGUuaGlkZGVuJiYoYS5wdXNoKHQucmVzW3JdKSxhPWEuY29uY2F0KGlbdC5yZXNbcl1dLnBhcmVudHMpLHRoaXMuX2RhdGEuc2VhcmNoLnNtYykpZm9yKG49MCxvPWlbdC5yZXNbcl1dLmNoaWxkcmVuX2QubGVuZ3RoO248bztuKyspaVtpW3QucmVzW3JdXS5jaGlsZHJlbl9kW25dXSYmIWlbaVt0LnJlc1tyXV0uY2hpbGRyZW5fZFtuXV0uc3RhdGUuaGlkZGVuJiZhLnB1c2goaVt0LnJlc1tyXV0uY2hpbGRyZW5fZFtuXSk7YT1TLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbShTLnZha2F0YS5hcnJheV91bmlxdWUoYSksUy5qc3RyZWUucm9vdCksdGhpcy5fZGF0YS5zZWFyY2guaGRuPXRoaXMuaGlkZV9hbGwoITApLHRoaXMuc2hvd19ub2RlKGEsITApLHRoaXMucmVkcmF3KCEwKX19LHRoaXMpKS5vbihcImNsZWFyX3NlYXJjaC5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dGhpcy5fZGF0YS5zZWFyY2guc29tJiZ0LnJlcy5sZW5ndGgmJih0aGlzLnNob3dfbm9kZSh0aGlzLl9kYXRhLnNlYXJjaC5oZG4sITApLHRoaXMucmVkcmF3KCEwKSl9LHRoaXMpKX0sdGhpcy5zZWFyY2g9ZnVuY3Rpb24ocixlLHQsaSxzLGEpe2lmKCExPT09cnx8XCJcIj09PVMudHJpbShyLnRvU3RyaW5nKCkpKXJldHVybiB0aGlzLmNsZWFyX3NlYXJjaCgpO2k9KGk9dGhpcy5nZXRfbm9kZShpKSkmJmkuaWQ/aS5pZDpudWxsLHI9ci50b1N0cmluZygpO3ZhciBuPXRoaXMuc2V0dGluZ3Muc2VhcmNoLG89ISFuLmFqYXgmJm4uYWpheCxkPXRoaXMuX21vZGVsLmRhdGEsYz1udWxsLGw9W10saD1bXSxfLHU7aWYodGhpcy5fZGF0YS5zZWFyY2gucmVzLmxlbmd0aCYmIXMmJnRoaXMuY2xlYXJfc2VhcmNoKCksdD09PUUmJih0PW4uc2hvd19vbmx5X21hdGNoZXMpLGE9PT1FJiYoYT1uLnNob3dfb25seV9tYXRjaGVzX2NoaWxkcmVuKSwhZSYmITEhPT1vKXJldHVybiBTLmlzRnVuY3Rpb24obyk/by5jYWxsKHRoaXMscixTLnByb3h5KGZ1bmN0aW9uKGUpe2UmJmUuZCYmKGU9ZS5kKSx0aGlzLl9sb2FkX25vZGVzKFMuaXNBcnJheShlKT9TLnZha2F0YS5hcnJheV91bmlxdWUoZSk6W10sZnVuY3Rpb24oKXt0aGlzLnNlYXJjaChyLCEwLHQsaSxzLGEpfSl9LHRoaXMpLGkpOigobz1TLmV4dGVuZCh7fSxvKSkuZGF0YXx8KG8uZGF0YT17fSksby5kYXRhLnN0cj1yLGkmJihvLmRhdGEuaW5zaWRlPWkpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0JiZ0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdC5hYm9ydCgpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0PVMuYWpheChvKS5mYWlsKFMucHJveHkoZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJhamF4XCIscGx1Z2luOlwic2VhcmNoXCIsaWQ6XCJzZWFyY2hfMDFcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBzZWFyY2ggcGFyZW50c1wiLGRhdGE6SlNPTi5zdHJpbmdpZnkobyl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpfSx0aGlzKSkuZG9uZShTLnByb3h5KGZ1bmN0aW9uKGUpe2UmJmUuZCYmKGU9ZS5kKSx0aGlzLl9sb2FkX25vZGVzKFMuaXNBcnJheShlKT9TLnZha2F0YS5hcnJheV91bmlxdWUoZSk6W10sZnVuY3Rpb24oKXt0aGlzLnNlYXJjaChyLCEwLHQsaSxzLGEpfSl9LHRoaXMpKSx0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdCk7aWYoc3x8KHRoaXMuX2RhdGEuc2VhcmNoLnN0cj1yLHRoaXMuX2RhdGEuc2VhcmNoLmRvbT1TKCksdGhpcy5fZGF0YS5zZWFyY2gucmVzPVtdLHRoaXMuX2RhdGEuc2VhcmNoLm9wbj1bXSx0aGlzLl9kYXRhLnNlYXJjaC5zb209dCx0aGlzLl9kYXRhLnNlYXJjaC5zbWM9YSksYz1uZXcgUy52YWthdGEuc2VhcmNoKHIsITAse2Nhc2VTZW5zaXRpdmU6bi5jYXNlX3NlbnNpdGl2ZSxmdXp6eTpuLmZ1enp5fSksUy5lYWNoKGRbaXx8Uy5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZCxmdW5jdGlvbihlLHQpe3ZhciBpPWRbdF07aS50ZXh0JiYhaS5zdGF0ZS5oaWRkZW4mJighbi5zZWFyY2hfbGVhdmVzX29ubHl8fGkuc3RhdGUubG9hZGVkJiYwPT09aS5jaGlsZHJlbi5sZW5ndGgpJiYobi5zZWFyY2hfY2FsbGJhY2smJm4uc2VhcmNoX2NhbGxiYWNrLmNhbGwodGhpcyxyLGkpfHwhbi5zZWFyY2hfY2FsbGJhY2smJmMuc2VhcmNoKGkudGV4dCkuaXNNYXRjaCkmJihsLnB1c2godCksaD1oLmNvbmNhdChpLnBhcmVudHMpKX0pLGwubGVuZ3RoKXtmb3IoXz0wLHU9KGg9Uy52YWthdGEuYXJyYXlfdW5pcXVlKGgpKS5sZW5ndGg7Xzx1O18rKyloW19dIT09Uy5qc3RyZWUucm9vdCYmZFtoW19dXSYmITA9PT10aGlzLm9wZW5fbm9kZShoW19dLG51bGwsMCkmJnRoaXMuX2RhdGEuc2VhcmNoLm9wbi5wdXNoKGhbX10pO3RoaXMuX2RhdGEuc2VhcmNoLnJlcz1zPyh0aGlzLl9kYXRhLnNlYXJjaC5kb209dGhpcy5fZGF0YS5zZWFyY2guZG9tLmFkZChTKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiI1wiK1MubWFwKGwsZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1cIjAxMjM0NTY3ODlcIi5pbmRleE9mKGVbMF0pP1wiXFxcXDNcIitlWzBdK1wiIFwiK2Uuc3Vic3RyKDEpLnJlcGxhY2UoUy5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKTplLnJlcGxhY2UoUy5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKX0pLmpvaW4oXCIsICNcIikpKSksUy52YWthdGEuYXJyYXlfdW5pcXVlKHRoaXMuX2RhdGEuc2VhcmNoLnJlcy5jb25jYXQobCkpKToodGhpcy5fZGF0YS5zZWFyY2guZG9tPVModGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjXCIrUy5tYXAobCxmdW5jdGlvbihlKXtyZXR1cm4tMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoZVswXSk/XCJcXFxcM1wiK2VbMF0rXCIgXCIrZS5zdWJzdHIoMSkucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOmUucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpfSkuam9pbihcIiwgI1wiKSkpLGwpLHRoaXMuX2RhdGEuc2VhcmNoLmRvbS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLXNlYXJjaFwiKX10aGlzLnRyaWdnZXIoXCJzZWFyY2hcIix7bm9kZXM6dGhpcy5fZGF0YS5zZWFyY2guZG9tLHN0cjpyLHJlczp0aGlzLl9kYXRhLnNlYXJjaC5yZXMsc2hvd19vbmx5X21hdGNoZXM6dH0pfSx0aGlzLmNsZWFyX3NlYXJjaD1mdW5jdGlvbigpe3RoaXMuc2V0dGluZ3Muc2VhcmNoLmNsb3NlX29wZW5lZF9vbmNsZWFyJiZ0aGlzLmNsb3NlX25vZGUodGhpcy5fZGF0YS5zZWFyY2gub3BuLDApLHRoaXMudHJpZ2dlcihcImNsZWFyX3NlYXJjaFwiLHtub2Rlczp0aGlzLl9kYXRhLnNlYXJjaC5kb20sc3RyOnRoaXMuX2RhdGEuc2VhcmNoLnN0cixyZXM6dGhpcy5fZGF0YS5zZWFyY2gucmVzfSksdGhpcy5fZGF0YS5zZWFyY2gucmVzLmxlbmd0aCYmKHRoaXMuX2RhdGEuc2VhcmNoLmRvbT1TKHRoaXMuZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yQWxsKFwiI1wiK1MubWFwKHRoaXMuX2RhdGEuc2VhcmNoLnJlcyxmdW5jdGlvbihlKXtyZXR1cm4tMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoZVswXSk/XCJcXFxcM1wiK2VbMF0rXCIgXCIrZS5zdWJzdHIoMSkucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOmUucmVwbGFjZShTLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpfSkuam9pbihcIiwgI1wiKSkpLHRoaXMuX2RhdGEuc2VhcmNoLmRvbS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXNlYXJjaFwiKSksdGhpcy5fZGF0YS5zZWFyY2guc3RyPVwiXCIsdGhpcy5fZGF0YS5zZWFyY2gucmVzPVtdLHRoaXMuX2RhdGEuc2VhcmNoLm9wbj1bXSx0aGlzLl9kYXRhLnNlYXJjaC5kb209UygpfSx0aGlzLnJlZHJhd19ub2RlPWZ1bmN0aW9uKGUsdCxpLHIpe2lmKChlPW8ucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSYmLTEhPT1TLmluQXJyYXkoZS5pZCx0aGlzLl9kYXRhLnNlYXJjaC5yZXMpKXt2YXIgcyxhLG49bnVsbDtmb3Iocz0wLGE9ZS5jaGlsZE5vZGVzLmxlbmd0aDtzPGE7cysrKWlmKGUuY2hpbGROb2Rlc1tzXSYmZS5jaGlsZE5vZGVzW3NdLmNsYXNzTmFtZSYmLTEhPT1lLmNoaWxkTm9kZXNbc10uY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtYW5jaG9yXCIpKXtuPWUuY2hpbGROb2Rlc1tzXTticmVha31uJiYobi5jbGFzc05hbWUrPVwiIGpzdHJlZS1zZWFyY2hcIil9cmV0dXJuIGV9fSwoaT1TKS52YWthdGEuc2VhcmNoPWZ1bmN0aW9uKHAsZSxtKXttPW18fHt9LCExIT09KG09aS5leHRlbmQoe30saS52YWthdGEuc2VhcmNoLmRlZmF1bHRzLG0pKS5mdXp6eSYmKG0uZnV6enk9ITApLHA9bS5jYXNlU2Vuc2l0aXZlP3A6cC50b0xvd2VyQ2FzZSgpO3ZhciB2PW0ubG9jYXRpb24scz1tLmRpc3RhbmNlLGo9bS50aHJlc2hvbGQseT1wLmxlbmd0aCxrLHgsYix0O3JldHVybiAzMjx5JiYobS5mdXp6eT0hMSksbS5mdXp6eSYmKGs9MTw8eS0xLHg9ZnVuY3Rpb24oKXt2YXIgZT17fSx0PTA7Zm9yKHQ9MDt0PHk7dCsrKWVbcC5jaGFyQXQodCldPTA7Zm9yKHQ9MDt0PHk7dCsrKWVbcC5jaGFyQXQodCldfD0xPDx5LXQtMTtyZXR1cm4gZX0oKSxiPWZ1bmN0aW9uKGUsdCl7dmFyIGk9ZS95LHI9TWF0aC5hYnModi10KTtyZXR1cm4gcz9pK3IvczpyPzE6aX0pLHQ9ZnVuY3Rpb24oZSl7aWYoZT1tLmNhc2VTZW5zaXRpdmU/ZTplLnRvTG93ZXJDYXNlKCkscD09PWV8fC0xIT09ZS5pbmRleE9mKHApKXJldHVybntpc01hdGNoOiEwLHNjb3JlOjB9O2lmKCFtLmZ1enp5KXJldHVybntpc01hdGNoOiExLHNjb3JlOjF9O3ZhciB0LGkscj1lLmxlbmd0aCxzPWosYT1lLmluZGV4T2YocCx2KSxuLG8sZD15K3IsYyxsLGgsXyx1LGc9MSxmPVtdO2ZvcigtMSE9PWEmJihzPU1hdGgubWluKGIoMCxhKSxzKSwtMSE9PShhPWUubGFzdEluZGV4T2YocCx2K3kpKSYmKHM9TWF0aC5taW4oYigwLGEpLHMpKSksYT0tMSx0PTA7dDx5O3QrKyl7bj0wLG89ZDt3aGlsZShuPG8pYih0LHYrbyk8PXM/bj1vOmQ9byxvPU1hdGguZmxvb3IoKGQtbikvMituKTtmb3IoZD1vLGw9TWF0aC5tYXgoMSx2LW8rMSksaD1NYXRoLm1pbih2K28scikreSwoXz1uZXcgQXJyYXkoaCsyKSlbaCsxXT0oMTw8dCktMSxpPWg7bDw9aTtpLS0paWYodT14W2UuY2hhckF0KGktMSldLF9baV09MD09PXQ/KF9baSsxXTw8MXwxKSZ1OihfW2krMV08PDF8MSkmdXwoY1tpKzFdfGNbaV0pPDwxfDF8Y1tpKzFdLF9baV0mayYmKGc9Yih0LGktMSkpPD1zKXtpZihzPWcsYT1pLTEsZi5wdXNoKGEpLCEodjxhKSlicmVhaztsPU1hdGgubWF4KDEsMip2LWEpfWlmKGIodCsxLHYpPnMpYnJlYWs7Yz1ffXJldHVybntpc01hdGNoOjA8PWEsc2NvcmU6Z319LCEwPT09ZT97c2VhcmNoOnR9OnQoZSl9LGkudmFrYXRhLnNlYXJjaC5kZWZhdWx0cz17bG9jYXRpb246MCxkaXN0YW5jZToxMDAsdGhyZXNob2xkOi42LGZ1enp5OiExLGNhc2VTZW5zaXRpdmU6ITF9LFMuanN0cmVlLmRlZmF1bHRzLnNvcnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nZXRfdGV4dChlKT50aGlzLmdldF90ZXh0KHQpPzE6LTF9O3ZhciBwPSEoUy5qc3RyZWUucGx1Z2lucy5zb3J0PWZ1bmN0aW9uKGUsdCl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7dC5iaW5kLmNhbGwodGhpcyksdGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3RoaXMuc29ydCh0LnBhcmVudCwhMCl9LHRoaXMpKS5vbihcInJlbmFtZV9ub2RlLmpzdHJlZSBjcmVhdGVfbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dGhpcy5zb3J0KHQucGFyZW50fHx0Lm5vZGUucGFyZW50LCExKSx0aGlzLnJlZHJhd19ub2RlKHQucGFyZW50fHx0Lm5vZGUucGFyZW50LCEwKX0sdGhpcykpLm9uKFwibW92ZV9ub2RlLmpzdHJlZSBjb3B5X25vZGUuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3RoaXMuc29ydCh0LnBhcmVudCwhMSksdGhpcy5yZWRyYXdfbm9kZSh0LnBhcmVudCwhMCl9LHRoaXMpKX0sdGhpcy5zb3J0PWZ1bmN0aW9uKGUsdCl7dmFyIGkscjtpZigoZT10aGlzLmdldF9ub2RlKGUpKSYmZS5jaGlsZHJlbiYmZS5jaGlsZHJlbi5sZW5ndGgmJihlLmNoaWxkcmVuLnNvcnQoUy5wcm94eSh0aGlzLnNldHRpbmdzLnNvcnQsdGhpcykpLHQpKWZvcihpPTAscj1lLmNoaWxkcmVuX2QubGVuZ3RoO2k8cjtpKyspdGhpcy5zb3J0KGUuY2hpbGRyZW5fZFtpXSwhMSl9fSksdCxtO1MuanN0cmVlLmRlZmF1bHRzLnN0YXRlPXtrZXk6XCJqc3RyZWVcIixldmVudHM6XCJjaGFuZ2VkLmpzdHJlZSBvcGVuX25vZGUuanN0cmVlIGNsb3NlX25vZGUuanN0cmVlIGNoZWNrX25vZGUuanN0cmVlIHVuY2hlY2tfbm9kZS5qc3RyZWVcIix0dGw6ITEsZmlsdGVyOiExLHByZXNlcnZlX2xvYWRlZDohMX0sUy5qc3RyZWUucGx1Z2lucy5zdGF0ZT1mdW5jdGlvbihlLHQpe3RoaXMuYmluZD1mdW5jdGlvbigpe3QuYmluZC5jYWxsKHRoaXMpO3ZhciBpPVMucHJveHkoZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub24odGhpcy5zZXR0aW5ncy5zdGF0ZS5ldmVudHMsUy5wcm94eShmdW5jdGlvbigpe3AmJmNsZWFyVGltZW91dChwKSxwPXNldFRpbWVvdXQoUy5wcm94eShmdW5jdGlvbigpe3RoaXMuc2F2ZV9zdGF0ZSgpfSx0aGlzKSwxMDApfSx0aGlzKSksdGhpcy50cmlnZ2VyKFwic3RhdGVfcmVhZHlcIil9LHRoaXMpO3RoaXMuZWxlbWVudC5vbihcInJlYWR5LmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQub25lKFwicmVzdG9yZV9zdGF0ZS5qc3RyZWVcIixpKSx0aGlzLnJlc3RvcmVfc3RhdGUoKXx8aSgpfSx0aGlzKSl9LHRoaXMuc2F2ZV9zdGF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0X3N0YXRlKCk7dGhpcy5zZXR0aW5ncy5zdGF0ZS5wcmVzZXJ2ZV9sb2FkZWR8fGRlbGV0ZSBlLmNvcmUubG9hZGVkO3ZhciB0PXtzdGF0ZTplLHR0bDp0aGlzLnNldHRpbmdzLnN0YXRlLnR0bCxzZWM6K25ldyBEYXRlfTtTLnZha2F0YS5zdG9yYWdlLnNldCh0aGlzLnNldHRpbmdzLnN0YXRlLmtleSxKU09OLnN0cmluZ2lmeSh0KSl9LHRoaXMucmVzdG9yZV9zdGF0ZT1mdW5jdGlvbigpe3ZhciBpPVMudmFrYXRhLnN0b3JhZ2UuZ2V0KHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5KTtpZihpKXRyeXtpPUpTT04ucGFyc2UoaSl9Y2F0Y2goZSl7cmV0dXJuITF9cmV0dXJuIShpJiZpLnR0bCYmaS5zZWMmJituZXcgRGF0ZS1pLnNlYz5pLnR0bCkmJihpJiZpLnN0YXRlJiYoaT1pLnN0YXRlKSxpJiZTLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5zdGF0ZS5maWx0ZXIpJiYoaT10aGlzLnNldHRpbmdzLnN0YXRlLmZpbHRlci5jYWxsKHRoaXMsaSkpLCEhaSYmKHRoaXMuc2V0dGluZ3Muc3RhdGUucHJlc2VydmVfbG9hZGVkfHxkZWxldGUgaS5jb3JlLmxvYWRlZCx0aGlzLmVsZW1lbnQub25lKFwic2V0X3N0YXRlLmpzdHJlZVwiLGZ1bmN0aW9uKGUsdCl7dC5pbnN0YW5jZS50cmlnZ2VyKFwicmVzdG9yZV9zdGF0ZVwiLHtzdGF0ZTpTLmV4dGVuZCghMCx7fSxpKX0pfSksdGhpcy5zZXRfc3RhdGUoaSksITApKX0sdGhpcy5jbGVhcl9zdGF0ZT1mdW5jdGlvbigpe3JldHVybiBTLnZha2F0YS5zdG9yYWdlLmRlbCh0aGlzLnNldHRpbmdzLnN0YXRlLmtleSl9fSwodD1TKS52YWthdGEuc3RvcmFnZT17c2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLHQpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKX0sZGVsOmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZSl9fSxTLmpzdHJlZS5kZWZhdWx0cy50eXBlcz17ZGVmYXVsdDp7fX0sUy5qc3RyZWUuZGVmYXVsdHMudHlwZXNbUy5qc3RyZWUucm9vdF09e30sUy5qc3RyZWUucGx1Z2lucy50eXBlcz1mdW5jdGlvbihlLGwpe3RoaXMuaW5pdD1mdW5jdGlvbihlLHQpe3ZhciBpLHI7aWYodCYmdC50eXBlcyYmdC50eXBlcy5kZWZhdWx0KWZvcihpIGluIHQudHlwZXMpaWYoXCJkZWZhdWx0XCIhPT1pJiZpIT09Uy5qc3RyZWUucm9vdCYmdC50eXBlcy5oYXNPd25Qcm9wZXJ0eShpKSlmb3IociBpbiB0LnR5cGVzLmRlZmF1bHQpdC50eXBlcy5kZWZhdWx0Lmhhc093blByb3BlcnR5KHIpJiZ0LnR5cGVzW2ldW3JdPT09RSYmKHQudHlwZXNbaV1bcl09dC50eXBlcy5kZWZhdWx0W3JdKTtsLmluaXQuY2FsbCh0aGlzLGUsdCksdGhpcy5fbW9kZWwuZGF0YVtTLmpzdHJlZS5yb290XS50eXBlPVMuanN0cmVlLnJvb3R9LHRoaXMucmVmcmVzaD1mdW5jdGlvbihlLHQpe2wucmVmcmVzaC5jYWxsKHRoaXMsZSx0KSx0aGlzLl9tb2RlbC5kYXRhW1MuanN0cmVlLnJvb3RdLnR5cGU9Uy5qc3RyZWUucm9vdH0sdGhpcy5iaW5kPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbihlLHQpe3ZhciBpPXRoaXMuX21vZGVsLmRhdGEscj10Lm5vZGVzLHM9dGhpcy5zZXR0aW5ncy50eXBlcyxhLG4sbz1cImRlZmF1bHRcIixkO2ZvcihhPTAsbj1yLmxlbmd0aDthPG47YSsrKXtpZihvPVwiZGVmYXVsdFwiLGlbclthXV0ub3JpZ2luYWwmJmlbclthXV0ub3JpZ2luYWwudHlwZSYmc1tpW3JbYV1dLm9yaWdpbmFsLnR5cGVdJiYobz1pW3JbYV1dLm9yaWdpbmFsLnR5cGUpLGlbclthXV0uZGF0YSYmaVtyW2FdXS5kYXRhLmpzdHJlZSYmaVtyW2FdXS5kYXRhLmpzdHJlZS50eXBlJiZzW2lbclthXV0uZGF0YS5qc3RyZWUudHlwZV0mJihvPWlbclthXV0uZGF0YS5qc3RyZWUudHlwZSksaVtyW2FdXS50eXBlPW8sITA9PT1pW3JbYV1dLmljb24mJnNbb10uaWNvbiE9PUUmJihpW3JbYV1dLmljb249c1tvXS5pY29uKSxzW29dLmxpX2F0dHIhPT1FJiZcIm9iamVjdFwiPT10eXBlb2Ygc1tvXS5saV9hdHRyKWZvcihkIGluIHNbb10ubGlfYXR0cilpZihzW29dLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoZCkpe2lmKFwiaWRcIj09PWQpY29udGludWU7aVtyW2FdXS5saV9hdHRyW2RdPT09RT9pW3JbYV1dLmxpX2F0dHJbZF09c1tvXS5saV9hdHRyW2RdOlwiY2xhc3NcIj09PWQmJihpW3JbYV1dLmxpX2F0dHIuY2xhc3M9c1tvXS5saV9hdHRyLmNsYXNzK1wiIFwiK2lbclthXV0ubGlfYXR0ci5jbGFzcyl9aWYoc1tvXS5hX2F0dHIhPT1FJiZcIm9iamVjdFwiPT10eXBlb2Ygc1tvXS5hX2F0dHIpZm9yKGQgaW4gc1tvXS5hX2F0dHIpaWYoc1tvXS5hX2F0dHIuaGFzT3duUHJvcGVydHkoZCkpe2lmKFwiaWRcIj09PWQpY29udGludWU7aVtyW2FdXS5hX2F0dHJbZF09PT1FP2lbclthXV0uYV9hdHRyW2RdPXNbb10uYV9hdHRyW2RdOlwiaHJlZlwiPT09ZCYmXCIjXCI9PT1pW3JbYV1dLmFfYXR0cltkXT9pW3JbYV1dLmFfYXR0ci5ocmVmPXNbb10uYV9hdHRyLmhyZWY6XCJjbGFzc1wiPT09ZCYmKGlbclthXV0uYV9hdHRyLmNsYXNzPXNbb10uYV9hdHRyLmNsYXNzK1wiIFwiK2lbclthXV0uYV9hdHRyLmNsYXNzKX19aVtTLmpzdHJlZS5yb290XS50eXBlPVMuanN0cmVlLnJvb3R9LHRoaXMpKSxsLmJpbmQuY2FsbCh0aGlzKX0sdGhpcy5nZXRfanNvbj1mdW5jdGlvbihlLHQsaSl7dmFyIHIscyxhPXRoaXMuX21vZGVsLmRhdGEsbj10P1MuZXh0ZW5kKCEwLHt9LHQse25vX2lkOiExfSk6e30sbz1sLmdldF9qc29uLmNhbGwodGhpcyxlLG4saSk7aWYoITE9PT1vKXJldHVybiExO2lmKFMuaXNBcnJheShvKSlmb3Iocj0wLHM9by5sZW5ndGg7cjxzO3IrKylvW3JdLnR5cGU9b1tyXS5pZCYmYVtvW3JdLmlkXSYmYVtvW3JdLmlkXS50eXBlP2Fbb1tyXS5pZF0udHlwZTpcImRlZmF1bHRcIix0JiZ0Lm5vX2lkJiYoZGVsZXRlIG9bcl0uaWQsb1tyXS5saV9hdHRyJiZvW3JdLmxpX2F0dHIuaWQmJmRlbGV0ZSBvW3JdLmxpX2F0dHIuaWQsb1tyXS5hX2F0dHImJm9bcl0uYV9hdHRyLmlkJiZkZWxldGUgb1tyXS5hX2F0dHIuaWQpO2Vsc2Ugby50eXBlPW8uaWQmJmFbby5pZF0mJmFbby5pZF0udHlwZT9hW28uaWRdLnR5cGU6XCJkZWZhdWx0XCIsdCYmdC5ub19pZCYmKG89dGhpcy5fZGVsZXRlX2lkcyhvKSk7cmV0dXJuIG99LHRoaXMuX2RlbGV0ZV9pZHM9ZnVuY3Rpb24oZSl7aWYoUy5pc0FycmF5KGUpKXtmb3IodmFyIHQ9MCxpPWUubGVuZ3RoO3Q8aTt0KyspZVt0XT10aGlzLl9kZWxldGVfaWRzKGVbdF0pO3JldHVybiBlfXJldHVybiBkZWxldGUgZS5pZCxlLmxpX2F0dHImJmUubGlfYXR0ci5pZCYmZGVsZXRlIGUubGlfYXR0ci5pZCxlLmFfYXR0ciYmZS5hX2F0dHIuaWQmJmRlbGV0ZSBlLmFfYXR0ci5pZCxlLmNoaWxkcmVuJiZTLmlzQXJyYXkoZS5jaGlsZHJlbikmJihlLmNoaWxkcmVuPXRoaXMuX2RlbGV0ZV9pZHMoZS5jaGlsZHJlbikpLGV9LHRoaXMuY2hlY2s9ZnVuY3Rpb24oZSx0LGkscixzKXtpZighMT09PWwuY2hlY2suY2FsbCh0aGlzLGUsdCxpLHIscykpcmV0dXJuITE7dD10JiZ0LmlkP3Q6dGhpcy5nZXRfbm9kZSh0KSxpPWkmJmkuaWQ/aTp0aGlzLmdldF9ub2RlKGkpO3ZhciBhPXQmJnQuaWQ/cyYmcy5vcmlnaW4/cy5vcmlnaW46Uy5qc3RyZWUucmVmZXJlbmNlKHQuaWQpOm51bGwsbixvLGQsYztzd2l0Y2goYT1hJiZhLl9tb2RlbCYmYS5fbW9kZWwuZGF0YT9hLl9tb2RlbC5kYXRhOm51bGwsZSl7Y2FzZVwiY3JlYXRlX25vZGVcIjpjYXNlXCJtb3ZlX25vZGVcIjpjYXNlXCJjb3B5X25vZGVcIjppZihcIm1vdmVfbm9kZVwiIT09ZXx8LTE9PT1TLmluQXJyYXkodC5pZCxpLmNoaWxkcmVuKSl7aWYoKG49dGhpcy5nZXRfcnVsZXMoaSkpLm1heF9jaGlsZHJlbiE9PUUmJi0xIT09bi5tYXhfY2hpbGRyZW4mJm4ubWF4X2NoaWxkcmVuPT09aS5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInR5cGVzXCIsaWQ6XCJ0eXBlc18wMVwiLHJlYXNvbjpcIm1heF9jaGlsZHJlbiBwcmV2ZW50cyBmdW5jdGlvbjogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pO2lmKG4udmFsaWRfY2hpbGRyZW4hPT1FJiYtMSE9PW4udmFsaWRfY2hpbGRyZW4mJi0xPT09Uy5pbkFycmF5KHQudHlwZXx8XCJkZWZhdWx0XCIsbi52YWxpZF9jaGlsZHJlbikpcmV0dXJuISh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInR5cGVzXCIsaWQ6XCJ0eXBlc18wMlwiLHJlYXNvbjpcInZhbGlkX2NoaWxkcmVuIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSk7aWYoYSYmdC5jaGlsZHJlbl9kJiZ0LnBhcmVudHMpe2ZvcihkPW89MCxjPXQuY2hpbGRyZW5fZC5sZW5ndGg7ZDxjO2QrKylvPU1hdGgubWF4KG8sYVt0LmNoaWxkcmVuX2RbZF1dLnBhcmVudHMubGVuZ3RoKTtvPW8tdC5wYXJlbnRzLmxlbmd0aCsxfShvPD0wfHxvPT09RSkmJihvPTEpO2Rve2lmKG4ubWF4X2RlcHRoIT09RSYmLTEhPT1uLm1heF9kZXB0aCYmbi5tYXhfZGVwdGg8bylyZXR1cm4hKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidHlwZXNcIixpZDpcInR5cGVzXzAzXCIscmVhc29uOlwibWF4X2RlcHRoIHByZXZlbnRzIGZ1bmN0aW9uOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSk7aT10aGlzLmdldF9ub2RlKGkucGFyZW50KSxuPXRoaXMuZ2V0X3J1bGVzKGkpLG8rK313aGlsZShpKX19cmV0dXJuITB9LHRoaXMuZ2V0X3J1bGVzPWZ1bmN0aW9uKGUpe2lmKCEoZT10aGlzLmdldF9ub2RlKGUpKSlyZXR1cm4hMTt2YXIgdD10aGlzLmdldF90eXBlKGUsITApO3JldHVybiB0Lm1heF9kZXB0aD09PUUmJih0Lm1heF9kZXB0aD0tMSksdC5tYXhfY2hpbGRyZW49PT1FJiYodC5tYXhfY2hpbGRyZW49LTEpLHQudmFsaWRfY2hpbGRyZW49PT1FJiYodC52YWxpZF9jaGlsZHJlbj0tMSksdH0sdGhpcy5nZXRfdHlwZT1mdW5jdGlvbihlLHQpe3JldHVybiEhKGU9dGhpcy5nZXRfbm9kZShlKSkmJih0P1MuZXh0ZW5kKHt0eXBlOmUudHlwZX0sdGhpcy5zZXR0aW5ncy50eXBlc1tlLnR5cGVdKTplLnR5cGUpfSx0aGlzLnNldF90eXBlPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fbW9kZWwuZGF0YSxyLHMsYSxuLG8sZCxjLGw7aWYoUy5pc0FycmF5KGUpKXtmb3Iocz0wLGE9KGU9ZS5zbGljZSgpKS5sZW5ndGg7czxhO3MrKyl0aGlzLnNldF90eXBlKGVbc10sdCk7cmV0dXJuITB9aWYocj10aGlzLnNldHRpbmdzLnR5cGVzLGU9dGhpcy5nZXRfbm9kZShlKSwhclt0XXx8IWUpcmV0dXJuITE7aWYoKGM9dGhpcy5nZXRfbm9kZShlLCEwKSkmJmMubGVuZ3RoJiYobD1jLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikpLG49ZS50eXBlLG89dGhpcy5nZXRfaWNvbihlKSxlLnR5cGU9dCwoITA9PT1vfHwhcltuXXx8cltuXS5pY29uIT09RSYmbz09PXJbbl0uaWNvbikmJnRoaXMuc2V0X2ljb24oZSxyW3RdLmljb249PT1FfHxyW3RdLmljb24pLHJbbl0mJnJbbl0ubGlfYXR0ciE9PUUmJlwib2JqZWN0XCI9PXR5cGVvZiByW25dLmxpX2F0dHIpZm9yKGQgaW4gcltuXS5saV9hdHRyKWlmKHJbbl0ubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShkKSl7aWYoXCJpZFwiPT09ZCljb250aW51ZTtcImNsYXNzXCI9PT1kPyhpW2UuaWRdLmxpX2F0dHIuY2xhc3M9KGlbZS5pZF0ubGlfYXR0ci5jbGFzc3x8XCJcIikucmVwbGFjZShyW25dLmxpX2F0dHJbZF0sXCJcIiksYyYmYy5yZW1vdmVDbGFzcyhyW25dLmxpX2F0dHJbZF0pKTppW2UuaWRdLmxpX2F0dHJbZF09PT1yW25dLmxpX2F0dHJbZF0mJihpW2UuaWRdLmxpX2F0dHJbZF09bnVsbCxjJiZjLnJlbW92ZUF0dHIoZCkpfWlmKHJbbl0mJnJbbl0uYV9hdHRyIT09RSYmXCJvYmplY3RcIj09dHlwZW9mIHJbbl0uYV9hdHRyKWZvcihkIGluIHJbbl0uYV9hdHRyKWlmKHJbbl0uYV9hdHRyLmhhc093blByb3BlcnR5KGQpKXtpZihcImlkXCI9PT1kKWNvbnRpbnVlO1wiY2xhc3NcIj09PWQ/KGlbZS5pZF0uYV9hdHRyLmNsYXNzPShpW2UuaWRdLmFfYXR0ci5jbGFzc3x8XCJcIikucmVwbGFjZShyW25dLmFfYXR0cltkXSxcIlwiKSxsJiZsLnJlbW92ZUNsYXNzKHJbbl0uYV9hdHRyW2RdKSk6aVtlLmlkXS5hX2F0dHJbZF09PT1yW25dLmFfYXR0cltkXSYmKFwiaHJlZlwiPT09ZD8oaVtlLmlkXS5hX2F0dHJbZF09XCIjXCIsbCYmbC5hdHRyKFwiaHJlZlwiLFwiI1wiKSk6KGRlbGV0ZSBpW2UuaWRdLmFfYXR0cltkXSxsJiZsLnJlbW92ZUF0dHIoZCkpKX1pZihyW3RdLmxpX2F0dHIhPT1FJiZcIm9iamVjdFwiPT10eXBlb2Ygclt0XS5saV9hdHRyKWZvcihkIGluIHJbdF0ubGlfYXR0cilpZihyW3RdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoZCkpe2lmKFwiaWRcIj09PWQpY29udGludWU7aVtlLmlkXS5saV9hdHRyW2RdPT09RT8oaVtlLmlkXS5saV9hdHRyW2RdPXJbdF0ubGlfYXR0cltkXSxjJiYoXCJjbGFzc1wiPT09ZD9jLmFkZENsYXNzKHJbdF0ubGlfYXR0cltkXSk6Yy5hdHRyKGQsclt0XS5saV9hdHRyW2RdKSkpOlwiY2xhc3NcIj09PWQmJihpW2UuaWRdLmxpX2F0dHIuY2xhc3M9clt0XS5saV9hdHRyW2RdK1wiIFwiK2lbZS5pZF0ubGlfYXR0ci5jbGFzcyxjJiZjLmFkZENsYXNzKHJbdF0ubGlfYXR0cltkXSkpfWlmKHJbdF0uYV9hdHRyIT09RSYmXCJvYmplY3RcIj09dHlwZW9mIHJbdF0uYV9hdHRyKWZvcihkIGluIHJbdF0uYV9hdHRyKWlmKHJbdF0uYV9hdHRyLmhhc093blByb3BlcnR5KGQpKXtpZihcImlkXCI9PT1kKWNvbnRpbnVlO2lbZS5pZF0uYV9hdHRyW2RdPT09RT8oaVtlLmlkXS5hX2F0dHJbZF09clt0XS5hX2F0dHJbZF0sbCYmKFwiY2xhc3NcIj09PWQ/bC5hZGRDbGFzcyhyW3RdLmFfYXR0cltkXSk6bC5hdHRyKGQsclt0XS5hX2F0dHJbZF0pKSk6XCJocmVmXCI9PT1kJiZcIiNcIj09PWlbZS5pZF0uYV9hdHRyW2RdPyhpW2UuaWRdLmFfYXR0ci5ocmVmPXJbdF0uYV9hdHRyLmhyZWYsbCYmbC5hdHRyKFwiaHJlZlwiLHJbdF0uYV9hdHRyLmhyZWYpKTpcImNsYXNzXCI9PT1kJiYoaVtlLmlkXS5hX2F0dHIuY2xhc3M9clt0XS5hX2F0dHIuY2xhc3MrXCIgXCIraVtlLmlkXS5hX2F0dHIuY2xhc3MsbCYmbC5hZGRDbGFzcyhyW3RdLmFfYXR0cltkXSkpfXJldHVybiEwfX0sUy5qc3RyZWUuZGVmYXVsdHMudW5pcXVlPXtjYXNlX3NlbnNpdGl2ZTohMSx0cmltX3doaXRlc3BhY2U6ITEsZHVwbGljYXRlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrXCIgKFwiK3QrXCIpXCJ9fSxTLmpzdHJlZS5wbHVnaW5zLnVuaXF1ZT1mdW5jdGlvbihlLGYpe3RoaXMuY2hlY2s9ZnVuY3Rpb24oZSx0LGkscixzKXtpZighMT09PWYuY2hlY2suY2FsbCh0aGlzLGUsdCxpLHIscykpcmV0dXJuITE7aWYodD10JiZ0LmlkP3Q6dGhpcy5nZXRfbm9kZSh0KSwhKGk9aSYmaS5pZD9pOnRoaXMuZ2V0X25vZGUoaSkpfHwhaS5jaGlsZHJlbilyZXR1cm4hMDt2YXIgYT1cInJlbmFtZV9ub2RlXCI9PT1lP3I6dC50ZXh0LG49W10sbz10aGlzLnNldHRpbmdzLnVuaXF1ZS5jYXNlX3NlbnNpdGl2ZSxkPXRoaXMuc2V0dGluZ3MudW5pcXVlLnRyaW1fd2hpdGVzcGFjZSxjPXRoaXMuX21vZGVsLmRhdGEsbCxoLF87Zm9yKGw9MCxoPWkuY2hpbGRyZW4ubGVuZ3RoO2w8aDtsKyspXz1jW2kuY2hpbGRyZW5bbF1dLnRleHQsb3x8KF89Xy50b0xvd2VyQ2FzZSgpKSxkJiYoXz1fLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKSxuLnB1c2goXyk7c3dpdGNoKG98fChhPWEudG9Mb3dlckNhc2UoKSksZCYmKGE9YS5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksZSl7Y2FzZVwiZGVsZXRlX25vZGVcIjpyZXR1cm4hMDtjYXNlXCJyZW5hbWVfbm9kZVwiOnJldHVybiBfPXQudGV4dHx8XCJcIixvfHwoXz1fLnRvTG93ZXJDYXNlKCkpLGQmJihfPV8ucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLChsPS0xPT09Uy5pbkFycmF5KGEsbil8fHQudGV4dCYmXz09PWEpfHwodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ1bmlxdWVcIixpZDpcInVuaXF1ZV8wMVwiLHJlYXNvbjpcIkNoaWxkIHdpdGggbmFtZSBcIithK1wiIGFscmVhZHkgZXhpc3RzLiBQcmV2ZW50aW5nOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSksbDtjYXNlXCJjcmVhdGVfbm9kZVwiOnJldHVybihsPS0xPT09Uy5pbkFycmF5KGEsbikpfHwodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ1bmlxdWVcIixpZDpcInVuaXF1ZV8wNFwiLHJlYXNvbjpcIkNoaWxkIHdpdGggbmFtZSBcIithK1wiIGFscmVhZHkgZXhpc3RzLiBQcmV2ZW50aW5nOiBcIitlLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazplLHBvczpyLG9iajohKCF0fHwhdC5pZCkmJnQuaWQscGFyOiEoIWl8fCFpLmlkKSYmaS5pZH0pfSksbDtjYXNlXCJjb3B5X25vZGVcIjpyZXR1cm4obD0tMT09PVMuaW5BcnJheShhLG4pKXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDJcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIrYStcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrZSxkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6ZSxwb3M6cixvYmo6ISghdHx8IXQuaWQpJiZ0LmlkLHBhcjohKCFpfHwhaS5pZCkmJmkuaWR9KX0pLGw7Y2FzZVwibW92ZV9ub2RlXCI6cmV0dXJuKGw9dC5wYXJlbnQ9PT1pLmlkJiYoIXN8fCFzLmlzX211bHRpKXx8LTE9PT1TLmluQXJyYXkoYSxuKSl8fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzAzXCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2ErXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2UsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmUscG9zOnIsb2JqOiEoIXR8fCF0LmlkKSYmdC5pZCxwYXI6ISghaXx8IWkuaWQpJiZpLmlkfSl9KSxsfXJldHVybiEwfSx0aGlzLmNyZWF0ZV9ub2RlPWZ1bmN0aW9uKGUsdCxpLHIscyl7aWYoIXR8fHQudGV4dD09PUUpe2lmKG51bGw9PT1lJiYoZT1TLmpzdHJlZS5yb290KSwhKGU9dGhpcy5nZXRfbm9kZShlKSkpcmV0dXJuIGYuY3JlYXRlX25vZGUuY2FsbCh0aGlzLGUsdCxpLHIscyk7aWYoIShpPWk9PT1FP1wibGFzdFwiOmkpLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIXMmJiF0aGlzLmlzX2xvYWRlZChlKSlyZXR1cm4gZi5jcmVhdGVfbm9kZS5jYWxsKHRoaXMsZSx0LGkscixzKTt0fHwodD17fSk7dmFyIGEsbixvLGQsYyxsPXRoaXMuX21vZGVsLmRhdGEsaD10aGlzLnNldHRpbmdzLnVuaXF1ZS5jYXNlX3NlbnNpdGl2ZSxfPXRoaXMuc2V0dGluZ3MudW5pcXVlLnRyaW1fd2hpdGVzcGFjZSx1PXRoaXMuc2V0dGluZ3MudW5pcXVlLmR1cGxpY2F0ZSxnO2ZvcihuPWE9dGhpcy5nZXRfc3RyaW5nKFwiTmV3IG5vZGVcIiksbz1bXSxkPTAsYz1lLmNoaWxkcmVuLmxlbmd0aDtkPGM7ZCsrKWc9bFtlLmNoaWxkcmVuW2RdXS50ZXh0LGh8fChnPWcudG9Mb3dlckNhc2UoKSksXyYmKGc9Zy5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksby5wdXNoKGcpO2Q9MSxnPW4saHx8KGc9Zy50b0xvd2VyQ2FzZSgpKSxfJiYoZz1nLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKTt3aGlsZSgtMSE9PVMuaW5BcnJheShnLG8pKWc9bj11LmNhbGwodGhpcyxhLCsrZCkudG9TdHJpbmcoKSxofHwoZz1nLnRvTG93ZXJDYXNlKCkpLF8mJihnPWcucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpO3QudGV4dD1ufXJldHVybiBmLmNyZWF0ZV9ub2RlLmNhbGwodGhpcyxlLHQsaSxyLHMpfX07dmFyIHY9ay5jcmVhdGVFbGVtZW50KFwiRElWXCIpO2lmKHYuc2V0QXR0cmlidXRlKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKSx2LnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSx2LmNsYXNzTmFtZT1cImpzdHJlZS13aG9sZXJvd1wiLHYuaW5uZXJIVE1MPVwiJiMxNjA7XCIsUy5qc3RyZWUucGx1Z2lucy53aG9sZXJvdz1mdW5jdGlvbihlLGEpe3RoaXMuYmluZD1mdW5jdGlvbigpe2EuYmluZC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vbihcInJlYWR5LmpzdHJlZSBzZXRfc3RhdGUuanN0cmVlXCIsUy5wcm94eShmdW5jdGlvbigpe3RoaXMuaGlkZV9kb3RzKCl9LHRoaXMpKS5vbihcImluaXQuanN0cmVlIGxvYWRpbmcuanN0cmVlIHJlYWR5LmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oKXt0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS13aG9sZXJvdy11bFwiKX0sdGhpcykpLm9uKFwiZGVzZWxlY3RfYWxsLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpfSx0aGlzKSkub24oXCJjaGFuZ2VkLmpzdHJlZVwiLFMucHJveHkoZnVuY3Rpb24oZSx0KXt0aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpO3ZhciBpPSExLHIscztmb3Iocj0wLHM9dC5zZWxlY3RlZC5sZW5ndGg7cjxzO3IrKykoaT10aGlzLmdldF9ub2RlKHQuc2VsZWN0ZWRbcl0sITApKSYmaS5sZW5ndGgmJmkuY2hpbGRyZW4oXCIuanN0cmVlLXdob2xlcm93XCIpLmFkZENsYXNzKFwianN0cmVlLXdob2xlcm93LWNsaWNrZWRcIil9LHRoaXMpKS5vbihcIm9wZW5fbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7dGhpcy5nZXRfbm9kZSh0Lm5vZGUsITApLmZpbmQoXCIuanN0cmVlLWNsaWNrZWRcIikucGFyZW50KCkuY2hpbGRyZW4oXCIuanN0cmVlLXdob2xlcm93XCIpLmFkZENsYXNzKFwianN0cmVlLXdob2xlcm93LWNsaWNrZWRcIil9LHRoaXMpKS5vbihcImhvdmVyX25vZGUuanN0cmVlIGRlaG92ZXJfbm9kZS5qc3RyZWVcIixTLnByb3h5KGZ1bmN0aW9uKGUsdCl7XCJob3Zlcl9ub2RlXCI9PT1lLnR5cGUmJnRoaXMuaXNfZGlzYWJsZWQodC5ub2RlKXx8dGhpcy5nZXRfbm9kZSh0Lm5vZGUsITApLmNoaWxkcmVuKFwiLmpzdHJlZS13aG9sZXJvd1wiKVtcImhvdmVyX25vZGVcIj09PWUudHlwZT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzdHJlZS13aG9sZXJvdy1ob3ZlcmVkXCIpfSx0aGlzKSkub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixTLnByb3h5KGZ1bmN0aW9uKGUpe2lmKHRoaXMuX2RhdGEuY29udGV4dG1lbnUpe2UucHJldmVudERlZmF1bHQoKTt2YXIgdD1TLkV2ZW50KFwiY29udGV4dG1lbnVcIix7bWV0YUtleTplLm1ldGFLZXksY3RybEtleTplLmN0cmxLZXksYWx0S2V5OmUuYWx0S2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXkscGFnZVg6ZS5wYWdlWCxwYWdlWTplLnBhZ2VZfSk7UyhlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maXJzdCgpLnRyaWdnZXIodCl9fSx0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixmdW5jdGlvbihlKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciB0PVMuRXZlbnQoXCJjbGlja1wiLHttZXRhS2V5OmUubWV0YUtleSxjdHJsS2V5OmUuY3RybEtleSxhbHRLZXk6ZS5hbHRLZXksc2hpZnRLZXk6ZS5zaGlmdEtleX0pO1MoZS5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKHQpLmZvY3VzKCl9KS5vbihcImRibGNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS13aG9sZXJvd1wiLGZ1bmN0aW9uKGUpe2Uuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7dmFyIHQ9Uy5FdmVudChcImRibGNsaWNrXCIse21ldGFLZXk6ZS5tZXRhS2V5LGN0cmxLZXk6ZS5jdHJsS2V5LGFsdEtleTplLmFsdEtleSxzaGlmdEtleTplLnNoaWZ0S2V5fSk7UyhlLmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maXJzdCgpLnRyaWdnZXIodCkuZm9jdXMoKX0pLm9uKFwiY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWxlYWYgPiAuanN0cmVlLW9jbFwiLFMucHJveHkoZnVuY3Rpb24oZSl7ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTt2YXIgdD1TLkV2ZW50KFwiY2xpY2tcIix7bWV0YUtleTplLm1ldGFLZXksY3RybEtleTplLmN0cmxLZXksYWx0S2V5OmUuYWx0S2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXl9KTtTKGUuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcih0KS5mb2N1cygpfSx0aGlzKSkub24oXCJtb3VzZW92ZXIuanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93LCAuanN0cmVlLWljb25cIixTLnByb3h5KGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuaXNfZGlzYWJsZWQoZS5jdXJyZW50VGFyZ2V0KXx8dGhpcy5ob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCksITF9LHRoaXMpKS5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsXCIuanN0cmVlLW5vZGVcIixTLnByb3h5KGZ1bmN0aW9uKGUpe3RoaXMuZGVob3Zlcl9ub2RlKGUuY3VycmVudFRhcmdldCl9LHRoaXMpKX0sdGhpcy50ZWFyZG93bj1mdW5jdGlvbigpe3RoaXMuc2V0dGluZ3Mud2hvbGVyb3cmJnRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5yZW1vdmUoKSxhLnRlYXJkb3duLmNhbGwodGhpcyl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oZSx0LGkscil7aWYoZT1hLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIHM9di5jbG9uZU5vZGUoITApOy0xIT09Uy5pbkFycmF5KGUuaWQsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkKSYmKHMuY2xhc3NOYW1lKz1cIiBqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKSx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCYmdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9PT1lLmlkJiYocy5jbGFzc05hbWUrPVwiIGpzdHJlZS13aG9sZXJvdy1ob3ZlcmVkXCIpLGUuaW5zZXJ0QmVmb3JlKHMsZS5jaGlsZE5vZGVzWzBdKX1yZXR1cm4gZX19LHdpbmRvdy5jdXN0b21FbGVtZW50cyYmT2JqZWN0JiZPYmplY3QuY3JlYXRlKXt2YXIgaj1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSk7ai5jcmVhdGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgZT17Y29yZTp7fSxwbHVnaW5zOltdfSx0O2Zvcih0IGluIFMuanN0cmVlLnBsdWdpbnMpUy5qc3RyZWUucGx1Z2lucy5oYXNPd25Qcm9wZXJ0eSh0KSYmdGhpcy5hdHRyaWJ1dGVzW3RdJiYoZS5wbHVnaW5zLnB1c2godCksdGhpcy5nZXRBdHRyaWJ1dGUodCkmJkpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUodCkpJiYoZVt0XT1KU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKHQpKSkpO2Zvcih0IGluIFMuanN0cmVlLmRlZmF1bHRzLmNvcmUpUy5qc3RyZWUuZGVmYXVsdHMuY29yZS5oYXNPd25Qcm9wZXJ0eSh0KSYmdGhpcy5hdHRyaWJ1dGVzW3RdJiYoZS5jb3JlW3RdPUpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUodCkpfHx0aGlzLmdldEF0dHJpYnV0ZSh0KSk7Uyh0aGlzKS5qc3RyZWUoZSl9O3RyeXt3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidmFrYXRhLWpzdHJlZVwiLGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmp9KX1jYXRjaChlKXt9fX19KTsiXSwic291cmNlUm9vdCI6IiJ9